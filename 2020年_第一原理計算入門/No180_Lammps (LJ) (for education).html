<p>Lammps LJ&nbsp;for education (windows 10 (64 bit))<br />
------------------------------------------------------------------------------<br />
■ lammps<br />
(Edit: Jun/27/2021)<br />
<br />
□ インストール方法<br />
1. <a href="http://packages.lammps.org/windows.html">http://packages.lammps.org/windows.html</a> のHPで&quot;<a href="http://rpm.lammps.org/windows/admin/">their own download area</a>&quot;と&rdquo;<a href="https://rpm.lammps.org/windows/admin/64bit/index.html">64bit</a>&rdquo;をクリックする<br />
&nbsp; （<a href="https://rpm.lammps.org/windows/admin/64bit/index.html">LAMMPS Binaries Repository: ./admin/64bit</a>）<br />
2. <a href="https://rpm.lammps.org/windows/admin/64bit/LAMMPS-64bit-18Jun2019.exe">LAMMPS-64bit-18Jun2019.exe</a> をダウンロードして実行する<br />
3. ディフォルトの設定のまま最後まで進めばよい<br />
以上で lammps のダウンロードと設定は完了です<br />
※ 配布元のHPが変更を加えるなどして、別のバージョンのlammpsを使う必要になった場合には、run.batで[<span class="pl-s"><span class="pl-pds">&quot;</span>C:\Program Files\LAMMPS 64-bit 18Jun2019\bin\lmp_serial.exe<span class="pl-pds">&quot;</span></span> -in in.lmp]の部分をインストールしたlammpsのバージョンに対応するものに書き換えてください。または[<span class="pl-s">C:\Program Files\LAMMPS 64-bit **********]を書き換えるという方法もあります</span><br />
<br />
□ 描画ソフト<br />
&nbsp;・gnuplot（<a href="http://www.gnuplot.info/">http://www.gnuplot.info/</a>）<br />
&nbsp;&nbsp;<a href="http://www.yamamo10.jp/yamamoto/comp/gnuplot/inst_win/index.php">http://www.yamamo10.jp/yamamoto/comp/gnuplot/inst_win/index.php</a><br />
・Ovito（<a href="https://www.ovito.org/windows-downloads/">https://www.ovito.org/windows-downloads/</a>）<br />
※ web上に情報がありますので、お手数をおかけしますが、そちらをご参照ください<br />
※ gnuplotのインストールと環境設定 (Edit: Dec/11/2020)<br />
1.&nbsp;<a href="https://sourceforge.net/projects/gnuplot/files/gnuplot/">gnuplot - Browse /gnuplot at SourceForge.net</a>&nbsp;から gp528-win64-mingw.exe を得る<br />
&nbsp; gp528-win64-mingw.exe をダブルクリック。設定はディフォルトのままでよい<br />
2.&nbsp;コントロール パネル &gt; システムとセキュリティ &gt; システム<br />
3. システムの環境設定 &gt; 環境変数（N）... &gt; システム環境変数（S）のPath &gt; 編集（I）... &gt; 新規（N）&gt;&nbsp;C:\Program Files\gnuplot\bin を追加する &gt; OK &gt; OK<br />
------------------------------------------------------------------------------<br />
■ 分子動力学シミュレーション<br />
(Edit: Jun/27/2021)<br />
<br />
□ 入力ファイルのダウンロード<br />
&nbsp; by-student-2017 の lammps_education_LJ_win (<a href="https://github.com/by-student-2017/lammps_education_LJ_win.git"><span style="font-size:14px">https://github.com/by-student-2017/lammps_education_LJ_win.git</span></a>) から入力ファイルをダウンロードして解凍する。右側の[Clone or download]をクリックしていただくと Download ZIP が表示されます<br />
&nbsp;&nbsp;<br />
□ シミュレーションの実行<br />
1. 各種のフォルダの中にある run.bat をダブルクリックすれば計算が走る<br />
2. cfg を Ovito で開けば構造が得られる<br />
3. plot と記載のあるファイルをダブルクリックすれば図が得られる<br />
&nbsp; ※ 温度が目的の値になっているか、エネルギーが一定の値になっているかを確認してみてください<br />
※ 以上の手順は、data.inにある原子の情報、そして、in.lmpのポテンシャルと出力の原子の情報を書きかえれば他の材料でも同様に計算が可能です（Avogadroなどのフリーソフトを用いて構造のファイル（data.in）を作られる方もいます）</p>

<div>&nbsp;</div>

<div><span style="font-size:14px">□ tutorial_1_colloid</span></div>

<div><span style="font-size:14px">&nbsp; コロイドの計算。2dが2次元、3dが3次元での計算。</span></div>

<div>&nbsp;</div>

<div><span style="font-size:14px">□ tutorial_2_micelle_Kremer-Grest-model</span></div>

<div><span style="font-size:14px">&nbsp; Kremer-Grestモデルを用いたミセルの計算。粗視化MD。</span></div>

<div>&nbsp;</div>

<div><span style="font-size:14px">□ tutorial_3_crosslink</span></div>

<div><span style="font-size:14px">&nbsp; Kremer-Grestモデルを用いた計算。step3まで進めると次のtutorial_4_correlation用（5,6,7のtutorialの入力データも作成してコピーする）の構造データを得ることができます。粗視化MD。</span></div>

<div>&nbsp;</div>

<div><span style="font-size:14px">□ tutorial_4_correlation</span></div>

<div><span style="font-size:14px">&nbsp; 応力の時間相関関数を用いた緩和弾性率の計算。粗視化MD。</span></div>

<div>&nbsp;</div>

<div><span style="font-size:14px">□ tutorial_5_G1G2</span></div>

<div><span style="font-size:14px">&nbsp; 貯蔵弾性率(Storage modulus)と損失弾性率(Loss modulus)の計算。積分は台形公式で計算。python3のprint形式にしている。python3をインストールしていない場合は、コマンドプロンプト（PowerShell）でpythonと入力すると、Python3.9を入手する画面が現れる。粗視化MDの計算結果を用いる。</span></div>

<div>&nbsp;</div>

<div><span style="font-size:14px">□ tutorial_6_shear [LJ2]</span></div>

<div><span style="font-size:14px">&nbsp; せん断変形の計算（非平衡計算）。&quot;ひずみ速度 &gt; (1/Rouse緩和時間)&quot;の場合、非線形性を示す。粗視化MD。</span></div>

<div>&nbsp;</div>

<div><span style="font-size:14px">□ tutorial_7_uni [LJ2]</span></div>

<div><span style="font-size:14px">&nbsp; 軸伸長変形の計算（非平衡計算）。&quot;ひずみ速度 &gt; (1/Rouse緩和時間)&quot;の場合、非線形性を示す。粗視化MD。</span></div>

<div><span style="font-size:14px">&nbsp; 計算が途中で破綻してしまう場合、USER-UEFEX を使う[LJ3]。</span></div>

<div>
<div>&nbsp;</div>

<div><span style="font-size:14px">※ 兵庫県立大のlammps講習会（無料）をノートPCで行うために作りました（Focusの利用期間である講習後1週間を過ぎてしまって復習できなくなり、どうしようかと困ったので作りました。入力ファイルの詳細は兵庫県立大のlammps講習会で詳しく解説してくれます）。</span></div>

<div><span style="font-size:14px">※ 東北大の村島先生のgnuplotやpythonスクリプトを用いると図で視覚的にRouseとの比較をすることができます。</span><br />
------------------------------------------------------------------------------<br />
■ lammps (並列計算)<br />
(Edit: Mar/24/2021)<br />
<br />
□ parallel (3コア以上が推奨)<br />
・並列計算用のbatスクリプトファイルです<br />
・並列計算の難易度は MPICH2 &gt;&nbsp;OpenMP となります<br />
&nbsp; 最初はOpenMPをオススメします。慣れてきたら MPICH2 での並列計算も試してみると良いでしょう<br />
・詳細は settings.txt をお読みください<br />
※ in.XXXは一つのフォルダの中に一つだけにしてください<br />
※ 全てのファイルをチェックできていないことやPCの環境依存の問題もありますので、あまり高い期待は抱かないでください。MPICH2での並列計算の環境設定は下記の通りです<br />
<br />
□ MPICH2のインストール<br />
1. <a href="http://packages.lammps.org/windows.html">http://packages.lammps.org/windows.html</a><br />
2. <a href="http://www.mpich.org/static/tarballs/1.4.1p1/mpich2-1.4.1p1-win-x86-64.msi">mpich2-1.4.1p1-win-x86-64.msi</a> をダウンロードして実行する<br />
3. ディフォルトの設定のまま最後まで進めばよい<br />
<br />
□ 並列版のlammpsのインストール<br />
1. <a href="http://packages.lammps.org/windows.html">http://packages.lammps.org/windows.html</a> のHPで&quot;<a href="http://rpm.lammps.org/windows/admin/">their own download area</a>&quot;と&rdquo;<a href="https://rpm.lammps.org/windows/admin/64bit/index.html">64bit</a>&rdquo;をクリックする<br />
&nbsp; （<a href="https://rpm.lammps.org/windows/admin/64bit/index.html">LAMMPS Binaries Repository: ./admin/64bit</a>）<br />
2. <a href="http://LAMMPS-64bit-18Jun2019-MPI.exe">LAMMPS-64bit-18Jun2019-MPI.exe</a> をダウンロードして実行する<br />
3. ディフォルトの設定のまま最後まで進めばよい<br />
以上で lammps のダウンロードと設定は完了です<br />
※ 配布元のHPが変更を加えるなどして、別のバージョンのlammpsを使う必要になった場合には、run.batで[<span class="pl-s"><span class="pl-pds">&quot;</span>C:\Program Files\LAMMPS 64-bit 18Jun2019</span>-MPI<span class="pl-s">\bin\lmp_mpi.exe<span class="pl-pds">&quot;</span></span> -in in.lmp]の部分をインストールしたlammpsのバージョンに対応するものに書き換えてください。または[<span class="pl-s">C:\Program Files\LAMMPS 64-bit **********]を書き換えるという方法もあります</span><br />
<br />
□ 既知の問題<br />
&nbsp; MPIパラレルモードで実行している間、画面への出力はブロックバッファリングされ、通常のようにラインバッファリングされません。つまり、出力はすぐには表示されませんが、一定量の出力が蓄積された後にのみ表示されます。これは効率上の理由から行われます。マルチスレッドの並列実行またはシリアル実行は影響を受けません。また、mpiexecで実行する場合、MPICHはプロセスを単一の物理CPUに制限し、実行効率が低下するため、マルチスレッドを使用しないでください（これは set OMP_NUM_THREADS=1 の状態で計算してくださいという意味です。ディフォルトではこの設定になっています）</div>

<div><span style="font-size:14px">------------------------------------------------------------------------------</span></div>

<div><span style="font-size:14px">■ References</span></div>

<div>&nbsp;</div>

<div><span style="font-size:14px">[LJ1] lammps講習会、兵庫県立大<br />
&nbsp; </span>兵庫県立大のlammps講習会ではKremer-Grestモデルを用いた計算に必要な知識を学ぶことができる</div>

<div><span style="font-size:14px">[LJ2] <a href="https://github.com/t-murash/lammps-hands-on/tree/master/04deform">https://github.com/t-murash/lammps-hands-on/tree/master/04deform</a></span></div>

<div><span style="font-size:14px">[LJ3] <a href="http://www.cmpt.phys.tohoku.ac.jp/~murasima/">http://www.cmpt.phys.tohoku.ac.jp/~murasima/</a></span></div>

<div><span style="font-size:14px">&nbsp; <a href="https://github.com/t-murash/lammps-hands-on">https://github.com/t-murash/lammps-hands-on</a></span></div>

<div><span style="font-size:14px">&nbsp; <a href="https://github.com/t-murash/USER-UEFEX">https://github.com/t-murash/USER-UEFEX</a></span></div>
</div>

<div>------------------------------------------------------------------------------</div>

<div>■ 高分子メルトおよびゴムでよく使われる設定<br />
(Edit: Jun/27/2021)</div>

<div>&nbsp;</div>

<div>◇ Kremer-Grest [KG1]</div>

<div>Table 3. Mapping of the bead-spring polymers model described in this paper onto experimental polymers. Assuming&nbsp;<em>N</em><sub><em>e</em>&nbsp;</sub>= 35 and using&nbsp;<em>d</em><sub>r</sub><sup>2</sup>=<em>R</em><sup>2</sup>(<em>N<sub>e</sub></em>); the mapping procedure is described in the text.&nbsp; Taking&nbsp;<em>N<sub>e</sub></em>&nbsp;= 35 &plusmn; 5 effects the value predicted for&nbsp;<em>g<sub>l</sub></em>(<em>&tau;<sub>e</sub></em>) and&nbsp;<em>&tau;<sub>e</sub></em>&nbsp;by approximately 15% and 30%, respectively.&nbsp; The uncertainty in the mapping for PS causes a doubling of the effective uncertainty.</div>

<div>
<table border="1" cellpadding="1" cellspacing="1" style="width:500px">
	<tbody>
		<tr>
			<td style="text-align:center; width:51px">System</td>
			<td style="text-align:center; width:46px"><em>T</em></td>
			<td style="text-align:center; width:45px">*1</td>
			<td style="text-align:center; width:49px"><em>M<sub>c</sub></em></td>
			<td style="text-align:center; width:37px">*2</td>
			<td style="text-align:center; width:48px">*3</td>
			<td style="text-align:center; width:48px"><em>llp</em></td>
			<td style="text-align:center; width:48px">1&sigma; =</td>
			<td style="text-align:center; width:38px"><em>d<sub>r</sub></em></td>
			<td style="text-align:center; width:35px">*4</td>
		</tr>
		<tr>
			<td style="text-align:center; width:51px">MD</td>
			<td style="text-align:center; width:46px">1&epsilon;/k<sub>B</sub></td>
			<td style="text-align:center; width:45px">1</td>
			<td style="text-align:center; width:49px">35</td>
			<td style="text-align:center; width:37px">1</td>
			<td style="text-align:center; width:48px">1</td>
			<td style="text-align:center; width:48px">1.3&sigma;</td>
			<td style="text-align:center; width:48px">&nbsp;</td>
			<td style="text-align:center; width:38px">7.7&sigma;</td>
			<td style="text-align:center; width:35px">4.5&sigma;</td>
		</tr>
		<tr>
			<td style="text-align:center; width:51px">PS</td>
			<td style="text-align:center; width:46px">485 K</td>
			<td style="text-align:center; width:45px">104</td>
			<td style="text-align:center; width:49px">18000</td>
			<td style="text-align:center; width:37px">4.95</td>
			<td style="text-align:center; width:48px">515</td>
			<td style="text-align:center; width:48px">7.4 A</td>
			<td style="text-align:center; width:48px">12.6 A</td>
			<td style="text-align:center; width:38px">97 A</td>
			<td style="text-align:center; width:35px">56 A</td>
		</tr>
		<tr>
			<td style="text-align:center; width:51px">PE</td>
			<td style="text-align:center; width:46px">448 K</td>
			<td style="text-align:center; width:45px">14</td>
			<td style="text-align:center; width:49px">1350</td>
			<td style="text-align:center; width:37px">2.76</td>
			<td style="text-align:center; width:48px">38.6</td>
			<td style="text-align:center; width:48px">4 A</td>
			<td style="text-align:center; width:48px">5.1 A</td>
			<td style="text-align:center; width:38px">39 A</td>
			<td style="text-align:center; width:35px">23 A</td>
		</tr>
		<tr>
			<td style="text-align:center; width:51px">PDMS</td>
			<td style="text-align:center; width:46px">300 K</td>
			<td style="text-align:center; width:45px">74</td>
			<td style="text-align:center; width:49px">9000</td>
			<td style="text-align:center; width:37px">3.47</td>
			<td style="text-align:center; width:48px">257</td>
			<td style="text-align:center; width:48px">6.2 A</td>
			<td style="text-align:center; width:48px">8.7 A</td>
			<td style="text-align:center; width:38px">68 A</td>
			<td style="text-align:center; width:35px">39 A</td>
		</tr>
		<tr>
			<td style="text-align:center; width:51px">PTHF</td>
			<td style="text-align:center; width:46px">418 K</td>
			<td style="text-align:center; width:45px">72</td>
			<td style="text-align:center; width:49px">1440</td>
			<td style="text-align:center; width:37px">0.57</td>
			<td style="text-align:center; width:48px">41</td>
			<td style="text-align:center; width:48px">8 A</td>
			<td style="text-align:center; width:48px">4.6 A</td>
			<td style="text-align:center; width:38px">35 A</td>
			<td style="text-align:center; width:35px">21 A</td>
		</tr>
		<tr>
			<td style="text-align:center; width:51px">PEP</td>
			<td style="text-align:center; width:46px">500 K</td>
			<td style="text-align:center; width:45px">70</td>
			<td style="text-align:center; width:49px">2950</td>
			<td style="text-align:center; width:37px">1.20</td>
			<td style="text-align:center; width:48px">84</td>
			<td style="text-align:center; width:48px">7.74 A</td>
			<td style="text-align:center; width:48px">6.5 A</td>
			<td style="text-align:center; width:38px">50 A</td>
			<td style="text-align:center; width:35px">29 A</td>
		</tr>
		<tr>
			<td style="text-align:center; width:51px">PI</td>
			<td style="text-align:center; width:46px">307 K</td>
			<td style="text-align:center; width:45px">68</td>
			<td style="text-align:center; width:49px">4100</td>
			<td style="text-align:center; width:37px">1.73</td>
			<td style="text-align:center; width:48px">117</td>
			<td style="text-align:center; width:48px">6.6 A</td>
			<td style="text-align:center; width:48px">6.7 A</td>
			<td style="text-align:center; width:38px">51 A</td>
			<td style="text-align:center; width:35px">30 A</td>
		</tr>
	</tbody>
</table>

<p>*1: Monomer mass<br />
*2: Equivalent No. of beads<br />
*3: Equivalent mol. mass<br />
*4: [<em>g<sub>l</sub></em>(<em>&tau;</em>)]<sup>1/2</sup></p>

<table border="1" cellpadding="1" cellspacing="1" style="width:500px">
	<tbody>
		<tr>
			<td style="text-align:center; width:52px">System</td>
			<td style="text-align:center; width:190px">&nbsp;</td>
			<td style="text-align:center; width:119px">1<em>&tau;</em>&nbsp;=</td>
			<td style="text-align:center; width:118px"><em>&tau;<sub>e</sub></em></td>
		</tr>
		<tr>
			<td style="text-align:center; width:52px">MD</td>
			<td style="text-align:center; width:190px">&nbsp;</td>
			<td style="text-align:center; width:119px">&nbsp;</td>
			<td style="text-align:center; width:118px">1800<em>&tau;</em></td>
		</tr>
		<tr>
			<td style="text-align:center; width:52px">PS</td>
			<td style="text-align:center; width:190px">polystryene</td>
			<td style="text-align:center; width:119px">3.1*10<sup>-8</sup>&nbsp;s</td>
			<td style="text-align:center; width:118px">5.5*10<sup>-5</sup>&nbsp;s</td>
		</tr>
		<tr>
			<td style="text-align:center; width:52px">PE</td>
			<td style="text-align:center; width:190px">polyethylene</td>
			<td style="text-align:center; width:119px">6.6*10<sup>-11</sup>&nbsp;s</td>
			<td style="text-align:center; width:118px">1.2*10<sup>-7</sup>&nbsp;s</td>
		</tr>
		<tr>
			<td style="text-align:center; width:52px">PDMS</td>
			<td style="text-align:center; width:190px">polydimethylsiloxane</td>
			<td style="text-align:center; width:119px">2.3*10<sup>-10</sup>&nbsp;s</td>
			<td style="text-align:center; width:118px">4.1*10<sup>-7</sup>&nbsp;s</td>
		</tr>
		<tr>
			<td style="text-align:center; width:52px">PTHF</td>
			<td style="text-align:center; width:190px">polytetrahydrofurane</td>
			<td style="text-align:center; width:119px">1.8*10<sup>-12</sup>&nbsp;s</td>
			<td style="text-align:center; width:118px">3.2*10<sup>-9</sup>&nbsp;s</td>
		</tr>
		<tr>
			<td style="text-align:center; width:52px">PEP</td>
			<td style="text-align:center; width:190px">polyethane-polypropylane</td>
			<td style="text-align:center; width:119px">0.55*10<sup>-11</sup>&nbsp;s</td>
			<td style="text-align:center; width:118px">1.0*10<sup>-8</sup>&nbsp;s</td>
		</tr>
		<tr>
			<td style="text-align:center; width:52px">PI</td>
			<td style="text-align:center; width:190px">polyisoprene</td>
			<td style="text-align:center; width:119px">1.0*10<sup>-11</sup>&nbsp;s</td>
			<td style="text-align:center; width:118px">1.8*10<sup>-7</sup>&nbsp;s</td>
		</tr>
	</tbody>
</table>

<p>[KG1]&nbsp;K. Kremer and G. S. Grest, J. Chem. Phys. 92 (1990) 5057.<br />
[KG2]&nbsp;<a href="https://www.jstage.jst.go.jp/article/gomu/89/6/89_157/_pdf">https://www.jstage.jst.go.jp/article/gomu/89/6/89_157/_pdf</a><br />
[KG3]&nbsp;<a href="https://www.jstage.jst.go.jp/article/cicsj/24/5/24_5_152/_pdf">https://www.jstage.jst.go.jp/article/cicsj/24/5/24_5_152/_pdf</a><br />
[KG4]&nbsp;<a href="https://www.jstage.jst.go.jp/article/gomu/86/4/86_113/_pdf">https://www.jstage.jst.go.jp/article/gomu/86/4/86_113/_pdf</a><br />
※ シミュレーションの単位（長さは&sigma;、時間は&tau;、エネルギーはk<sub>B</sub>T）。これらを現実の単位に変換して、現実系と対応させることができる。<br />
※&nbsp;標準的なパラメータ [KG5]: k&sigma;<sup>2</sup>/&epsilon; = 30, R<sub>0</sub>/&sigma; = 1.5, m = &sigma; = &epsilon; = &tau;<sub>MD</sub>&nbsp;= 1, &xi; = 0.5&epsilon;&tau;<sub>MD</sub>/&sigma;, 時間刻み 0.005&tau;<sub>MD</sub><br />
[KG5]&nbsp;<a href="https://www.jamstec.go.jp/es/jp/project/sangyou_report/H20_SRI_jp.pdf">https://www.jamstec.go.jp/es/jp/project/sangyou_report/H20_SRI_jp.pdf</a><br />
<br />
◇ 緩和弾性率 G(t)<br />
・Multiple-tau法を用いて応力の時間相関関数を計算することが行われる<br />
&nbsp; (fix ave/correlate/log) (USER-MISC)<br />
&nbsp; r<sub>c</sub>= 2<sup>1/6</sup>&sigma;<br />
&nbsp; 保存するデータ数 = ncorr * nlen<br />
&nbsp; 計算される最大の相関関数 = (nlen-1)*2<sup>(ncorr-1)</sup> [step]<br />
&nbsp; 環状バッファには移動時間平均をとったものを保存し、移動時間平均した量の相関関数を計算する。得られる相関関数は時間シフトなしの三角移動平均（Triangular Moving Average: TMA）された相関関数となる。<br />
&nbsp; 計算ステップ数が増加すると長時間側の振動（ノイズ）は減っていく。<br />
&nbsp; Rouseモデルと異なり、短時間側で見られる振動はバネでつながった粒子の衝突によるものである。<br />
&nbsp; Ramirez et al., J. Chem. Phys. 133 (2010) 154103.<br />
・伸長変形計算<br />
&nbsp; (USER-UEFEX)を用いてシミュレーションボックスがつぶれて計算できなくなる問題を回避する。<br />
・lammpsの計算後のデータから精度良く求める方法<br />
&nbsp;&nbsp;K. Hagita et al., JPSJ, 89 (2020)&nbsp;024002.<br />
※ Lammpsでは「応力=-圧力」となります。<br />
------------------------------------------------------------------------------</p>
</div>
