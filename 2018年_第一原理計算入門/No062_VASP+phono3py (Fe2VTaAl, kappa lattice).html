<span style="font-size: 14px;">------------------------------------------------------------------------------<br />
Å° VASP+phono3py<br />
<br />
Å† Phono3py (Thermal conductivity with relaxation time approximation)<br />
• The single mode relaxation time approximation (RTA)<br />
• Linearized phonon Boltzmann equation.<br />
• Very simple phonon-boundary scattering model<br />
-----<br />
• cubic anharmonic force constant (3rd)<br />
• Fermi&rsquo;s golden rule &gt; Im (self energy) = G<br />
• Phonon lifetime t = 1/2G<br />
• Simplify Phonon lifetime t by SMRT<br />
<br />
Å† fundamental input file<br />
1. gedit INCAR<br />
----------INCAR----------<br />
&nbsp; PREC = Accurate<br />
IBRION = -1<br />
# ENCUT = 500<br />
&nbsp;EDIFF = 1.0e-08<br />
ISMEAR = 0; SIGMA = 0.01<br />
&nbsp;IALGO = 38<br />
&nbsp;LREAL = .FALSE.<br />
&nbsp;LWAVE = .FALSE.<br />
LCHARG = .FALSE.<br />
------------------------------<br />
2. cif2cell -p vasp --setup-all --vasp-format=5 --vasp-encutfac=1.0 --vasp-pseudo-libdr=&#39;/home/wien2k4/vasp/potpaw_PBE&#39; --vasp-pseudo-priority=&quot;_d,_pv,_sv,_h,_s&quot; --vasp-print-species --vasp-cartesian-lattice-vectors --print-symmetry-operations -f case.cif<br />
3. cp POSCAR PSOCAR-unitcell<br />
<br />
Note: Please, change &#39;/home/wien2k4/vasp/potpaw_PBE&#39; to your PC&#39;s environments.<br />
<br />
e.g. you can get <span class="n">POSCAR</span><span class="o">-</span><span class="n">unitcell</span><br />
----------PSOCAR-unitcell----------</span><br />
Generated by cif2cell 1.2.10.<br />
&nbsp;1.0<br />
&nbsp; 8.153180000000001&nbsp;&nbsp; 0.000000000000000&nbsp;&nbsp; 0.000000000000000<br />
&nbsp; 4.076590000000000&nbsp;&nbsp; 7.060861001627210&nbsp;&nbsp; 0.000000000000000<br />
&nbsp; 4.076590000000000&nbsp;&nbsp; 2.353620333875737&nbsp;&nbsp; 6.657043593688318<br />
&nbsp; Al&nbsp;&nbsp; V&nbsp; Fe&nbsp; Ta<br />
&nbsp;&nbsp; 8&nbsp;&nbsp; 7&nbsp; 16&nbsp;&nbsp; 1<br />
Direct<br />
&nbsp; 0.250000000000000&nbsp;&nbsp; 0.250000000000000&nbsp;&nbsp; 0.250000000000000<br />
&nbsp; 0.250000000000000&nbsp;&nbsp; 0.750000000000000&nbsp;&nbsp; 0.750000000000000<br />
&nbsp; 0.250000000000000&nbsp;&nbsp; 0.250000000000000&nbsp;&nbsp; 0.750000000000000<br />
&nbsp; 0.750000000000000&nbsp;&nbsp; 0.750000000000000&nbsp;&nbsp; 0.250000000000000<br />
&nbsp; 0.750000000000000&nbsp;&nbsp; 0.250000000000000&nbsp;&nbsp; 0.250000000000000<br />
&nbsp; 0.750000000000000&nbsp;&nbsp; 0.750000000000000&nbsp;&nbsp; 0.750000000000000<br />
&nbsp; 0.750000000000000&nbsp;&nbsp; 0.250000000000000&nbsp;&nbsp; 0.750000000000000<br />
&nbsp; 0.250000000000000&nbsp;&nbsp; 0.750000000000000&nbsp;&nbsp; 0.250000000000000<br />
&nbsp; 0.000000000000000&nbsp;&nbsp; 0.000000000000000&nbsp;&nbsp; 0.000000000000000<br />
&nbsp; 0.000000000000000&nbsp;&nbsp; 0.500000000000000&nbsp;&nbsp; 0.500000000000000<br />
&nbsp; 0.000000000000000&nbsp;&nbsp; 0.000000000000000&nbsp;&nbsp; 0.500000000000000<br />
&nbsp; 0.500000000000000&nbsp;&nbsp; 0.500000000000000&nbsp;&nbsp; 0.000000000000000<br />
&nbsp; 0.500000000000000&nbsp;&nbsp; 0.000000000000000&nbsp;&nbsp; 0.000000000000000<br />
&nbsp; 0.500000000000000&nbsp;&nbsp; 0.000000000000000&nbsp;&nbsp; 0.500000000000000<br />
&nbsp; 0.000000000000000&nbsp;&nbsp; 0.500000000000000&nbsp;&nbsp; 0.000000000000000<br />
&nbsp; 0.125000000000000&nbsp;&nbsp; 0.125000000000000&nbsp;&nbsp; 0.125000000000000<br />
&nbsp; 0.375000000000000&nbsp;&nbsp; 0.375000000000000&nbsp;&nbsp; 0.375000000000000<br />
&nbsp; 0.125000000000000&nbsp;&nbsp; 0.625000000000000&nbsp;&nbsp; 0.625000000000000<br />
&nbsp; 0.125000000000000&nbsp;&nbsp; 0.125000000000000&nbsp;&nbsp; 0.625000000000000<br />
&nbsp; 0.625000000000000&nbsp;&nbsp; 0.625000000000000&nbsp;&nbsp; 0.125000000000000<br />
&nbsp; 0.625000000000000&nbsp;&nbsp; 0.125000000000000&nbsp;&nbsp; 0.125000000000000<br />
&nbsp; 0.625000000000000&nbsp;&nbsp; 0.625000000000000&nbsp;&nbsp; 0.625000000000000<br />
&nbsp; 0.625000000000000&nbsp;&nbsp; 0.125000000000000&nbsp;&nbsp; 0.625000000000000<br />
&nbsp; 0.125000000000000&nbsp;&nbsp; 0.625000000000000&nbsp;&nbsp; 0.125000000000000<br />
&nbsp; 0.375000000000000&nbsp;&nbsp; 0.875000000000000&nbsp;&nbsp; 0.875000000000000<br />
&nbsp; 0.375000000000000&nbsp;&nbsp; 0.375000000000000&nbsp;&nbsp; 0.875000000000000<br />
&nbsp; 0.875000000000000&nbsp;&nbsp; 0.875000000000000&nbsp;&nbsp; 0.375000000000000<br />
&nbsp; 0.875000000000000&nbsp;&nbsp; 0.375000000000000&nbsp;&nbsp; 0.375000000000000<br />
&nbsp; 0.875000000000000&nbsp;&nbsp; 0.875000000000000&nbsp;&nbsp; 0.875000000000000<br />
&nbsp; 0.875000000000000&nbsp;&nbsp; 0.375000000000000&nbsp;&nbsp; 0.875000000000000<br />
&nbsp; 0.375000000000000&nbsp;&nbsp; 0.875000000000000&nbsp;&nbsp; 0.375000000000000<br />
&nbsp; 0.500000000000000&nbsp;&nbsp; 0.500000000000000&nbsp;&nbsp; 0.500000000000000<br />
<span style="font-size: 14px;">------------------------------<br />
<br />
Å† thermal conductivity calculation by use of <span class="n">fc3</span><br />
1.<span class="n"> phono3py</span> -d <span class="o">--</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;2 2 2&quot;</span> <span class="o">-</span><span class="n">c</span> <span class="n">POSCAR</span><span class="o">-</span><span class="n">unitcell</span><br />
2. gedit fc3run<br />
----------fc3run----------<br />
#! /bin/csh -f<br />
#</span><br />
#set max = `sed -n -e &#39;s/num_displacements_created: //1p&#39; disp_fc3.yaml`<br />
set max = 5440<br />
set No = 2721<br />
<span style="font-size: 14px;">echo $No, $max<br />
while ( $No &lt;= $max )<br />
&nbsp; echo &quot;*******************************************&quot;<br />
&nbsp; echo $No&quot;/&quot;$max<br />
&nbsp; date<br />
&nbsp; if ( $No &lt; 10) then<br />
&nbsp;&nbsp;&nbsp; mkdir disp-0000$No<br />
&nbsp;&nbsp;&nbsp; mv POSCAR-0000$No ./disp-0000$No/POSCAR<br />
&nbsp;&nbsp;&nbsp; cp POTCAR ./disp-0000$No/POTCAR<br />
&nbsp;&nbsp;&nbsp; cp INCAR ./disp-0000$No/INCAR<br />
&nbsp;&nbsp;&nbsp; cd disp-0000$No<br />
&nbsp; endif<br />
&nbsp; if ( 10 &lt;= $No &amp;&amp; $No &lt; 100) then<br />
&nbsp;&nbsp;&nbsp; mkdir disp-000$No<br />
&nbsp;&nbsp;&nbsp; mv POSCAR-000$No ./disp-000$No/POSCAR<br />
&nbsp;&nbsp;&nbsp; cp POTCAR ./disp-000$No/POTCAR<br />
&nbsp;&nbsp;&nbsp; cp INCAR ./disp-000$No/INCAR<br />
&nbsp;&nbsp;&nbsp; cd disp-000$No<br />
&nbsp; endif<br />
&nbsp; if ( 100 &lt;= $No &amp;&amp; $No &lt; 1000) then<br />
&nbsp;&nbsp;&nbsp; mkdir disp-00$No<br />
&nbsp;&nbsp;&nbsp; mv POSCAR-00$No ./disp-00$No/POSCAR<br />
&nbsp;&nbsp;&nbsp; cp POTCAR ./disp-00$No/POTCAR<br />
&nbsp;&nbsp;&nbsp; cp INCAR ./disp-00$No/INCAR<br />
&nbsp;&nbsp;&nbsp; cd disp-00$No<br />
&nbsp; endif<br />
&nbsp; if ( 1000 &lt;= $No &amp;&amp; $No &lt; 10000) then<br />
&nbsp;&nbsp;&nbsp; mkdir disp-0$No<br />
&nbsp;&nbsp;&nbsp; mv POSCAR-0$No ./disp-0$No/POSCAR<br />
&nbsp;&nbsp;&nbsp; cp POTCAR ./disp-0$No/POTCAR<br />
&nbsp;&nbsp;&nbsp; cp INCAR ./disp-0$No/INCAR<br />
&nbsp;&nbsp;&nbsp; cd disp-0$No<br />
&nbsp; endif<br />
&nbsp; if ( 10000 &lt;= $No &amp;&amp; $No &lt; 100000) then<br />
&nbsp;&nbsp;&nbsp; mkdir disp-$No<br />
&nbsp;&nbsp;&nbsp; mv POSCAR-$No ./disp-$No/POSCAR<br />
&nbsp;&nbsp;&nbsp; cp POTCAR ./disp-$No/POTCAR<br />
&nbsp;&nbsp;&nbsp; cp INCAR ./disp-$No/INCAR<br />
&nbsp;&nbsp;&nbsp; cd disp-$No<br />
&nbsp; endif<br />
&nbsp; mpirun -np 8 /home/wien2k3/vasp/vasp.5.3/vasp<br />
#</span>mpirun -machinefile $HOME/machinefile -env I_MPI_DEVICE sock -np 4 /home/student/vasp/vasp.5.3/vasp -r ssh<br />
<span style="font-size: 14px;">&nbsp; cd ..<br />
&nbsp; @ No = $No + 1<br />
end<br />
------------------------------<br />
3. chmod +x fc3run<br />
4. fc3run<br />
5.<span class="n"> phono3py</span> <span class="o">--</span><span class="n">cf3</span> <span class="n">disp</span><span class="o">-</span><span class="p">{</span><span class="mf">00001.</span><span class="o">.</span><span class="mi">00231</span><span class="p">}</span><span class="o">/</span><span class="n">vasprun</span><span class="o">.</span><span class="n">xml<br />
6.</span><span class="n"> phono3py</span> <span class="o">--</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;2 2 2&quot;</span> <span class="o">-</span><span class="n">c</span> <span class="n">POSCAR</span><span class="o">-</span><span class="n">unitcell<br />
7.</span><span class="n"> phono3py</span> <span class="o">--</span><span class="n">fc3</span> <span class="o">--</span><span class="n">fc2</span> <span class="o">--</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;2 2 2&quot;</span> <span class="o">--</span><span class="n">mesh</span><span class="o">=</span><span class="s2">&quot;11 11 11&quot;</span> <span class="o">-</span><span class="n">c</span> <span class="n">POSCAR</span><span class="o">-</span><span class="n">unitcell</span> <span class="o">--</span><span class="n">br </span>--bmfp 0.05 --tmin=0 --tmax=1000 --tstep=10</span><br />
<span style="font-size: 14px;">------------------------------------------------------------------------------<br />
Å° benchmark<br />
----------<br />
Speck: Intel(R) CoreTM i7-4770 CPU@3.40 GHz, 15.3 GB<br />
Compiler: OpenMPI + intel compiler(2013) + MKL<br />
mpirun -np 2 /home/wien2k3/vasp/vasp.5.3/vasp<br />
<br />
# fc3 calculation<br />
1 data / 2 days / 2 core<br />
8162 x 2 days = 16324 days = 44.7 years<br />
If you can use 100 core, you finish this calculation in 44.7/(100/2) = ca. 1 years<br />
If you can use 200 core, you finish this calculation in 44.7/(200/2) = ca. 6 months<br />
----------<br />
------------------------------------------------------------------------------</span><br />
&nbsp;