　ここではVASPのセットアップから基本的な計算までを解説する<br />
------------------------------------------------------------------------------<br />
■ Youtube動画（全てクリエイティブコモンにしています）<br />
・VASP: <a href="https://www.youtube.com/playlist?list=PL9r3BfacS1mHIuVsPFReJcJOnPolxWVyx">https://www.youtube.com/playlist?list=PL9r3BfacS1mHIuVsPFReJcJOnPolxWVyx</a>
<div><iframe allow="autoplay; encrypted-media" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/videoseries?list=PL9r3BfacS1mHIuVsPFReJcJOnPolxWVyx" width="560"></iframe></div>
<br />
・インストール方法 (2016年頃に作成)： <a href="https://www.youtube.com/playlist?list=PL9r3BfacS1mFif0-qGV_mTVVqcNIlB9TW">https://www.youtube.com/playlist?list=PL9r3BfacS1mFif0-qGV_mTVVqcNIlB9TW</a><br />
・インストール方法 （2017年頃に作成）： <a href="https://www.youtube.com/playlist?list=PLYoIKHKPkcsEV3GNuBqz87Q3XdQ8qlNS8">https://www.youtube.com/playlist?list=PLYoIKHKPkcsEV3GNuBqz87Q3XdQ8qlNS8</a>

<div><iframe allow="autoplay; encrypted-media" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/videoseries?list=PLYoIKHKPkcsEV3GNuBqz87Q3XdQ8qlNS8&amp;t=0s&amp;index=4" width="560"></iframe></div>
<br />
・再生リスト: <a href="https://www.youtube.com/channel/UCcyHw8UcdB8ppBHYLUAdklw/playlists">https://www.youtube.com/channel/UCcyHw8UcdB8ppBHYLUAdklw/playlists</a><br />
・関連動画: <a href="https://www.youtube.com/channel/UCh922UHWEPD1FqGSp-Cvn7Q/playlists">https://www.youtube.com/channel/UCh922UHWEPD1FqGSp-Cvn7Q/playlists</a><br />
※ VASP 6.0 以降ではXANESの計算が可能になっています(VaspWikiに記載)。動画では準備できていません。申し訳ありません。<br />
------------------------------------------------------------------------------<br />
◆ 入力ファイル作成の参考になるHP&nbsp;<br />
　VASPで第一原理計算（<a href="http://chem.tf.chiba-u.jp/gacb10/memo.files/vasp/vasp.html">http://chem.tf.chiba-u.jp/gacb10/memo.files/vasp/vasp.html</a>）<br />
------------------------------------------------------------------------------<br />
◆ 擬ポテンシャルファイルの名称の意味について<br />
　下記のHPに記載されています。<br />
　<a href="https://cms.mpi.univie.ac.at/vasp/vasp/PAW_potentials.html">https://cms.mpi.univie.ac.at/vasp/vasp/PAW_potentials.html</a>　<br />
　semi-coreは準内殻という意味です。_d や _pv, _sv は準内殻として計算していたd軌道やp軌道、s軌道を、平面波を用いて正確に計算するという意味です。計算の精度が高くなりますが、計算コストは増大します。カットオフを一般的な値の[ECUT=500]で使い続けている人は、_d, _pv, _svの優先順位で用いればよいでしょう。GWと付いたものは、GW近似用の擬ポテンシャルになります。GW近似は半導体や絶縁体で用いられます（主に、ギャップの値が改善する）。<br />
------------------------------------------------------------------------------<br />
◆ VASPが利用可能な大学のスパコン（2018年3月末時点）<br />
・東北大学（計算材料学センター）<br />
　化学系だけでなく、WIEN2k, Abinit, PWscf, OpenMXなども可能で充実している。流石は研究第一主義。<br />
　<a href="http://www.ccms.imr.tohoku.ac.jp/Jpn/user/calculate.php">http://www.ccms.imr.tohoku.ac.jp/Jpn/user/calculate.php</a><br />
　<a href="http://www.ccms.imr.tohoku.ac.jp/Jpn/user/matrix.php">http://www.ccms.imr.tohoku.ac.jp/Jpn/user/matrix.php</a><br />
・東京大学（Supercomputer Center）<br />
　主に開発者の先生のコードが整備されている。<br />
　<a href="http://www.issp.u-tokyo.ac.jp/supercom/visitor/applications">http://www.issp.u-tokyo.ac.jp/supercom/visitor/applications</a><br />
・東京工業大学（TSUBAME）<br />
　Phase, PWscf, OpenMXなども可能。<br />
　<a href="http://www.gsic.titech.ac.jp/sites/default/files/leaflet2016.pdf">http://www.gsic.titech.ac.jp/sites/default/files/leaflet2016.pdf</a><br />
・九州大学（情報基盤研究開発センター）<br />
　化学系と機械学習用の環境が整備されている（流石！）<br />
　<a href="https://www.cc.kyushu-u.ac.jp/scp/software/vasp.html">https://www.cc.kyushu-u.ac.jp/scp/software/vasp.html</a><br />
------------------------------------------------------------------------------<br />
■ VASPとWIEN2kの違い<br />
◇ WIEN2kの利点<br />
・ほぼ最高の計算精度を誇る<br />
・信頼性が高いので、計算結果をほぼ信頼できる<br />
・GUI(w2web)がしっかりしているので入力ファイルからバンド分散までの計算が容易<br />
　Youtube動画：<a href="https://www.youtube.com/watch?v=_2O38qvabZo">https://www.youtube.com/watch?v=_2O38qvabZo</a>, <a href="https://www.youtube.com/watch?v=9Us6c8CUf-E&amp;list=PL9r3BfacS1mFU2Bc5su-fpzridiGqBOlN">https://www.youtube.com/watch?v=9Us6c8CUf-E&amp;list=PL9r3BfacS1mFU2Bc5su-fpzridiGqBOlN</a><br />
<br />
◇ VASPの得意なこと<br />
・擬ポテンシャル法を使っているので、フルポテンシャル法のWIEN2kよりも構造最適化に適している<br />
・フォノン計算に必要なDFPTが最新版には実装されている<br />
・他の方が作ったツールが他に比べて充実している<br />
<br />
◇ VASPでのバンド分散図でのk点の作り方<br />
Youtube: <a href="https://www.youtube.com/watch?v=vJxpNof3MKg">https://www.youtube.com/watch?v=vJxpNof3MKg</a><br />
1. aflow-online: <a href="http://materials.duke.edu/awrapper.html">http://materials.duke.edu/awrapper.html</a><br />
2. SYMMETRY &gt;&nbsp;check &quot;Kpath in the reciprocal space for band structure calculations&quot;<br />
3. copy POSCAR and paste Input POSCAR here:<br />
4. start<br />
-------------------------------------------------------------------------------<br />
■ VASP Workshop<br />
　<a href="http://cms.mpi.univie.ac.at/vasp-workshop/slides/documentation.htm">http://cms.mpi.univie.ac.at/vasp-workshop/slides/documentation.htm</a><br />
■ ICME<br />
　<a href="https://icme.hpc.msstate.edu/mediawiki/images/d/d2/LS14_VASP.pdf">https://icme.hpc.msstate.edu/mediawiki/images/d/d2/LS14_VASP.pdf</a><br />
■ Hands-on Tutorial Workshop 2011<br />
　<a href="http://th.fhi-berlin.mpg.de/th/Meetings/DFT-workshop-Berlin2011/program.php">http://th.fhi-berlin.mpg.de/th/Meetings/DFT-workshop-Berlin2011/program.php</a><br />
■&nbsp;仕事関数の計算&nbsp;<br />
　<a href="http://www.kochi-tech.ac.jp/library/ron/2002/2002ele/1030191.pdf">http://www.kochi-tech.ac.jp/library/ron/2002/2002ele/1030191.pdf</a><br />
■ 注意事項（これまでに体験した異常現象）<br />
　Al: SCFで8 8 8 k点、DOSで 15 15 15 k点にすると、本来あり得ない構造が現れる。DOS 14 14 14 k点にすると正常になる。SCF 15 15 15 k点にしても異常が生じた。<br />
■ 広範囲での非占有準位の計算について<br />
　NBANDS = XX<br />
　XX に一度SCFを走らせてOUTCARで表示されている値よりも大きな値をINCARに入力する。<br />
-------------------------------------------------------------------------------<br />
■ クラスターPCの構築<br />
※ 並列計算のためのクラスターPCを作る場合は下記の2つのHPが参考になります（下記HPの管理者の方々に感謝）。<br />
並列計算機の製作: <a href="http://chem.tf.chiba-u.jp/gacb10/linux/cluster.html">http://chem.tf.chiba-u.jp/gacb10/linux/cluster.html</a><br />
実験化学者が作るPCクラスタ: <a href="http://pccluster.web.fc2.com/">http://pccluster.web.fc2.com/</a><br />
　ここでは実際に2台のPCを用いてクラスターPCを構築してみる（予定でしたが、私が無能な研究者だったので、予算と時間が無くて行動を起こす前に高齢ポスドクで強制退職）。<br />
<br />
CentOS 6.4 x84_64 or Fedora 18 x84_64<br />
(CPU: Intel(R) Core(TM)i7-2700K or Intel(R) Core(TM)i7-3820)<br />
（日本語を選択してOSをインストールして下記の動作を確認）<br />
1. minimal Desktop (CentOS) or Xfce (Fedora) で開発ツールにチェックを入れてインストール<br />
2. download<br />
&nbsp; for WIEN2k<br />
&nbsp; yum install emacs<br />
&nbsp; yum install gnuplot<br />
&nbsp; yum install tcl<br />
&nbsp; yum install tk<br />
&nbsp; yum install perl<br />
&nbsp; for p4vasp<br />
&nbsp; yum install glibc<br />
&nbsp; other good tool<br />
&nbsp; yum install kwrite (Fedora18)<br />
&nbsp; yum install kate<br />
&nbsp; yum instasll gedit (CentOS 6.4)<br />
&nbsp; yum install gnome-system-monitor<br />
3. Adobe Reader<br />
&nbsp; 1) su<br />
&nbsp; 2) password<br />
&nbsp; 3)&nbsp;rpm -ivh http://linuxdownload.adobe.com/adobe-release/adobe-release-i386-1.0-1.noarch.rpm<br />
&nbsp; 4)&nbsp;rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-adobe-linux<br />
&nbsp; 5) yum install nspluginwrapper.i686 AdobeReader_enu<br />
&nbsp; 6) yum list AdobeReader*<br />
<br />
■ Intel(R) Composer XE 2013のインストールと環境設定<br />
□ インストール<br />
1. tar zxvf parallel_studio_xe_2013_update3_intel64.tgz<br />
2. cd&nbsp; parallel_studio_xe_2013_update3_intel64<br />
3. ./install.sh<br />
4. 後は表示される英文に従っていく。<br />
5. ifort -help &gt; ifort_option.txt<br />
6. Please, see ifort_option.txt<br />
□ 環境設定 ( &nbsp;.bashrc in home and root directory )<br />
# Intel Compiler ( Fortran &amp; C++ ) environmental setting<br />
export PATH=$PATH:/opt/intel/vtune_amplifier_xe_2013<br />
export PATH=$PATH:/opt/intel/inspector_xe_2013<br />
source /opt/intel/bin/compilervars.sh intel64<br />
□ fftw3xf_intel.a のコンパイル<br />
0. bash<br />
1. cd /opt/intel/composer_xe_2013/mkl/interfaces/fftw3xf/<br />
2. make libintel64 compiler=intel<br />
<br />
■ OpenMPI<br />
OpenMPIは1.4.5 シリーズのヴァージョンを用いると良いだろう。<br />
・私の場合、Ubuntu12.04 x84.64では上手くインストール出来なかった。<br />
・CentOS 6.4 ではインストールに成功（しかし、p4vaspが上手くインストールできず、WIEN2kのw2webの導入に難がある。minimal Desktop でインストールした）。<br />
□ インストール<br />
1) <a href="http://www.open-mpi.org/">http://www.open-mpi.org/</a><br />
2) tar zxvf openmpi-1.4.5.tar.gz<br />
3) cd openmpi-1.4.5<br />
4) コンパイラにより下記のように設定<br />
&nbsp;&nbsp; Intel Compiler の場合<br />
&nbsp;&nbsp;&nbsp;./configure -prefix=/usr/local/openmpi CXX=icpc CC=icc FC=ifort F90=ifort F77=ifort<br />
5) make<br />
6) su<br />
7) make all install<br />
<br />
□ 環境設定 ( &nbsp;.bashrc in home and root directory )<br />
# OpenMPI environmental setting<br />
export MPIROOT=/usr/local/openmpi<br />
export PATH=$MPIROOT/bin:$PATH<br />
export LD_LIBRARY_PATH=$MPIROOT/lib:$LD_LIBRARY_PATH<br />
export MANPATH=$MPIROOT/share/man:$MANPATH<br />
<br />
FFTW3 for WIEN2k<br />
1) tar zxvf fftw-3.3.3.tar.gz<br />
2) cd fftw-3.3.3<br />
4) export CC=&quot;icc -m64 -O2 -axAVX,SSE4.2,SSE4.1,SSE3,SSSE3,SSE2&quot;<br />
5) export MPICC=&quot;mpicc -m64 -O2 -axAVX,SSE4.2,SSE4.1,SSE3,SSSE3,SSE2&quot;<br />
6) export F77=&quot;ifort -mcmodel=large -O2 -axAVX,SSE4.2,SSE4.1,SSE3,SSSE3,SSE2&quot;<br />
7) ./configure --enable-mpi --enable-threads --enable-openmp<br />
8) make ( in Xfce case, su)<br />
9) su ( in Xfce case, make)<br />
10) make install<br />
<br />
■ makefile の編集<br />
OpenMP+OpenMPIは下記の2つのHPを参考にすると良い。<br />
<a href="http://cms.mpi.univie.ac.at/wiki/index.php/Installing_VASP">http://cms.mpi.univie.ac.at/wiki/index.php/Installing_VASP</a>　<br />
<a href="http://locs.bw.nitech.ac.jp/~kobayashi/fswiki/wiki.cgi?page=VASP%B4%D8%CF%A2">http://locs.bw.nitech.ac.jp/~kobayashi/fswiki/wiki.cgi?page=VASP%B4%D8%CF%A2</a><br />
A. vasp.5.lib のコンパイル<br />
1. tar zxvf vasp.5.lib.tar.gz<br />
2. cd vasp.5.lib<br />
3. cp&nbsp;makefile.linux_ifc_P4 makefile<br />
4.&nbsp;emacs などで makefile を開いて、<br />
&nbsp; ifc を ifort<br />
&nbsp; FC=ifort<br />
&nbsp; にして保存<br />
5. make<br />
<br />
B. vasp.5.2 のコンパイル<br />
1. tar zxvf vasp.5.2.12.tar.gz<br />
2. cd vasp.5.2<br />
3. cp makefile.linux_ifc_P4 makefile<br />
4. emcacs などで makefile を開く<br />
&nbsp; &nbsp;1) ifc&nbsp;を ifort に書き換える<br />
&nbsp; &nbsp;2)&nbsp;FFLAGS = &nbsp;-free -names lowercase -assume byterecl&nbsp;<br />
&nbsp; &nbsp;3) OFLAG=-O2 -ip -ftz&nbsp;-axAVX,SSE4.2,SSE4.1,SSE3,SSSE3,SSE2<br />
&nbsp; &nbsp;4)&nbsp;BLAS= -L/opt/intel/composer_xe_2013/mkl/lib/intel64/em64t \
<div>&nbsp;-lmkl_blas95_lp64 -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core \</div>

<div>&nbsp;-liomp5 -lpthread -lm</div>
&nbsp; &nbsp;5)&nbsp;LAPACK= -L/opt/intel/composer_xe_2013/mkl/lib/intel64/em64t \

<div>&nbsp;-lmkl_lapack95_lp64 -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core \</div>

<div>&nbsp;-liomp5 -lpthread -lm</div>
&nbsp; &nbsp;6)&nbsp;FFT3D= fftw3d.o fftw3dlib.o \

<div>&nbsp;/opt/intel/composer_xe_2013/mkl/interfaces/fftw3xf/libfftw3xf_intel.a</div>
&nbsp; # fortran&nbsp;linker&nbsp;for mpi 以降<br />
&nbsp; &nbsp;7)&nbsp;FC= mpif90 -openmp<br />
&nbsp; &nbsp;8) FCL= $(FC) -mkl<br />
&nbsp; &nbsp;9) CPP&nbsp;&nbsp;&nbsp; = $(CPP_) -DMPI&nbsp; -DHOST=\&quot;LinuxIFC\&quot; -DIFC \<br />
&nbsp;&nbsp;&nbsp;&nbsp; -DCACHE_SIZE=4000 -DPGF90 -Davoidalloc -DNGZhalf \<br />
&nbsp;&nbsp;&nbsp;&nbsp; -DMPI_BLOCK=8000 -DPROFILING<br />
#&nbsp;&nbsp;&nbsp; -DRPROMU_DGEMV&nbsp; -DRACCMU_DGEMV<br />
&nbsp; &nbsp;10)&nbsp;SCA= /opt/intel/composer_xe_2013/mkl/lib/intel64/libmkl_scalapack_lp64.a \
<div>&nbsp;/opt/intel/composer_xe_2013/mkl/lib/intel64/libmkl_blacs_openmpi_lp64.a</div>
&nbsp; &nbsp;11) LIB= -L../vasp.5.lib -ldmy&nbsp; \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ../vasp.5.lib/linpack_double.o $(LAPACK) \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(SCA) $(BLAS)<br />
&nbsp; &nbsp;12)&nbsp;FFT3D= fftmpiw.o fftmpi_map.o fftw3d.o fft3dlib.o \
<div>&nbsp;/opt/intel/composer_xe_2013/mkl/interfaces/fftw3xf/libfftw3xf_intel.a</div>

<p>5. make<br />
※ link option: Please, see<br />
/opt/intel/composer_xe_2013/Documentation/ja_JP/mkl/mkl_link_line_advisor.htm<br />
or&nbsp;<br />
file:///opt/intel/composer_xe_2013/Documentation/ja_JP/mkl/mkl_userguide/index.htm#GUID-F6E3AD73-ED3F-499E-A125-9570533F7B53.htm<br />
※&nbsp;-axCORE-AVX-I,CORE-AVX2,AVX,SSE4.2,SSE4.1,SSE3,SSSE3,SSE2&nbsp;は自動で、そのCPUに最適なSSE命令の設定を行ってくれるオプションの指定方法。SSE:&nbsp;<a href="http://sourceforge.jp/magazine/09/09/07/0257257">http://sourceforge.jp/magazine/09/09/07/0257257</a>, AVX:&nbsp;http://www.isus.jp/article/compileroptimization/avx_part1/&nbsp;などに説明がある。<br />
-------------------------------------------------------------------------------<br />
■ 入力ファイル<br />
A. 必要な4つの入力ファイル （Input filesでの[1-6]を参照すると良い)<br />
以下の4つのファイルが必要になる。<br />
・ INCAR<br />
・ POSCAR<br />
・ POTCAR<br />
・ KPOINTS<br />
※ 色々とパラメータを変えたが、cif2cellが作るもので充分である。また、構造最適化の場合は、マニュアルにある数値にして、他の部分はディフォルトの値を用いればよい（色々と検証したが同じ結果になる。時間の無駄だった。変な結果が出力された場合にパラメーターやDavidson後にRMM-DIISをCGに変えても同じ結果が出た）。<br />
B. INCAR<br />
&nbsp; ・ 入力に必要なtagは下記のVASP manual を参照すればよい（ENCUTはディフォルトのままでよい。Fe系の物質では、ENCUTが600以上では800と変わらない。ENCUTを増やすと格子定数は少しずつ変化していくが、置換する原子の量を変えた場合の格子定数の変化の傾向は変わらない）。<br />
&nbsp; <a href="http://cms.mpi.univie.ac.at/vasp/vasp.pdf">http://cms.mpi.univie.ac.at/vasp/vasp.pdf</a>　<br />
&nbsp; tag の部分を読む。必要ならば Ctrl + F でXXX-tag として検索（XXXはtagの名称）。Default: の次の行はtagが記述されなかった場合のディフォルトの値。vasp5ではECUTやGGAなどもPOTCARから自動で読まれる。どのようなtagの値になっているかはOUTCARで確認できる。<br />
&nbsp; ※ RMM-DIIS（Residual Minimization Method-Direct Inversion in the Iterative Subspace）法は、系のサイズが大きくなると相対的な負担が大きくなる波動関数の直交化および部分空間での行列Aijの対角化を原理的には省略可能となるため、効率的な計算方法となる。（省略）RMM-DIIS法は、原理的には波動関数の直交化および部分空間での行列Aijの対角化を行わずとも、試行関数を最適化していくことにより残差ベクトルがゼロの真の固有ベクトルに収束していくはずであり、大きな系に対して計算量をかなり減らすことが可能である。しかしながら、試行関数は最も近い固有ベクトルに収束してく性質があり、初期に用意する試行関数は真の固有ベクトルに近い状態である必要がある。そのため、RMM-DIIS法を自己無撞着計算の最初から適応するとうまく収束せず、初期の計算はダビッドソン法を用いる必要がある。[RMM1]<br />
[RMM1] 笠井秀明ら著、計算機マテリアルデザイン入門、大阪大学出版会<br />
&nbsp; NBANDS = NELECT/2 + NIONS/2 (non-spinpolarized), 0.6*NELECT + NMAG (spin-polarized)<br />
<a href="http://cms.mpi.univie.ac.at/vasp/vasp/NBANDS_tag.html">http://cms.mpi.univie.ac.at/vasp/vasp/NBANDS_tag.html</a><br />
C. POSCAR<br />
&nbsp; ・ cif2cell が作るものそのままで良い。<br />
&nbsp; ・ MDでの構造最適化を行う場合に、動かしたい原子に対して、T T Tを記述する（Tは動かす。Fは動かさない）。例えば下記のようになる（Directの次の行から座標と緩和の有無が記述される）。<br />
Selective dynamics<br />
Cartesian<br />
&nbsp; 0.5000 0.5000 0.5000 T T T<br />
もし、Selective dynamics がなければ、T T T の記述が無視されて、全て T になる。If the line &rsquo;Selective dynamics&rsquo; is removed from the file POSCAR these flag will be ignored (and internally set to .T.).<br />
D. POTCAR<br />
&nbsp; ・ cif2cell が作るものそのままで良い。<br />
&nbsp; ・ もし、複数のポテンシャルを入力する場合は、End of Datasetの直ぐ次の行にポテンシャルを記述する。<br />
&nbsp; ・ ポテンシャルを記述する順番は、POSCARファイルと同じ順番にする（cif2cellは自動で対応したファイルを作成してくれる）。<br />
E. KPOINTS<br />
&nbsp; ・ cif2cell が作るメッシュ数のままでよい。GammaではなくMにすると計算が速かった感じがする。<br />
例えば下記のようになる。<br />
Generated by cif2cell 1.2.2. k-space resolution ~0.2/A<br />
&nbsp;0<br />
M<br />
4&nbsp;4 4<br />
0 0 0<br />
※ DOS計算のときに下記のようにしたら32GBでもメモリ不足でRMM計算数回目でストップした。<br />
Gamma<br />
6&nbsp;6 6<br />
0 0 0<br />
G. KPOINTS (band structure case)<br />
comment line<br />
10 5 ! 10, then, 5 intersections<br />
L ! Line-mode<br />
r ! Reciprocal<br />
0 0 0 ! Gamma<br />
0 0 1 ! X<br />
<br />
0 0 1 ! X<br />
0.5 0 1 ! W<br />
<a href="http://cms.mpi.univie.ac.at/vasp/vasp/Strings_k_points_bandstructure_calculations.html">http://cms.mpi.univie.ac.at/vasp/vasp/Strings_k_points_bandstructure_calculations.html</a>　<br />
<br />
■ 実行方法<br />
Core i7-2700Kの場合（もっとも計算速度が速い指定）: mpirun -np 4 vasp<br />
<a href="http://cms.mpi.univie.ac.at/wiki/index.php/Hybrid_openMPI/openMP_parallelization">http://cms.mpi.univie.ac.at/wiki/index.php/Hybrid_openMPI/openMP_parallelization</a>　<br />
<br />
■&nbsp;Speed Check<br />
export OMP_NUM_THREADS=1<br />
mpirun -np 4 vasp<br />
grep LOOP+ OUTCAR<br />
Intel Core i7-2700K: Ge, (-np 4) 12.13 s / Ge, (single) 31.95 s<br />
Intel Core i7-3770&nbsp; : Ge, (-np 4) 11.55 s / Ge, (single) 31.75 s<br />
Intel Core i7-3820 &nbsp;: Ge, (-np 4) 11.28 s / Ge, (single) 31.33 s<br />
<br />
■ Warning, error, unit<br />
・ small aliasing (wrap around) errors must be expected でなくしたい場合は、 PREC=accurate へ<br />
<br />
■ 出力ファイル<br />
A. CHG： 格子定数、原子座標、FFTグリッド上での電荷密度&times;体積の出力データ。省力化のために、CHGCARよりもCHGは記述されている桁数が少ない。PAWでのone-center occupancies の記述もない。可視化にはCHGを用いるとよい。<br />
B. CHGCAR： PAWと記述されている桁数が多いことを除いて、CHGとほぼ同じである。再計算のときにはこのファイルが用いられる。Fortran プログラムでは下記のようにしている。<br />
　　WRITE(IU,FORM) (((C(NX,NY,NZ),NX=1,NGXC),NY=1,NGYZ),NZ=1,NGZC)<br />
　スピンを入れた場合、電荷密度は最初にup+downのデータ、次にup - downのデータが出力される。<br />
C. CONTCAR： 計算後の結晶構造が記述される。POSCARの記述と同じ。構造最適化で十分に収束せずに終了した場合は、構造最適化を続ける前に、CONTCARをPOSCARにコピーする（コマンド: cp CONTCAR POSCAR )。MDではない場合は下記のデータが順に記述されている。<br />
　コメント、格子配置、原子種の数、フラグ、原子位置<br />
D. DOSCAR： DOSとintegrated DOS（IDOS）の出力（動力学シミュレーションと構造緩和では平均のDOSと平均のIDOSが出力される）。単位は[Number of States / unit cell]である。データは下記のように出力される。IDOSはDOSを微分したものである。<br />
　energy&nbsp;&nbsp;&nbsp;&nbsp; DOS&nbsp;&nbsp;&nbsp;&nbsp; integrated DOS　（non-spinの場合）<br />
　energy&nbsp;&nbsp;&nbsp;&nbsp; DOS(up) DOS(down)&nbsp; integrated DOS(up) integrated DOS(down)&nbsp; (spinを入れた場合)<br />
&quot;LORBIT 11&quot;をINCARに記述した場合、下記のように出力される。単位は[State/energy. atom]<br />
　energy s-DOS p-DOS d-DOS　（non-spinの場合）<br />
　energy s-DOS(up) s-DOS(down) p-DOS(up) p-DOS(down) d-DOS(up) d-DOS(down)&nbsp; (spinを入れた場合)<br />
&quot;LORBIT 2&quot;とINCARに記述した場合、下記のように&quot;spherical harmonics&quot;（つまり、x, y, zの方位も考慮した結果）が出力される。<br />
&nbsp; energy s-DOS(total) s-DOS(mx) s-DOS(my) s-DOS(mz) p-DOS(total) p-DOS(mx) ...<br />
※ CAR の次の行（＝5行目）は System の名称。更に次の行（＝6行目）は、EMIN EMAX NEDOS EF 不明 が記述されている。<br />
※ E<sub>F</sub>を基準にしたエネルギー = 最初の列 - E<sub>F</sub> となる（E<sub>F</sub>は6行目の左から4つ目に記載されている）。<br />
※ DOSCARの記述： <a href="http://www.aki.che.tohoku.ac.jp/~taiko/vasp.html">http://www.aki.che.tohoku.ac.jp/~taiko/vasp.html</a><br />
E. EIGENVAL： MDの場合を除き、各k点でのKohn-Sham方程式での固有値が記述される。<br />
　1行目： 原子の数、原子の数、ループの数、ISPIN(1:non-spin, 2: spin)<br />
　2行目： 体積（&Aring;^3）、格子パラメーター(m 単位）、不明<br />
　3行目： T<br />
　4行目： CARという記述<br />
　5行目： ヘッダー<br />
　6行目： 電子数、k点数、バンド数<br />
　7行目： k点とその重み<br />
&nbsp; Reference: <a href="http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.1093">http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.1093</a><br />
　VASPはディフォルトの単位として eV と &Aring;であると上記に書かれている。<br />
　エネルギーの出力を変えたい場合は、main.F の 8852 のフォーマット文を書き換える。<br />
F. IBZKPT： 計算に使われたk点の詳細が記載されている。[ cp IBZKPT KPOINT] でも計算が可能。<br />
G. OUTCAR：<br />
　エネルギーの出力を変えたい場合は、subroutine WRITE_EIGENVALでの electron.F の 2201 のフォーマット文を書き換える。<br />
　Reference: <a href="http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.14676">http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.14676</a><br />
H. OSZICAR： 収束スピードと現在のステップに関する情報が記述される。<br />
　Nは電子でのステップ数、Eは現在の自由エネルギー、dEは最新と現在の自由エネルギー差、などが記載される。<br />
　<a href="https://www.vasp.at/vasp-workshop/slides/handsonI.pdf">https://www.vasp.at/vasp-workshop/slides/handsonI.pdf</a> が詳しい。<br />
I. PCDAT：the pair correlation function が記述されている。<br />
J. WAVECAR： バイナリーデータ。下記のデータが格納されている。<br />
　NBAND（バンド数）, ENCUTI（カットオフ）, AX(基本ベクトル), CELEN（固有値）, FERWE(Fermi-weights), CPTWFP(平面波)<br />
K. XDATCAR： NBLOCK ionic steps の後、イオン配置がこのファイルに記述される。<br />
References<br />
<a href="http://www.aki.che.tohoku.ac.jp/~taiko/vasp.html">http://www.aki.che.tohoku.ac.jp/~taiko/vasp.html</a><br />
<a href="http://cms.mpi.univie.ac.at/vasp/vasp/Contents.html">http://cms.mpi.univie.ac.at/vasp/vasp/Contents.html</a><br />
<a href="http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/page03.html">http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/page03.html</a><br />
-------------------------------------------------------------------------------<br />
■ SCF計算（構造最適化）<br />
INCAR<br />
ALGO = Fast (Fastは最初の段階でDavidson法を用い、続いて RMM-DIIS法が用いられる。ionic stepではDavidson法が用いられる。ちなみに、Normalは38と同じでDavidson法で計算する。48とVeryFastはRMM-DIIS法である。GWやRPA計算では厳密な対角化手法を指定するExact や Diag や 90を用いる）<br />
EDIFF = 0.0001 (エネルギーでの収束条件で、ディフォルト値は10^-4。左記の値でよければ記述しなくてもよい）<br />
ENCUT = 520 （カットオフエネルギー。左記は40 Ryの値。記述しないとPOTCARに書かれている最大の値が用いられる）<br />
IBRION = 2 (CG法＝共役勾配法による原子位置の最適化。※ ALGOの記述が優先されるようである）<br />
ICHARG = 1 （電子密度分布のファイル CHGCARがあればそれを読み込んで計算）<br />
ISIF = 3 （原子位置とユニットセルの形状を最適化）<br />
ISMEAR = -5 （k空間での積分にテトラヘドロン法を用いる）<br />
SIGMA = 0.2<br />
ISPIN = 2 （スピンを考慮にいれる）<br />
LORBIT = 11 （出力ファイルにDOSCARとPROCARを追加）<br />
LREAL = Auto<br />
LWAVE = False （Falseにすると波動関数のファイル WAVECARを出力しない。LDOSでは.TRUE.にしておく）<br />
MAGMON = X*Y Z （計算開始時でのスピンモーメント。X, Y, Z に数値が入る）<br />
NELM = 200 （SCFサイクルの上限を設定。ここでは200にしている）<br />
NPAR= 1 （並列計算で用いる。&radic;(コアの数)）<br />
NSW = 99 （原子｛格子｝パラメーターの最適化回数の上限の設定）<br />
PREC = Accurate （計算精度の設定。この他にNormalもあるがAccurateで良いと思う）<br />
ISTART = 1 （1だと波動関数のファイル WAVECARがあると読み込んで計算。ディフォルトは1）<br />
<br />
■ LDA+U<br />
◇ INCAR&nbsp;[LDAU1]<br />
LDAU = .TRUE.&nbsp;(LDA+Uの計算をONにする）<br />
LDAUTYPE = 1 (Liechtenstein らのタイプを用いる。ディフォルトは2)<br />
LDAUL = 1 2 1 (Uを入れる軌道 l の値。-1はUとJを導入しない。POTCARで記述した原子の順番に記述。ここでは最初の原子種のp軌道へ、二番目の原子種のd軌道へ、三番目の原子種のp軌道へUとJを入れる）<br />
LDAUU = 0.00 4.896 2.850 (Uパラメーター）<br />
LDAUJ = 0.0 0.0 0.0 (Jパラメーター）<br />
LDAUPRINT = 0 （結果の出力、ディフォルトは0）<br />
LMAXMIX = 4 (d軌道がある場合 4, f軌道がある場合 6)<br />
<br />
◇ INCAR [LDAU2]<br />
LDAU = .TRUE. (LDA+Uの計算をONにする）<br />
LDAUTYPE = 2&nbsp;(Dudarev らのタイプを用いる。ディフォルトは2)<br />
LDAUL = 2 -1 (Uを入れる軌道 l の値。-1はUとJを導入しない。POTCARで記述した原子の順番に記述。ここでは最初の原子種にd軌道を入れる）<br />
LDAUU = 8 00 0.00 (Uパラメーター）<br />
LDAUJ = 0.95 0.00 (Jパラメーター）<br />
LDAUPRINT = 2 (occupancy matrix が OUTCARに、potential matrix が標準出力に出力される)<br />
<br />
◇ 短縮した記述（調査中）&nbsp;[LDAU1]<br />
LDAUL = 4*1 4*2 4*1<br />
LDAUU = 4*0.00 4*4.896 4*2.850<br />
LDAUJ = 4*0.0 4*0.0 4*0.0<br />
[LDAU1] <a href="http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.10766">http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.10766</a><br />
[LDAU2] <a href="http://www.vasp.at/vasp-workshop/slides/handsonIV.pdf">http://www.vasp.at/vasp-workshop/slides/handsonIV.pdf</a><br />
[LDAU3] <a href="http://cms.mpi.univie.ac.at/vasp/vasp/On_site_Coulomb_interaction_L_S_DA_U.html">http://cms.mpi.univie.ac.at/vasp/vasp/On_site_Coulomb_interaction_L_S_DA_U.html</a><br />
<br />
■ Specific hybrid functionals [SHF1]<br />
　幾つかの交換相関ポテンシャルを混ぜ合わせて新しい交換相関ポテンシャルを作っている。HSEは距離に関連するパラメーターが入る。バンドギャップがある系ではHSE06が用いられやすい。<br />
◇ INCAR (PBE0)<br />
LHFCALC = .TRUE.<br />
GGA = PE<br />
◇ INCAR (HSE03)<br />
LHFCALC&nbsp; = .TRUE.<br />
HFSCREEN = 0.3<br />
GGA = PE<br />
◇ INCAR (HSE06)<br />
LHFCALC&nbsp; = .TRUE.<br />
HFSCREEN = 0.2<br />
GGA = PE<br />
◇ INCAR (B3LYP)<br />
LHFCALC = .TRUE.<br />
GGA&nbsp;&nbsp;&nbsp;&nbsp; = B3<br />
AEXX&nbsp;&nbsp;&nbsp; = 0.2<br />
AGGAX&nbsp;&nbsp; = 0.72<br />
AGGAC&nbsp;&nbsp; = 0.81<br />
ALDAC&nbsp;&nbsp; = 0.19<br />
◇ INCAR(HF)<br />
LHFCALC = .TRUE.<br />
AEXX&nbsp;&nbsp;&nbsp; = 1.0<br />
ALDAC&nbsp;&nbsp; = 0.0<br />
AGGAC&nbsp;&nbsp; = 0.0<br />
[SHF1] <a href="http://cms.mpi.univie.ac.at/wiki/index.php/Specific_hybrid_functionals">http://cms.mpi.univie.ac.at/wiki/index.php/Specific_hybrid_functionals</a><br />
<br />
■ GW計算<br />
<a href="http://cms.mpi.univie.ac.at/wiki/index.php/GW_calculations">http://cms.mpi.univie.ac.at/wiki/index.php/GW_calculations</a><br />
<br />
■&nbsp;スピン軌道相互作用（SOC）を考慮した計算<br />
# LNONCOLLINEAR = .TRUE. （LSORBIT= .TRUE. だと自動的に設定か？）<br />
MAGMOM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 0 0 1<br />
VOSKOWN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 1 (相関項の内挿でVosko, Wilk, Nusairに従う式を用いる。通常、この方法は磁気モーメントと磁気エネルギーを増大させる。PW91にこのtagは用いられ、PBEやPBEsolでは必要ない)<br />
LSORBIT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = .TRUE. (PAWでのみ動作する)<br />
LMAXMIX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 4<br />
<a href="http://cms.mpi.univie.ac.at/wiki/index.php/Spin-orbit_coupling_in_a_Fe_monolayer">http://cms.mpi.univie.ac.at/wiki/index.php/Spin-orbit_coupling_in_a_Fe_monolayer</a><br />
<br />
■ 電荷密度分布（調査中）<br />
LPARD = .TRUE.<br />
EINT -0.1 0.1<br />
NBMOD = -2 (-2:部分電荷密度分布、-1: 全電荷密度分布)<br />
<a href="https://www.uni-due.de/~hp0058/?file=manual03.html&amp;dir=vmdplugins">https://www.uni-due.de/~hp0058/?file=manual03.html&amp;dir=vmdplugins</a><br />
<a href="http://cms.mpi.univie.ac.at/vasp/vasp/Band_decomposed_chargedensity_parameters.html">http://cms.mpi.univie.ac.at/vasp/vasp/Band_decomposed_chargedensity_parameters.html</a><br />
<a href="http://vaspnotes.blogspot.jp/2013/10/charge-density-difference-plots.html">http://vaspnotes.blogspot.jp/2013/10/charge-density-difference-plots.html</a><br />
<br />
■ Partial DOS計算（調査中）<br />
ISMEAR = -5 または 0 ( -5: テトラヘドロン法、0: ガウシアン）<br />
NSW = 0<br />
IBRION = -1<br />
ICHARG = 11<br />
LORBIT = 10 または 11 (Partial DOSの計算。10ではPAW球の内側のsやp, d軌道が出力される。11ではsやp, d軌道のm｛磁気量子数｝が出力される。）<br />
※ エネルギー刻みを指定したい場合は下記のようにする。<br />
EMIN = -10.0<br />
EMAX = 17.0<br />
NEDOS = 1001<br />
※ drawdos のコマンドで視覚化できる。<br />
※ この計算の前のSCFでは、小さな単位胞では 16x16x16, 大きな単位胞では6x6x6 や 8x8x8、さらに大きな単位胞では 1 か 2 点で計算する。<br />
<a href="http://cms.mpi.univie.ac.at/vasp/guide/node176.html">http://cms.mpi.univie.ac.at/vasp/guide/node176.html</a><br />
<a href="http://users.ugent.be/~devpouck/dlstuff/VASP_tutorial20_09_2013.pdf">http://users.ugent.be/~devpouck/dlstuff/VASP_tutorial20_09_2013.pdf</a><br />
<a href="http://theory.cm.utexas.edu/vasp/dos/">http://theory.cm.utexas.edu/vasp/dos/</a><br />
<a href="http://cms.mpi.univie.ac.at/vasp/vasp/EMIN_EMAX_NEDOS_tag.html">http://cms.mpi.univie.ac.at/vasp/vasp/EMIN_EMAX_NEDOS_tag.html</a><br />
VASP TST Tools: <a href="http://theory.cm.utexas.edu/vtsttools/scripts/#DOS">http://theory.cm.utexas.edu/vtsttools/scripts/#DOS</a><br />
vasptools: <a href="http://gvallver.perso.univ-pau.fr/vasptools/script.html">http://gvallver.perso.univ-pau.fr/vasptools/script.html</a><br />
p4vasp: <a href="http://www.p4vasp.at/">http://www.p4vasp.at/</a><br />
VASPKIT: <a href="http://vaspkit.sourceforge.net/">http://vaspkit.sourceforge.net/</a><br />
<br />
■ VASPKIT<br />
1. download: <a href="http://vaspkit.sourceforge.net/">http://vaspkit.sourceforge.net/</a><br />
2. tar zxvf vaspkit.0.21.tar.gz<br />
3. cd vaspkit*/src<br />
&nbsp; ifort case: FC=gfortran -&gt; FC=ifort<br />
4. make<br />
<br />
■ boltztrap<br />
・python<br />
1. yum install python (for CentOS) or sudo apt-get install python (Ubuntu)<br />
・spglib-1.6.0<br />
1.&nbsp; download: <a href="http://spglib.sourceforge.net/">http://spglib.sourceforge.net/</a><br />
2. tar zxvf spglib*<br />
3. cd spg*<br />
4. ./confiugre<br />
5. make<br />
6. su<br />
7. input password<br />
8. make install<br />
(http://spglib.sourceforge.net/pyspglibForASE/)<br />
9. cd python/ase<br />
10. python setup.py install --home=.<br />
11. .bashrc<br />
&nbsp; export PYTHONPATH=&quot;&quot;<br />
&nbsp; PYTHONPATH=&quot;$PYTHONPATH:$HOME/spglib-1.6.0/python/ase/lib64/python&quot;<br />
・ASE (https://wiki.fysik.dtu.dk/ase/,&nbsp;https://wiki.fysik.dtu.dk/ase/download.html )<br />
1. su<br />
2. input password<br />
3. copy at &quot;Installation with package manager on Linux&quot; to terminal or consol.<br />
・case.py<br />
1. make new *.py file<br />
------------------<br />
#! /usr/bin/python<br />
from ase import io<br />
from ase.lattice.spacegroup import Spacegroup<br />
import vasp2boltz<br />
ao = io.read(&#39;POSCAR&#39;)<br />
sg = Spacegroup(1)<br />
ao.info = {&#39;spacegroup&#39;: sg, &#39;unit_cell&#39;: &#39;conventional&#39;}<br />
bs = vasp2boltz.get_vasp_bandstructure()<br />
vasp2boltz.write_bandstructure_boltztrap(bs)<br />
vasp2boltz.write_structure_boltztrap(ao)<br />
vasp2boltz.write_intrans_boltztrap()<br />
------------------<br />
2. put case.py, vasp2botz.py to files<br />
3. case.py<br />
4. spglib calculation case show &quot;get_kspace_operations(): atoms object has no space group information&quot;<br />
・boltztrap<br />
1. mv energies.boltztrap case.energy<br />
2. mv hte.intrans case.intrans<br />
3. mv hte.struct case.struct<br />
4. x_trans BoltzTraP<br />
<a href="http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.9660">http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.9660</a>&nbsp;<br />
<a href="http://www.phonon.t.u-tokyo.ac.jp/resource/yamamoto_b2012.pdf">http://www.phonon.t.u-tokyo.ac.jp/resource/yamamoto_b2012.pdf</a><br />
<br />
■ バンド分散<br />
ICHARGE = 11 （電子密度分布のファイル CHGCARを読み込んで計算する。しかし、電子状態は変化させない）<br />
ISMEAR = 0<br />
ENCUT = 520<br />
PREC = accurate<br />
ISPIN = 2 （スピンがある場合 2にする。スピンを入れない場合は 1）<br />
NSW = 0 （原子位置を動かさない）<br />
IBRION = -1 （原子位置を動かさない）<br />
LPLANE = .TRUE.<br />
LSCALU = .TRUE.<br />
LWAVE = . TRUE. ! Write the WAVECAR file<br />
NELMIN = 0<br />
LCHARG = .FALSE.&nbsp; ! Do not write CHGCAR<br />
※ K点はAFLOWのHPを用いて作成すればよい。<br />
<a href="https://github.com/compphys/band_unfolding">https://github.com/compphys/band_unfolding</a><br />
<br />
■ バンド分散<br />
A. SCF calculation<br />
&nbsp; http://cms.mpi.univie.ac.at/wiki/index.php/Si_bandstructure<br />
B. band dispersion calculation<br />
&nbsp; http://cms.mpi.univie.ac.at/wiki/index.php/Si_bandstructure<br />
C. vaspkit.*/src/vaspkit (21: Band Structure)<br />
&nbsp;=============== MISC options ========================&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;0: Quit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
&nbsp;------------&gt;&gt;<br />
&nbsp; 21<br />
&nbsp;================= Spin options ======================<br />
&nbsp;1: No Spin-polarized calculation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
&nbsp;2: Spin-polarized calculation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;-------------&gt;&gt;<br />
&nbsp; 2<br />
&nbsp;Enter the range of energy to plot:<br />
&nbsp;-------------&gt;&gt;<br />
&nbsp; -15 10<br />
D. vaspkit.*/src/vaspkit (22: Projected Band Structure&nbsp; )<br />
&nbsp;=============== MISC options ========================&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;0: Quit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
&nbsp;------------&gt;&gt;<br />
22<br />
&nbsp;================= Spin options ======================<br />
&nbsp;1: No Spin-polarized calculation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
&nbsp;2: Spin-polarized calculation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;-------------&gt;&gt;<br />
2<br />
&nbsp;Enter the range of energy to plot:<br />
-15 10<br />
&nbsp;Which atom you want in your projection band<br />
1<br />
&nbsp;Which orbital you want s,p,d,total&nbsp; 1/2/3/4&nbsp;<br />
3<br />
&nbsp;Enter the scaling factor in your projection band<br />
1<br />
&nbsp;Write pdand.dat and kpath.dat files successfully!<br />
http://vaspkit.sourceforge.net/<br />
<br />
■ バンド分散（スーパーセルでの場合）<br />
◇ Band unfolding code for Plane-wave based calculations<br />
python 2.6 case<br />
1. easy_install argparse<br />
install<br />
1. Download ZIP<br />
2. unzip band_unfolding-master.zip<br />
3. cd band_unfolding-master<br />
4. ./build.sh<br />
test<br />
1. cd tutorial<br />
2. cd example_2_bulk_Si<br />
3. cd step_1*<br />
4. rewrite vasp = vasp path in *.sh<br />
5. rewrite mpirun&nbsp; -np 4 $vasp&nbsp; &gt; vasp.out in *.sh (4 core case)<br />
6. export OMP_NUM_THREADS=1<br />
7. job.sh<br />
8. cd ..<br />
9. cd step_2*<br />
10 rewrite bandup_folder=&quot;${HOME}/band_unfolding-master&quot; in *.sh<br />
11. *.sh<br />
12. cd ..<br />
13. cd step_3*<br />
14. rewrite vasp = vasp path in *.sh<br />
15. rewrite mpirun&nbsp; -np 4 $vasp&nbsp; &gt; vasp.out in *.sh (4 core case)<br />
16. *.sh<br />
17. cd ..<br />
18. step_4*<br />
19. rewrite export OMP_NUM_THREADS=4<br />
20. rewrite bandup_folder=&quot;${HOME}/band_unfolding-master&quot; in *.sh<br />
21. *.sh<br />
use<br />
1. Super Cell (SC)でSCF計算をして、電荷密度分布のファイル CHGCARを得る<br />
2. Super Cell (SC)での k点を得る<br />
3.&nbsp;Super Cell (SC)での波動関数のデータを得る<br />
4. BandUP プログラムを計算させる<br />
※ スーパーセルにする前の単位胞におけるBZでは、スーパーセルにすることによる折り返しの影響が出てしまう。それを回避する手法。<br />
<a href="http://www.ifm.liu.se/theomod/compphys/band-unfolding/">http://www.ifm.liu.se/theomod/compphys/band-unfolding/</a><br />
GNU General Public License: <a href="https://github.com/compphys/band_unfolding">https://github.com/compphys/band_unfolding</a><br />
other case<br />
1. cp example_2_bulk_Si example_2_bulk<br />
2. cd example_2_bulk<br />
----step 1<br />
3. cd step_1_get_converged_CHGCAR<br />
4. rewrite job.sh<br />
&nbsp; cp $vasp_files/POSCAR_Si_SC POSCAR -&gt; cp $vasp_files/POSCAR_SC POSCAR<br />
5. input your making supercell type POTCAR, KPOINTS and POSCAR to vasp_input_to_get_CHGCAR<br />
6. mv POSCAR POSCAR_SC<br />
7. job.sh<br />
----step 2<br />
8. cd ..<br />
9. cd step_2_get_kpts_to_be_used_in_the_SC_band_struc_calcs<br />
10. rewrite get_kpts_to_be_unfolded.sh<br />
&nbsp;&nbsp;&nbsp; for direc in &quot;L-G_G-X_X-U_K-G&quot; -&gt; for direc in &quot;new_kpoint_Line-mode&quot;<br />
11. input your making primitive cell type KPOINTS (band structure, Line-mode) to input_files<br />
12. mv KPOINTS KPOINTS_prim_cell_new_kpoint_Line-mode.in<br />
&nbsp; Then, rewrite a lattice constant of primitive cell at first line which is memo and not important.&nbsp;<br />
13. input your making primitive cell type POTCAR<br />
&nbsp; Then, mv POTCAR prim_cell_lattice.in<br />
　The lattice vectors and lattice constants in &quot;prim_cell_lattice.in&quot; need to&nbsp;be almost&nbsp;equatl to half of&nbsp;that ofthe SC, which are related the extent of delta_N.<br />
14. input your making supercell type POTCAR<br />
&nbsp; Then, mv POTCAR supercell_lattice.in<br />
15. get_kpts_to_be_unfolded.sh<br />
----step 3<br />
16. cd ..<br />
17. cd step_3_get_SC_wavefunctions_to_be_used_for_unfolding<br />
18. rewrite job_for_band_unfolding.sh<br />
&nbsp;&nbsp;&nbsp; for direc in &quot;L-G_G-X_X-U_K-G&quot; -&gt; for direc in &quot;new_kpoint_Line-mode&quot;<br />
19. cd vasp_input_files<br />
20. rewrite INCAR<br />
&nbsp; NBANDS = 48 -&gt;&nbsp;&nbsp;&nbsp; ! NBANDS =　48<br />
21. input your making supercell type POTCAR to vasp_input_files<br />
22. cd ..<br />
23. job_for_band_unfolding.sh<br />
----step4<br />
24. cd ..<br />
25. cd step_4_run_BandUP_and_plot<br />
26. In run_BandUP_and_plot.sh, replace&nbsp; &quot;L-G_G-X_X-U_K-G&quot; to&nbsp;&quot;new_kpoint_Line-mode&quot;<br />
&nbsp; for dir in &quot;L-G_G-X_X-U_K-G&quot; -&gt; for dir in &quot;new_kpoint_Line-mode&quot;<br />
&nbsp; &quot;L_G_G_X_X_U_K_G&quot; -&gt; &quot;new_kpoint_Line-mode&quot;<br />
27. run_BandUP_and_plot.sh<br />
<br />
■ unfolding<br />
0. download: <a href="https://itp.uni-frankfurt.de/~tomic/unfolding/">https://itp.uni-frankfurt.de/~tomic/unfolding/</a>　<br />
1. LORBIT = 12 in INCAR<br />
2. SCF calculation for N x N x N supercell<br />
3. bandstructure calculation<br />
&nbsp; in INCAR<br />
&nbsp; ICHARG = 11<br />
&nbsp; LCHARG = F<br />
4. vasp_unfold --tgen 1/N,0,0 --tgen 0,1/N,0 --tgen 0,0,1/N POSCAR PROCAR<br />
&nbsp;or vasp_unfold --tgen 1/N,0,0 --tgen 0,1/N,0 --tgen 0,0,1/N --eps 0.0035 POSCAR PROCAR<br />
&nbsp;or vasp_unfold --tgen 1/N,0,0 --tgen 0,1/N,0 --tgen 0,0,1/N POSCAR(initial) PROCAR<br />
<a href="https://itp.uni-frankfurt.de/~tomic/unfolding/">https://itp.uni-frankfurt.de/~tomic/unfolding/</a><br />
<br />
■ graphic<br />
1. gnuplot<br />
2. set pm3d<br />
3. splot unfold_EBS_symmetry-averaged.dat w d lc rgb &quot;black&quot;<br />
4. set zrange[0.1:*]<br />
5. set yrange[-10:2]<br />
6. replot<br />
<br />
■ graphic<br />
1. gnuplot<br />
2. set pm3d map<br />
3. splot unfold_EBS_symmetry-averaged.dat<br />
4. set dgrid3d 1000<br />
5. set zrange[0.00001:*]<br />
6. set yrange[-10:2]<br />
7. replot<br />
<br />
■ Linear response<br />
IBRION = 8<br />
see VASP-DFPT(Density Functional Pertubation Theroy) &amp; phonopy calculation<br />
<a href="http://cms.mpi.univie.ac.at/vasp/vasp/Lattice_dynamics_via_force_constant_approach.html">http://cms.mpi.univie.ac.at/vasp/vasp/Lattice_dynamics_via_force_constant_approach.html</a><br />
<a href="http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?3.14148">http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?3.14148</a><br />
<a href="http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.7637">http://cms.mpi.univie.ac.at/vasp-forum/forum_viewtopic.php?4.7637</a><br />
<br />
■ VASP &amp; phonopy<br />
<a href="http://phonopy.sourceforge.net/procedure.html#tutorial">http://phonopy.sourceforge.net/procedure.html#tutorial</a><br />
<br />
■ VASP-DFPT(Density Functional Pertubation Theroy) &amp; phonopy calculation<br />
<a href="http://phonopy.sourceforge.net/vasp.html#vasp-dfpt-interface">http://phonopy.sourceforge.net/vasp.html#vasp-dfpt-interface</a><br />
<br />
■ 振動解析<br />
ENMAX = 400<br />
ISMEAR = 0&nbsp;&nbsp;&nbsp; # Gaussian smearing<br />
IBRION = 6&nbsp;&nbsp;&nbsp; # finite differences with symmetry<br />
NFREE = 2&nbsp;&nbsp;&nbsp;&nbsp; # central differences (default) （中心差分）<br />
POTIM = 0.015 # default as well　(ステップ幅)<br />
EDIFF = 1E-8<br />
NSW = 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # ionic steps &gt; 0<br />
※ CG法を選択する場合： IBRION = 5&nbsp; &nbsp;! use the conjugate gradient algorithm<br />
<a href="http://cms.mpi.univie.ac.at/wiki/index.php/H2O_vibration">http://cms.mpi.univie.ac.at/wiki/index.php/H2O_vibration</a><br />
<a href="http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/page05.html">http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/page05.html</a><br />
<br />
■ NEB法<br />
SPRING = -5.0 （バネ定数）<br />
IMAGES = 2 （反応経路上での位置｛中間の構造｝の数）<br />
<a href="http://cms.mpi.univie.ac.at/wiki/index.php/Collective_jumps_of_a_Pt_adatom_on_fcc-Pt_(001):_Nudged_Elastic_Band_Calculation">http://cms.mpi.univie.ac.at/wiki/index.php/Collective_jumps_of_a_Pt_adatom_on_fcc-Pt_(001):_Nudged_Elastic_Band_Calculation</a><br />
<a href="http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/page07.html">http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/page07.html</a><br />
-------------------------------------------------------------------------------<br />
■ 計算結果<br />
□ 推奨する文献 [<a href="http://wolf.ifj.edu.pl/workshop/work2004/files/talks/kresse_vasp_phonon.pdf">http://wolf.ifj.edu.pl/workshop/work2004/files/talks/kresse_vasp_phonon.pdf</a>]<br />
&nbsp; Input filesに記している文献[4]にどのような計算が可能であるかが日本語で書かれている。<br />
□ 構造最適化<br />
&nbsp; 第2周期（Fe）までを用いてFm-3mのある系を計算。IBRION=1（Davidson後にRMM-DIIS）とし、Normalやaccurate、EDIFFをdefaultの1E-4から5E-6まで変えたがその差は0.0005[Angstrom]であった。しかし、ENCUTでは変化が大きく、Feのディフォルトから 400.0 eV に変えると格子定数は0.02[Angstrom]変化した。<br />
□ ENCUT dependence (Supercell 2x2x2, k point 4x4x4x, other peremeters are default).<br />
・ ENCUT=400 の場合と比べると格子定数の変化は下記のようになる。<br />
#ENCUT=：格子定数の変化量 0.02 [Angstrom]<br />
ENCUT=ENMAX+40 eV程度：格子定数の変化量 0.005 [Angstrom]<br />
ENCUT=ENMAX+80 eV程度：格子定数の変化量 0.0005[Angstrom]<br />
・ Ta, Si&nbsp;を入れた場合<br />
ENCUT=ENMAX+80 eV程度：格子定数の変化量 0.0015 [Angstrom]<br />
※ EDIFFはディフォルトの1E-4より小さくても、Normalからaccurateにしても、ENCUTによる変化よりは小さい。<br />
□ Lattice constant [Angstrom]<br />
k point dependence (Supercell 2x2x2, other peremeters are default).<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;k point 2x2x2, 3x3x3, 4x4x4, 5x5x5, 6x6x6<br />
ENCUT= 300: 11.361216, 11.36207, 11.37832, 11.38677, 11.38676&nbsp;<br />
ENCUT= 400: 11.361216, 11.36210, 11.38069, 11.38383, 11.38227&nbsp;<br />
ENCUT= 500: 11.361216, 11.36210, 11.38606, 11.38525<br />
□&nbsp;Lattice constant (Time)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;k point 5x5x5, 6x6x6 (grep LOOP+ OUTCAR))<br />
ENCUT= 300: 11.38677(Max 29653 sec), 11.38676 (Max 31934 sec)<br />
ENCUT= 400: 11.38383(Max 53287 sec), 11.38227 (Max 53329&nbsp;sec)<br />
ENCUT= 500: 11.38525(Max 77535 sec)&nbsp;<br />
・Intel FFTW3とNetlib FFTW3 での違い<br />
OMP_NUM_THREADS=1, -np 4 で計算<br />
INCAR<br />
&nbsp; EDIFF=1.0E-5<br />
&nbsp; EDIFFG=-0.01<br />
&nbsp; PREC=accurate<br />
&nbsp; ENCUT=400<br />
&nbsp; ISIF=3<br />
&nbsp; ISPIN=2<br />
&nbsp; IBRION=1<br />
&nbsp; GGA=PE<br />
&nbsp; NSW=20<br />
Netlib FFTW3: 11.41667 [Angstrom]<br />
Intel FFTW3: 11.52200 [Angstrom]<br />
・ EDIFFG の単位は eV/Angstrom ？<br />
（WIEN2k default: 1 mRy/a.u. = 0.025711 eV/Angstrom = 0.0005&nbsp; hartree / bohr）<br />
・ VASP<br />
[RV1]:<br />
Ncell = 1, Nkpoint 32<br />
Ncell = 2, Nkpoint 16<br />
Ncell = 4, Nkpoint 8<br />
Ncell = 8, Nkpoint 2<br />
Ncell = 3x3x3, Nkpoint 1<br />
[RV2]: LaFeAsO1-xFx, Nkpoint 8x8x4 (Monkhorst grid)<br />
[RV3]: 下三桁目まで格子定数が記述されている。<br />
A-type polymorph (sesquioxide): Nkpoint 4x4x4, 0.01 eV / Angstrom<br />
C-type polymorph (sesquioxide): Nkpoint 1x1x1, 0.01 eV / Angstrom<br />
[RV4]: Ecut = 26 Ry =&nbsp; 26 * 13.602 eV = 353.652 eV&nbsp;for Structural stability and lattice defects in copper:<br />
[RV5]: MoS2; Ecut = 200 eV<br />
[RV6]: NoS2 and NbSe2; Ecut = 500 eV, Nkpoint 40x40x1(PAW, GGA)<br />
[RV7]: エネルギーが下三桁、Volumeが 0.01 Angstrom^3 までの値<br />
CsCl PbO; Ecut=400 eV, Nkpoint 8x8x8<br />
alpha-PbO; Ecut=400 eV, Nkpoint 6x6x6<br />
・ VASP<br />
[O4, O5]: 0.01 eV / Angstrom<br />
[O1, O2]:&nbsp;0.001 eV / Angstrom (default)<br />
[O3]: 0.0001 eV / Angstrom<br />
・ Abinit<br />
[O6]: 0.00045 hartree / bohr (Sorry, other code: Abinit-MP)&nbsp;<br />
[O7]: 0.00003 hartree / bohr<br />
[O8, O9]: 0.00001 hartree / bohr<br />
[O10]: 0.000001 hartree / bohr<br />
※ default: EDIFFG = EDIFF*10, change &nbsp;EDIFF = 5E-5<br />
-------------------------------------------------------------------------------<br />
■ bash script<br />
下記を参考にしてbash script を作れば連続的に計算ができる。<br />
#!/bin/bash<br />
export OMP_NUM_THREADS=1<br />
date<br />
cd /home/username/vasp_calc/Ge<br />
mpirun -np 4 /home/username/vasp.5.2/vasp<br />
date<br />
cd /home/username/vasp_calc/Si<br />
mpirun -np 4 /home/username/vasp.5.2/vasp<br />
date<br />
export OMP_NUM_THREADS=4<br />
上記のテキストを作ったら、好きな名称で保存し、右クリック&rarr;プロパティ&rarr;アクセス権&rarr;プログラムとして実行できるにチェックを入れる。出来たファイルを左でダブルクリックしたり、Terminal 上で作成したテキストの名称を入力すればよい。<br />
-------------------------------------------------------------------------------<br />
■ cif2cell<br />
PyCifRW library のインストール　（cif2cell インストールの準備1）<br />
yum install python-setuptools<br />
yum install python-devel<br />
<br />
PyCifRW library のインストール　（cif2cell インストールの準備2）<br />
PyCifRW-3.3.tar.gz<br />
1) tar zxvf PyCifRW-3.3.tar.gz<br />
2) cd PyCifRW-3.3<br />
3) su<br />
4) python setup.py install<br />
<br />
cif2cell のインストール　<br />
1) tar zxvf cif2cell-1.0.10.tar.gz<br />
2) cd cif2cell-1.0.10<br />
3) su<br />
4) python setup.py install<br />
<br />
cif2cell の環境設定<br />
.bashrc に下記を書き込む。<br />
#cif2cell<br />
export CIF2CELL=$HOME/cif2cell-1.0.10<br />
PATH=&quot;$PATH:$CIF2CELL&quot;<br />
<br />
cif2cell の使用方法<br />
a) VASP: cif2cell -p vasp -f Ni20Mn3P6.cif --setup-all --no-reduce --vasp-print-species --vasp-cartesian-lattice-vectors --vasp-pseudo-libdr=$HOME/vasp/potpaw_PBE --vasp-format=5.<br />
&nbsp;&nbsp; エラーが表示されるが、INCAR 以外は生成されている。<br />
b) ABINIT: cif2cell -p abinit -f SrTiO3.cif -o SrTiO3.in<br />
c) CASTEP: cif2cell -p castep -f SrTiO3.cif -o SrTiO3.cell<br />
※ cif2cell -h でヘルプを表示。<br />
※ --no-reduce のオプションを用いるとconventiuonal cell になる。<br />
error case<br />
A. Error: could not read case.cif. では_cgraph_comments に改行があるとエラーが表示される。ここにはICSD のタイトルが格納される。<br />
B. Error: cell setup: Insufficient symmetry information to reduce to primitive cell (need space group number or Hermann-Mauguin symbol). では _symmetry_Int_Tables_number 空間群の数値　を書き入れることで対処できる。<br />
※ KPOINTS は、2x2x2のスーパーセルの場合、Gamma を Monkhorst Pack にして、grid を 4 4 4 にすると良いだろう。<br />
<br />
make input file<br />
1) make case.cif&nbsp;on VESTA<br />
2) cif2cell -p castep --no-reduce --supercell=[2,2,2] -f case.cif<br />
3) modify case.cell&nbsp;on VESTA and save case_super.cif<br />
4) cif2cell -p vasp &nbsp;--setup-all --no-reduce --vasp-print-species --vasp-cartesian-lattice-vectors --vasp-pseudo-libdr=$HOME/vasp/potpaw_PBE --vasp-format=5. -f case_super.cif<br />
<br />
GUI for VASP　（期限が切れたら使えなくなった）<br />
Virtual NanoLab (下記はWindows7 64bit で行った結果)<br />
1. download: <a href="http://quantumwise.com/products/free-trial">http://quantumwise.com/products/free-trial</a><br />
2. Demo version をインストール<br />
3. atk-12.8.2-windows64 を実行<br />
4. 幾つか進めていき、clear を選択<br />
5. Virtual NanoLab を実行<br />
6. Help &rarr; AddOn Manager...... &rarr; VASPScripter &rarr; Install &rarr; Refresh<br />
7. Tools &rarr; Custum Scripter...... &rarr; Scripters &rarr; VASP Scripter<br />
※ <a href="http://quantumwise.com/documents/tutorials/latest/VASPScripter/index.html/chap.setup.html">http://quantumwise.com/documents/tutorials/latest/VASPScripter/index.html/chap.setup.html</a> に従っていくとよい（説明にあるようにDatabaseとVASP Scripter 二つを開いておけれる）。<br />
-------------------------------------------------------------------------------<br />
■ WIEN2kのインストールについて（VASPで構造最適化後にWIEN2kで改めて計算するなど）<br />
□ compiling<br />
1.&nbsp;O &nbsp; Compiler options: &nbsp;-FR -mp1 -w -prec_div -pc80 -pad -align -DINTEL_VML -traceback -axAVX,SSE4.2,SSE4.1,SSSE3,SSE3</p>

<div>&nbsp;OpenSSH and OpenMPI setting<br />
1. Shared Memory Architecture? (y/n):y<br />
2. (like taskset -c). Enter N / your_specific_command:<br />
3. Set MPI_REMOTE to 0 / 1:<br />
4. Your compiler: mpif90<br />
5. RP RP_LIB(SCALAPACK+PBLAS): -lmkl_scalapack_lp64 -lmkl_blacs_openmpi_lp64 -L/usr/local/lib -lfftw3_mpi -lfftw3_omp -lfftw3_threads -lfftw3 $(R_LIBS)<br />
※ 1-3の手順が無いとOpenSSHでの認証などでエラーが出る。SSH関連でエラーが出る場合にはこれに注意すると良い。<br />
□ w2web<br />
CentOS 6.4&nbsp; x86_64 niminal Desktop で下記の問題が生じた。開発ツール以外に、NFT server と web server にもチェックを入れると正常動作するかもしれない（127.0.0.1:7890 でなくてもGUIが動作したPCがある）。<br />
1. hostname -f の -f でエラーが表示される。<br />
2. <a href="http://www.misasa.okayama-u.ac.jp/~masami/pukiwiki/index.php?Wien2K_5%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%EB%A5%E1%A5%E2">http://www.misasa.okayama-u.ac.jp/~masami/pukiwiki/index.php?Wien2K_5%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%EB%A5%E1%A5%E2</a> のw2webの設定が参考になる。<br />
&nbsp; A.&nbsp;WIEN2kをダウンロードしたファイルの中にある SRC_w2web の w2web&nbsp;で hostname -f&nbsp; の -fを削除。<br />
&nbsp; B. WIEN2kをダウンロードしたファイルの中にある&nbsp;SRC_w2web の bin の w2web で hostname -f の -f を削除。<br />
3. w2web が終了後にアドレスが示される。<br />
4. 127.0.0.1:7890 または PCに設定したIPアドレス:7890 を firefox などの URLに入力することでGUIが動作する。<br />
□ BoltzTraP<br />
1. rewrite boltztrap-1.2.2/src/makefile<br />
FC=ifort<br />
FOPT = -FR -mp1 -w -prec_div -pc80 -pad -align -DINTEL_VML -traceback -axAVX,SSE4.2,SSE4.1,SSSE3,SSE3<br />
LDFLAGS = $(FOPT) -L$(MKLROOT)/lib/$(MKL_TARGET_ARCH) -pthread<br />
LIBS = -lmkl_lapack95_lp64 -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -openmp -lpthread<br />
2. make<br />
<br />
□ 初期構造予測用の計算コード<br />
A. USPEX: <a href="http://han.ess.sunysb.edu/~USPEX/uspex.html">http://han.ess.sunysb.edu/~USPEX/uspex.html</a><br />
B.&nbsp;CALYPSO: <a href="http://www.calypso.cn/">http://www.calypso.cn/</a><br />
<br />
Reference<br />
Japanese<br />
[1] <a href="http://www.hpc.co.jp/assets/files/VaspManual.pdf">http://www.hpc.co.jp/assets/files/VaspManual.pdf</a><br />
[2] <a href="http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/VASP_manual_index.html">http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/VASP_manual_index.html</a><br />
[3] <a href="http://pccluster.web.fc2.com/vasp.html">http://pccluster.web.fc2.com/vasp.html</a><br />
[4] <a href="http://ist.ksc.kwansei.ac.jp/~nishitani/?c=plugin;plugin=attach_download;p=MBTheses;file_name=07Yamamoto.pdf">http://ist.ksc.kwansei.ac.jp/~nishitani/?c=plugin;plugin=attach_download;p=MBTheses;file_name=07Yamamoto.pdf</a><br />
[5] <a href="http://topsecret.hpc.co.jp/wiki/index.php/%E3%83%93%E3%83%AB%E3%83%80%E3%83%BC%E6%97%A5%E8%AA%8C">http://topsecret.hpc.co.jp/wiki/index.php/%E3%83%93%E3%83%AB%E3%83%80%E3%83%BC%E6%97%A5%E8%AA%8C</a><br />
[6] <a href="http://www.tuat.ac.jp/~nagailab/tomi/siyou.html">http://www.tuat.ac.jp/~nagailab/tomi/siyou.html</a><br />
[7] <a href="http://isc-w3.jaist.ac.jp/iscenter/index.php?id=107">http://isc-w3.jaist.ac.jp/iscenter/index.php?id=107</a><br />
Cluster PC<br />
[1] <a href="http://pccluster.web.fc2.com/index.html">http://pccluster.web.fc2.com/index.html</a><br />
[2] <a href="http://na-inet.jp/na/pccluster/fc5_x8664.html">http://na-inet.jp/na/pccluster/fc5_x8664.html</a><br />
[3] <a href="http://meme.biology.tohoku.ac.jp/klabo-wiki/index.php?%B7%D7%BB%BB%B5%A1%2F%A5%AF%A5%E9%A5%B9%A5%BFFedora10">http://meme.biology.tohoku.ac.jp/klabo-wiki/index.php?%B7%D7%BB%BB%B5%A1%2F%A5%AF%A5%E9%A5%B9%A5%BFFedora10</a><br />
[4] <a href="http://www.arch.itc.nagoya-u.ac.jp/~hirano/pukiwiki/index.php?PC%A5%AF%A5%E9%A5%B9%A5%BF%A1%BC%A4%CE%B7%D7%BB%BB%A5%DE%A5%B7%A5%F3%A4%CE%B9%BD%C3%DB">http://www.arch.itc.nagoya-u.ac.jp/~hirano/pukiwiki/index.php?PC%A5%AF%A5%E9%A5%B9%A5%BF%A1%BC%A4%CE%B7%D7%BB%BB%A5%DE%A5%B7%A5%F3%A4%CE%B9%BD%C3%DB</a><br />
[5] <a href="http://www.is.oit.ac.jp/~shinkai/his/cactus/LinuxPCcluster.html">http://www.is.oit.ac.jp/~shinkai/his/cactus/LinuxPCcluster.html</a><br />
[6] <a href="http://pccluster.web.fc2.com/link.html">http://pccluster.web.fc2.com/link.html</a><br />
[7] <a href="http://www.rcs.arch.t.u-tokyo.ac.jp/ohnishi/contents/tips/parallel_computing.html">http://www.rcs.arch.t.u-tokyo.ac.jp/ohnishi/contents/tips/parallel_computing.html</a><br />
Compiling<br />
[1] <a href="http://cms.mpi.univie.ac.at/wiki/index.php/Installing_VASP">http://cms.mpi.univie.ac.at/wiki/index.php/Installing_VASP</a><br />
[2] <a href="http://locs.bw.nitech.ac.jp/~kobayashi/fswiki/wiki.cgi?page=VASP%B4%D8%CF%A2">http://locs.bw.nitech.ac.jp/~kobayashi/fswiki/wiki.cgi?page=VASP%B4%D8%CF%A2</a><br />
[3] <a href="http://cms.mpi.univie.ac.at/wiki/index.php/Hybrid_openMPI/openMP_parallelization">http://cms.mpi.univie.ac.at/wiki/index.php/Hybrid_openMPI/openMP_parallelization</a><br />
[4] <a href="http://chengis.me/2009/03/parallel-siesta-vasp-on-mac-pro">http://chengis.me/2009/03/parallel-siesta-vasp-on-mac-pro</a><br />
[5] <a href="http://micro.stanford.edu/wiki/How_to_compile_VASP">http://micro.stanford.edu/wiki/How_to_compile_VASP</a><br />
[6] <a href="http://www.nsc.liu.se/~pla/">http://www.nsc.liu.se/~pla/</a><br />
[7] <a href="http://wiki.hpc.ufl.edu/doc/VASP">http://wiki.hpc.ufl.edu/doc/VASP</a><br />
[8] <a href="http://rcc.its.psu.edu/resources/software/vasp5/">http://rcc.its.psu.edu/resources/software/vasp5/</a><br />
[9] <a href="http://www.open-mpi.de/faq/?category=mpi-apps">http://www.open-mpi.de/faq/?category=mpi-apps</a><br />
[10] <a href="http://levlafayette.com/node/311">http://levlafayette.com/node/311</a><br />
[11] <a href="http://www.levlafayette.com/node/19">http://www.levlafayette.com/node/19</a><br />
[12] <a href="http://www.hpckp.org/index.php/articles-tutorials/128-howto-vasp-528-ib">http://www.hpckp.org/index.php/articles-tutorials/128-howto-vasp-528-ib</a><br />
[13] <a href="http://levlafayette.com/node/19">http://levlafayette.com/node/19</a><br />
Benchmark<br />
[1] <a href="http://www.nersc.gov/users/computational-systems/hopper/performance-and-optimization/using-openmp-effectively-on-hopper/">http://www.nersc.gov/users/computational-systems/hopper/performance-and-optimization/using-openmp-effectively-on-hopper/</a><br />
[2] <a href="http://topsecret.hpc.co.jp/wiki/index.php/VASP%E3%81%AEtips">http://topsecret.hpc.co.jp/wiki/index.php/VASP%E3%81%AEtips</a><br />
Input files<br />
[1] <a href="http://msc.psu.edu/tutorials/using-vasp">http://msc.psu.edu/tutorials/using-vasp</a><br />
[2] <a href="http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/VASP_manual_index.html">http://www.chem.saitama-u.ac.jp/takayanagi-lab/VASP_manual/VASP_manual_index.html</a><br />
[3] <a href="http://www.aki.che.tohoku.ac.jp/~taiko/index-list.html">http://www.aki.che.tohoku.ac.jp/~taiko/index-list.html</a><br />
[4] <a href="http://www.google.co.jp/url?sa=t&amp;rct=j&amp;q=vasp%20%E5%85%A5%E5%8A%9B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB&amp;source=web&amp;cd=5&amp;ved=0CEMQFjAE&amp;url=http%3A%2F%2Fist.ksc.kwansei.ac.jp%2F~nishitani%2F%3Fc%3Dplugin%3Bplugin%3Dattach_download%3Bp%3DRecentPublications%3Bfile_name%3D11VASPManual.pdf&amp;ei=TH2NUfSTF4iOlQXxpYGgCg&amp;usg=AFQjCNFUJkesKIrwFiDr4eICwwcHjQPGfA&amp;bvm=bv.46340616,d.dGI">http://www.google.co.jp/url?sa=t&amp;rct=j&amp;q=vasp%20%E5%85%A5%E5%8A%9B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB&amp;source=web&amp;cd=5&amp;ved=0CEMQFjAE&amp;url=http%3A%2F%2Fist.ksc.kwansei.ac.jp%2F~nishitani%2F%3Fc%3Dplugin%3Bplugin%3Dattach_download%3Bp%3DRecentPublications%3Bfile_name%3D11VASPManual.pdf&amp;ei=TH2NUfSTF4iOlQXxpYGgCg&amp;usg=AFQjCNFUJkesKIrwFiDr4eICwwcHjQPGfA&amp;bvm=bv.46340616,d.dGI</a>　<br />
[5] <a href="http://scent.gist.ac.kr/downloads/tutorial/2011/5/5th_Tutorial_VASP_NodoLee(2).pdf">http://scent.gist.ac.kr/downloads/tutorial/2011/5/5th_Tutorial_VASP_NodoLee(2).pdf</a><br />
[6] <a href="http://www.personal.psu.edu/ams751/VASP-Cu/">http://www.personal.psu.edu/ams751/VASP-Cu/</a><br />
[RV1] <a href="http://prb.aps.org/abstract/PRB/v54/i16/p11169_1">http://prb.aps.org/abstract/PRB/v54/i16/p11169_1</a><br />
[RV2] <a href="http://prb.aps.org/abstract/PRB/v77/i22/e220506">http://prb.aps.org/abstract/PRB/v77/i22/e220506</a><br />
[RV3] <a href="http://www.sciencedirect.com/science/article/pii/S0925838802010435">http://www.sciencedirect.com/science/article/pii/S0925838802010435</a><br />
[RV4] <a href="http://prb.aps.org/abstract/PRB/v63/i22/e224106">http://prb.aps.org/abstract/PRB/v63/i22/e224106</a><br />
[RV5] <a href="http://prl.aps.org/abstract/PRL/v80/i7/p1481_1">http://prl.aps.org/abstract/PRL/v80/i7/p1481_1</a><br />
[RV6] <a href="http://prb.aps.org/abstract/PRB/v79/i11/e115409">http://prb.aps.org/abstract/PRB/v79/i11/e115409</a><br />
[RV7] <a href="http://prb.aps.org/abstract/PRB/v59/i13/p8481_1">http://prb.aps.org/abstract/PRB/v59/i13/p8481_1</a><br />
[O1] <a href="http://arxiv.org/abs/0803.2730">http://arxiv.org/abs/0803.2730</a><br />
[O2] <a href="http://pubs.rsc.org/en/content/articlehtml/2008/jm/b718857a">http://pubs.rsc.org/en/content/articlehtml/2008/jm/b718857a</a><br />
[O3] <a href="http://www.sciencedirect.com/science/article/pii/S1293255809002295">http://www.sciencedirect.com/science/article/pii/S1293255809002295</a><br />
[O4] <a href="http://iopscience.iop.org/1742-6596/402/1/012004">http://iopscience.iop.org/1742-6596/402/1/012004</a><br />
[O5] <a href="http://w3.jamstec.go.jp/esc/publication/annual/annual2011/pdf/2project/chapter2/155kaburaki.pdf">http://w3.jamstec.go.jp/esc/publication/annual/annual2011/pdf/2project/chapter2/155kaburaki.pdf</a><br />
[O6] <a href="http://www.sciencedirect.com/science/article/pii/S0009261401000999">http://www.sciencedirect.com/science/article/pii/S0009261401000999</a><br />
[O7] <a href="http://prb.aps.org/abstract/PRB/v77/i16/e165107">http://prb.aps.org/abstract/PRB/v77/i16/e165107</a><br />
[O8] <a href="http://prb.aps.org/pdf/PRB/v66/i10/e104106">http://prb.aps.org/pdf/PRB/v66/i10/e104106</a><br />
[O9] <a href="http://iopscience.iop.org/0268-1242/24/4/045005">http://iopscience.iop.org/0268-1242/24/4/045005</a><br />
[O10] <a href="http://iopscience.iop.org/0953-8984/21/27/275901">http://iopscience.iop.org/0953-8984/21/27/275901</a><br />
GUI<br />
[1] <a href="http://www.vasp.at/index.php?option=com_content&amp;view=article&amp;id=95:utilities&amp;catid=47&amp;Itemid=71">http://www.vasp.at/index.php?option=com_content&amp;view=article&amp;id=95:utilities&amp;catid=47&amp;Itemid=71</a><br />
[2] p4vasp: <a href="http://www.p4vasp.at/">http://www.p4vasp.at/</a> or <a href="http://www.nsc.liu.se/software/visualization/p4vasp/">http://www.nsc.liu.se/software/visualization/p4vasp/</a> or <a href="http://blog.goo.ne.jp/from_germany/e/bf36c8d90d991e8e5ee3b4c52c50c13a">http://blog.goo.ne.jp/from_germany/e/bf36c8d90d991e8e5ee3b4c52c50c13a</a><br />
[3] BS4VASP: <a href="http://shell.cas.usf.edu/~lwoods2/tools.htm">http://shell.cas.usf.edu/~lwoods2/tools.htm</a> &nbsp;<br />
[4] vasp data viwer: <a href="http://vaspview.sourceforge.net/">http://vaspview.sourceforge.net/</a><br />
[5] ASE: <a href="https://wiki.fysik.dtu.dk/ase/overview.html">https://wiki.fysik.dtu.dk/ase/overview.html</a><br />
[6] vaspgui: <a href="http://sourceforge.jp/projects/sfnet_vaspgui/">http://sourceforge.jp/projects/sfnet_vaspgui/</a><br />
[7] VASP Scripter:&nbsp;<a href="http://quantumwise.com/publications/news-archive/159-vasp-interface">http://quantumwise.com/publications/news-archive/159-vasp-interface</a>&nbsp;or <a href="http://quantumwise.com/documents/tutorials/latest/VASPScripter/index.html/index.html">http://quantumwise.com/documents/tutorials/latest/VASPScripter/index.html/index.html</a><br />
[8] fropho: <a href="http://fropho.sourceforge.net/">http://fropho.sourceforge.net/</a><br />
[9] <a href="http://freechemical.info/freeSoftware/index_kinds.php?kind=visual">http://freechemical.info/freeSoftware/index_kinds.php?kind=visual</a><br />
Unix<br />
[1] <a href="http://www.q-eng.imat.eng.osaka-cu.ac.jp/~ippei/unix-tips/command.html">http://www.q-eng.imat.eng.osaka-cu.ac.jp/~ippei/unix-tips/command.html</a><br />
-------------------------------------------------------------------------------<br />
INCAR<br />
<br />
SYSTEM = XXX<br />
# Common<br />
ALGO = Fast<br />
#EDIFF = 0.0001<br />
#ENCUT = 520<br />
# spin polarzied calculation ISPIN=2, non-spin case ISPIN=1<br />
ISPIN = 2<br />
LREAL = Auto<br />
LWAVE = .TRUE.<br />
#MAGMON = 0 0 1<br />
#NELM = 200<br />
#NPAR= 1<br />
PREC = Accurate<br />
ISTART = 1<br />
<br />
#SCF<br />
#ISMEAR = -5<br />
#SIGMA = 0.2<br />
#NSW = 99<br />
#ICHARG = 1<br />
#LORBIT = 11<br />
#conjugate gradient IBRION = 2, Davidson + RMM-DIIS IBRION = 2<br />
#IBRION = 2<br />
<br />
#SCF OPTIMIZATION<br />
#ISIF = 3<br />
<br />
#DOS<br />
#ISMEAR = -5<br />
#NSW = 0<br />
#IBRION = -1<br />
#ICHARG = 11<br />
#LORBIT = 11<br />
<br />
# DOS range<br />
#EMIN = -10.0<br />
#EMAX = 10.0<br />
#NEDOS = 1001<br />
<br />
#band<br />
ICHARG=11 #charge read file<br />
ISMEAR = 0; SIGMA = 0.1;<br />
LORBIT=11<br />
<br />
## HSE<br />
#LHFCALC = .TRUE. ; HFSCREEN = 0.2 ; AEXX = 0.25<br />
#ALGO = D ; TIME = 0.4 ; LDIAG = .TRUE.<br />
<br />
##VASP2WANNIER<br />
#LWANNIER90=.TRUE.<br />
<br />
---------------------------------------------------------------------<br />
KPOINTS<br />
<br />
k-points for bandstructure L-G-X-U K-G<br />
&nbsp;10<br />
line<br />
reciprocal<br />
&nbsp; 0.50000&nbsp; 0.50000&nbsp; 0.50000&nbsp;&nbsp;&nbsp; 1<br />
&nbsp; 0.00000&nbsp; 0.00000&nbsp; 0.00000&nbsp;&nbsp;&nbsp; 1<br />
<br />
&nbsp; 0.00000&nbsp; 0.00000&nbsp; 0.00000&nbsp;&nbsp;&nbsp; 1<br />
&nbsp; 0.00000&nbsp; 0.50000&nbsp; 0.50000&nbsp;&nbsp;&nbsp; 1<br />
<br />
&nbsp; 0.00000&nbsp; 0.50000&nbsp; 0.50000&nbsp;&nbsp;&nbsp; 1<br />
&nbsp; 0.25000&nbsp; 0.62500&nbsp; 0.62500&nbsp;&nbsp;&nbsp; 1<br />
<br />
&nbsp; 0.37500&nbsp; 0.7500&nbsp;&nbsp; 0.37500&nbsp;&nbsp;&nbsp; 1<br />
&nbsp; 0.00000&nbsp; 0.00000&nbsp; 0.00000&nbsp;&nbsp;&nbsp; 1<br />
-------------------------------------------------------------------------------</div>
