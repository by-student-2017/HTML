<p>　ここでは、VMware Player上で&nbsp;Ubuntu&nbsp;11.04&nbsp;をインストールし、第一原理計算コードをセットアップするまでを解説する。 （64bitはOSをx86_64にして、intel compiler において、ia32 を intel64にし、ライブラリを64bitのタイプに指定することで可能になる）<br />
------------------------------------------------------------------------------<br />
VMware Player<br />
&nbsp; 1) google で「VMware Player 」と入力して検索すると、下記のHPが得られる。<br />
&nbsp;&nbsp;&nbsp; <a href="https://www.vmware.com/jp/tryvmware/?p=player&amp;lp=1">https://www.vmware.com/jp/tryvmware/?p=player&amp;lp=1</a>　にて 無償ダウンロード登録に必要事項を記入する。<br />
&nbsp; 2) VMware Player (32 ビットおよび 64 ビット版 Windows 用）で、クリックして手動でダウンロード を選択すれば良いだろう。<br />
&nbsp; 3) ダウンロードしたファイルを実行する。<br />
------------------------------------------------------------------------------<br />
Ubuntu 11.04&nbsp; のインストール<br />
&nbsp; 1) google で 「riken linux」と入力して検索すると、下記のHPが得られる。<br />
&nbsp;&nbsp;&nbsp; <a href="http://ftp.riken.go.jp/Linux/">http://ftp.riken.go.jp/Linux/</a><br />
&nbsp; 2) 「ubuntu-iso/」&rarr;「CDs-Ubuntu/」&rarr;「Ubuntu 11.04 (Natty Narwhal) 」&rarr;「ubuntu-11.04-desktop-i386.iso」<br />
&nbsp; 3) 「ubuntu-11.04-desktop-i386.iso」をirvine1_3_0などでダウンロードする。<br />
&nbsp; 4) VMware Player を立ち上げて、「新規仮想マシンの作成（N)」を選択する。<br />
&nbsp;&nbsp;5) 「インストーラ ディスク イメージ ファイル （M）（iso）: 」で「参照（R）...」を押して、先ほどダウンロードしたisoファイル「ubuntu-11.04-desktop-i386.iso」を選択し、次へを押す。<br />
&nbsp; 6) 今後使用するパスワードをなどを設定していけばインストールは完了する。<br />
&nbsp; 7) ubuntu login: と Passwordを入力。<br />
&nbsp; 8) sudo apt-get update と入力し、パスワードを入力する。<br />
------------------------------------------------------------------------------<br />
Ubuntu 11.04 の終了と再起動<br />
&nbsp; 1) 「System」&rarr;「Shut Down...」<br />
&nbsp; 2) 「Shut Down」を選択すれば終了。「Restart」を選択すれば再起動される。<br />
------------------------------------------------------------------------------<br />
仮想マシン設定の編集<br />
&nbsp; 1) 左欄からインストールしたLinux OSを選択する。<br />
&nbsp; 2) 右下にある「仮想マシン設定の編集」を選択する。<br />
&nbsp; 3) メモリを推奨最大メモリに設定する。<br />
&nbsp; 4) プロセッサを選択し、プロセッサ コアの数を設定する。（Core 2 Quadであれば、2や4）を選択する。<br />
&nbsp; 5) 設定が終われば 「OK」を押す。<br />
------------------------------------------------------------------------------<br />
仮想マシンの再生（Ubuntu10.04 の起動）<br />
&nbsp; 1) 左欄からインストールしたUbuntu10.04 を選択する。<br />
&nbsp; 2) 右下にある「仮想マシンの再生」を選択する。<br />
&nbsp; 3) 上記で起動する。<br />
------------------------------------------------------------------------------<br />
第一原理計算に必要なソフトのダウンロードⅠ（「Terminal」上）<br />
&nbsp; 1) 「Applications」&rarr;「Accessories」&rarr;「Terminal」<br />
&nbsp; 2) sudo apt-get&nbsp;install csh<br />
&nbsp; 3) 以後、この「Terminal」で、下記のようにコマンドを入力していく。<br />
&nbsp;&nbsp;<br />
&nbsp; ◆ gfortran の場合（業者様向け &amp; 学生様向け）<br />
&nbsp; 1) sudo apt-get install gfortran<br />
<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; 1)&nbsp;sudo apt-get install kwrite<br />
&nbsp; 2) cd /etc/apt<br />
&nbsp; 3) sudo&nbsp;kwrite sources.list<br />
&nbsp; 4) deb http://ftp.nara.wide.ad.jp/debian squeeze main を最後の行に入力してSAVE<br />
&nbsp; 5) Applications を開いて、Ubuntu Software Center にて libstdc++5 を検索する<br />
または sudo apt-get install libstdc++5 と入力<br />
------------------------------------------------------------------------------<br />
第一原理計算に必要なソフトのダウンロードⅡ（Compiler install）<br />
<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; Intel Compiler<br />
&nbsp; 1) google で 「Non-commercial Intel」と入力して検索すると下記のHPが得られる。<br />
<a href="http://software.intel.com/en-us/articles/non-commercial-software-development/">http://software.intel.com/en-us/articles/non-commercial-software-development/</a><br />
&nbsp; 2) Accept を押して、必要事項を記入する。<br />
&nbsp; 3) Product for x86_64-bit development にチェックを入れて、Download Now を押す。（最新版で上手くいかない場合は、右下にある version の選択を 11.0 にすると良い）<br />
&nbsp; 4) 必要事項を記入したときのメールアドレスに添付されている ライセンスファイルをダウンロードして、「Places」&rarr;「Home folder」の中に置く。<br />
&nbsp; 5) 「Applications」&rarr;「System Tools」&rarr;「Terminal」 でコマンドを入力できるようにする<br />
&nbsp; 6) tar zxvf と入力後、「Downloads」のフォルダを開いて、ダウンロードしたファイルをマウスで左クリックしながら「Terminal」 へ入れる。その後に、Enterを押す。<br />
&nbsp; 7) 「Applications」&rarr;「System Tools」&rarr;「Terminal」&nbsp;<br />
&nbsp; 8) cd と入力後、「parallel_studio_xe_2011...」のファイルを左クリックしながら「Terminal」 へ入れる。<br />
&nbsp; 9) ./install.sh<br />
&nbsp; 10) 「3. Install as current user to limit access to user level* 」を選択。<br />
&nbsp; 11) 「Press &quot;Enter&quot; key to continue or &quot;q&quot; to quit: 」でEnterを入力。<br />
&nbsp; 12) 「1. Skip prerequisites [default] 」を選択。<br />
&nbsp; 13) 「space」 を押し続け、最後に 「accept」と入力してEnterを押す。<br />
&nbsp; 14) 「3. I want to activate either remotely, or by using a license file, or by using a<br />
license manager」を選択。<br />
&nbsp; 15) 「2. Use a license file」 を選択。<br />
&nbsp; 16) 「Applications」&rarr;「System Tools」&rarr;「Terminal」 で新しく開いた「Terminal」の中に、ライセンスファイルを入れる。&#39; &#39;の中をコピーする。<br />
&nbsp; 17) 前の「Terminal」に戻って、ペーストし、Enter を押す。<br />
&nbsp; 18) 「Press &quot;Enter&quot; key to continue:」でEnterを押す。<br />
&nbsp; 19) 「1. Start installation Now」を選択。<br />
&nbsp; 20) 「Would you like to overwrite this directory? ( Yes/No ) [ Yes ] :」でEnterを押す。<br />
&nbsp; 21) 「1. Skip prerequisites [default]」を選択。<br />
&nbsp; 22) 「Please type a selection or press &quot;Enter&quot; to accept default choice [q]:」でqを押す。<br />
&nbsp;&nbsp;&nbsp; この後に表示されている。/home/...以後の情報をメモしておく。<br />
&nbsp; 23) cd $home<br />
&nbsp; 24) emaces .bashrc にて最後の行に下記を書き入れる（user_nameのところが人により異なる）。<br />
&nbsp;&nbsp;&nbsp; export PATH=$PATH:/home/user_name/intel/vtune_amplifier_xe_2011<br />
&nbsp;&nbsp;&nbsp; export PATH=$PATH:/home/user_name/intel/inspector_xe_2011<br />
&nbsp;&nbsp;&nbsp; source /home/user_name/intel/bin/compilervars.sh ia32<br />
※ version 11.0 などでは、左欄のコンパイラの設定の　Intel Fortran :&nbsp;を参考にすると良い。<br />
&nbsp; 25) bash　にて変更を反映させる（再起動させてもよい）。<br />
&nbsp; 26) ifort -v にてFortran　コンパイラの動作確認を兼ねてVersion情報を表示させる。<br />
&nbsp; 27) icc -v にてC コンパイラの動作確認を兼ねてVersion情報を表示させる。</p>

<p>------------------------------------------------------------------------------<br />
第一原理計算に必要なライブラリの設定Ⅰ（Parallel set up）<br />
&nbsp;&nbsp;◇ gfortran の場合（業者様向け &amp; 学生様向け）</p>

<p>&nbsp;&nbsp;MPICH<br />
&nbsp;&nbsp;1)&nbsp;「Applications」&rarr;「Ubuntu Software Center」で、右上にある検索の欄で、「MPICH」を入力して対応するソフトをインストール。</p>

<p>&nbsp;&nbsp;または、sudo apt-get install&nbsp;を用いてインストール。（左欄のandLinuxを参照）</p>

<p>&nbsp;&nbsp;MPICH2</p>

<p>&nbsp; 1) 「Applications」&rarr;「Ubuntu Software Center」で、右上にある検索の欄で、「MPICH2」を入力して対応するソフトをインストール。</p>

<p>&nbsp;&nbsp; またｈ、sudo apt-get install を用いてインストール。（左欄のandLinuxを参照）</p>

<p>&nbsp;&nbsp;OpenMPI</p>

<p>&nbsp;&nbsp;1) 「Applications」&rarr;「Ubuntu Software Center」で、右上にある検索の欄で、「OpenMPI」を入力して対応するソフトをインストール。</p>

<p>&nbsp;&nbsp;または、sudo&nbsp;apt-get&nbsp;install&nbsp;を用いてインストール。（左欄のandLinuxを参照）</p>

<p>&nbsp;&nbsp;LAM</p>

<p>&nbsp;&nbsp;1)&nbsp;「Applications」&rarr;「Ubuntu Software Center」で、右上にある検索の欄で、「LAM」を入力して対応するソフトをインストール。</p>

<p>&nbsp;&nbsp;または、sudo&nbsp;apt-get&nbsp;install&nbsp;を用いてインストール。（左欄のandLinuxを参照）</p>

<p>&nbsp;&nbsp;PVM</p>

<p>&nbsp;&nbsp;1)&nbsp;「Applications」&rarr;「Ubuntu Software Center」で、右上にある検索の欄で、「PVM」を入力して対応するソフトをインストール。</p>

<p>&nbsp;&nbsp;または、sudo&nbsp;apt-get&nbsp;install&nbsp;を用いてインストール。（左欄のandLinuxを参照）<br />
<br />
&nbsp;&nbsp;◇ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; MPICH<br />
&nbsp; 1) googleで「mpich」と入力して検索する。下記のHPが得られる。<br />
&nbsp;&nbsp;&nbsp; <a href="http://www.mcs.anl.gov/research/projects/mpich2/">http://www.mcs.anl.gov/research/projects/mpich2/</a><br />
&nbsp; 2) 「Downloads Page &gt;&gt;」に向かう。<br />
&nbsp; 3) 一番下にあるMPICH-1をクリックして、ダウンロードする。<br />
&nbsp; 4) tar zxvf と入力後、「Downloads」のフォルダを開いて、ダウンロードしたファイルをマウスで左クリックしながら「Terminal」 へ入れる。その後に、Enterを押す。<br />
&nbsp; 5) cd と入力後、「Downloads」のフォルダを開いて、ダウンロードしたファイルをマウスで左クリックしながら「Terminal」 へ入れる。その後に、Enterを押す。<br />
&nbsp; 6) ./configure -prefix=/usr/local/mpich -opt=-O2 -c++=icpc -cc=icc -fc=ifort -f90=ifort -f77=ifort --with-arch=LINUX<br />
&nbsp; 7) make<br />
&nbsp; 8) sudo su<br />
&nbsp; 9) make install<br />
&nbsp; 10) 各コンパイルでのコマンドは下記のようになる。<br />
&nbsp;&nbsp;&nbsp; Fortran 77: /usr/local/mpich/bin/mpif77<br />
&nbsp;&nbsp;&nbsp; Fortran 90: /usr/local/mpich/bin/mpif90<br />
&nbsp;&nbsp;&nbsp; C : /usr/local/mpich/bin/mpicc<br />
<br />
&nbsp; OpenMPI （インストール後は再起動すること！）<br />
&nbsp;&nbsp;1) googleで「openmpi」と入力して検索する。下記のHPが得られる。<br />
&nbsp;&nbsp;&nbsp; <a href="http://www.open-mpi.org/software/ompi/v1.4/">http://www.open-mpi.org/software/ompi/v1.4/</a>&nbsp;<br />
&nbsp;&nbsp;2) openmpi-1.4.3.tar.gz をダウンロードする。<br />
&nbsp; 3) tar zxvf openmpi-1.4.3.tar.gz<br />
&nbsp; 4) cd openmpi-1.4.3<br />
&nbsp; 5) ./configure -prefix=/usr/local/openmpi CXX=icpc CC=icc FC=ifort F90=ifort F77=ifort<br />
&nbsp; 6) make<br />
&nbsp; 7) sudo su<br />
&nbsp; 8) make all install<br />
&nbsp; 9) 各コンパイルでのコマンドは下記のようになる。<br />
&nbsp;&nbsp;&nbsp; Fortran 77: /usr/local/openmpi/bin/mpif77<br />
&nbsp;&nbsp;&nbsp; Fortran 90: /usr/local/openmpi/bin/mpif90<br />
&nbsp;&nbsp; C : /usr/local/openmpi/bin/mpicc<br />
&nbsp;&nbsp; C++ : /usr/local/openmpi/bin/mpicxx</p>

<p>------------------------------------------------------------------------------<br />
並列計算を実行する前に必要なrshの設定<br />
&nbsp; 1) 「Applications」&rarr;「Ubuntu Software Center」</p>

<p>&nbsp; 2) 右上にある検索の欄で、「rsh-server」を入力して対応するソフトを探す。<br />
&nbsp; 3) 下側にインストールするソフトの候補が現れるので、それをクリックして現れる「Install」を押してインストールする。</p>

<p>&nbsp;&nbsp;4)&nbsp;右上にある検索の欄で、「rsh-client」「rsh-redone-client」を入力して、先と同様にインストールする。<br />
&nbsp; 5) rpm -qa rsh-server, rpm -qa xinetd<br />
&nbsp;&nbsp;&nbsp; rsh-server, eintedがインストールされていることを確認する<br />
&nbsp; 6) sudo apt-get install sysv-rc-conf<br />
&nbsp; 7) sysv-rc-conf&nbsp;rsh on<br />
&nbsp;&nbsp;&nbsp; ブート時に rsh を自動的に起動するように設定する<br />
&nbsp; 8)&nbsp;sysv-rc-conf rlogin on<br />
&nbsp;&nbsp;&nbsp; ブート時にrloginを自動的に起動するように設定する<br />
&nbsp; 9) /sbin/service xinetd restart<br />
&nbsp;&nbsp;&nbsp; ブート時にxinetd を自動的に起動するように設定する<br />
&nbsp; 10) ホームディレクトリに .rhosts ファイルへ通信するマシン全てとlocalhost.localdomain を記述<br />
&nbsp;&nbsp;&nbsp; kwrite ~/.rhosts または　emacs&nbsp;~/.rhosts<br />
&nbsp;&nbsp;&nbsp; localhost.localdomain<br />
&nbsp;&nbsp;&nbsp;&nbsp;localhost<br />
&nbsp;&nbsp;&nbsp; host1<br />
&nbsp;&nbsp;&nbsp; host2<br />
&nbsp; 11) .rhosts のパーミッションを600にする。chmod 600 ~/.rhosts<br />
&nbsp; 12) rsh の動作確認<br />
&nbsp;&nbsp;&nbsp; rsh localhost.localdomain hostname<br />
&nbsp;&nbsp;&nbsp; rsh&nbsp;localhost hostname<br />
参考HP : <a href="http://mase.itc.nagoya-u.ac.jp/~hirano/pukiwiki/index.php?CentOS5%A4%C7rsh%A4%F2%CD%AD%B8%FA%A4%CB%A4%B9%A4%EB">http://mase.itc.nagoya-u.ac.jp/~hirano/pukiwiki/index.php?CentOS5%A4%C7rsh%A4%F2%CD%AD%B8%FA%A4%CB%A4%B9%A4%EB</a><br />
------------------------------------------------------------------------------<br />
第一原理計算に必要なライブラリの設定Ⅱ（Library set up）<br />
&nbsp; ◆ gfortran の場合（業者様向け &amp; 学生様向け）</p>

<p>&nbsp;&nbsp;A)&nbsp;「Applications」&rarr;「Ubuntu Software Center」で、右上にある検索の欄で、下記の項目を入力して対応するソフトをインストール。</p>

<p>&nbsp;&nbsp;&nbsp; 1)&nbsp;「build-essential」</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;2) 「libblas-dev」</p>

<p>&nbsp;&nbsp;&nbsp; 3) 「liblapack-dev」</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;4) 「fftw2」</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;5) 「fftw-dev」</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;6) 「libfftw3-3」</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;7) 「libfftw3-dev」</p>

<p>&nbsp;&nbsp;&nbsp; ◇ 並列化</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;1) 「blacs」 ※ -test 付いたものはインストールしなくてよい</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;2) 「scalapack」　※ -test 付いたものはインストールしなくてよい<br />
&nbsp;&nbsp;B)&nbsp;「Applications」&rarr;「Accessories」&rarr;「Terminal」<br />
&nbsp;&nbsp;&nbsp; 1) sudo apt-get install build-essential<br />
&nbsp;&nbsp;&nbsp; 2) sudo apt-get install libblas-dev<br />
&nbsp;&nbsp;&nbsp; 3) sudo apt-get install liblapack-dev<br />
&nbsp;&nbsp;&nbsp; 4) sudo apt-get install fftw2<br />
&nbsp;&nbsp;&nbsp; 5) sudo apt-get install fftw-dev<br />
&nbsp;&nbsp;&nbsp; 6) sudo apt-get install libfftw3-3<br />
&nbsp;&nbsp;&nbsp; 7) sudo apt-get install libfftw3-dev</p>

<p>&nbsp;&nbsp;&nbsp; ◇ 並列化</p>

<p>&nbsp;&nbsp;&nbsp; 1) sudo apt-get install libblacs-mpi1</p>

<p>&nbsp;&nbsp;&nbsp; 2) sudo apt-get install libblacs-mpi-dev</p>

<p>&nbsp;&nbsp;&nbsp; 3) sudo apt-get install libscalapack-mpi1</p>

<p>&nbsp;&nbsp;&nbsp; 4) sudo apt-get install libscalapack-mpi-dev</p>

<p>&nbsp;&nbsp;&nbsp; PVM</p>

<p>&nbsp;&nbsp;&nbsp; 1) sudo apt-get install blacs1-pvm</p>

<p>&nbsp;&nbsp;&nbsp; 2) sudo apt-get install blacs-pvm-dev</p>

<p>&nbsp;&nbsp;&nbsp; 3) sudo apt-get install libscalapack-pvm1</p>

<p>&nbsp;&nbsp;&nbsp; 4) sudo apt-get install libscalapack-pvm-dev</p>

<p><br />
&nbsp;&nbsp;最速の設定を目指す場合はGotoBLASやATLASでScalapackを作成する</p>

<p>&nbsp;&nbsp;FFT: 左欄の「ライブラリの設定」を参照<br />
&nbsp;&nbsp;BLACS: 左欄の「ライブラリの設定」を参照<br />
&nbsp;&nbsp;ScaLapack: 左欄の「ライブラリの設定」を参照<br />
<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; ◇ 並列化<br />
&nbsp;&nbsp;FFT: 左欄の「ライブラリの設定」を参照<br />
&nbsp;&nbsp;BLACS: 左欄の「ライブラリの設定」を参照<br />
&nbsp;&nbsp;ScaLapack: 左欄の「ライブラリの設定」を参照<br />
<br />
付録：MKL FFTW3（Phase のインストールマニュアルを参考）<br />
1) cd opt/intel/Compiler/11.0/084/mkl/interfaces/fftw3xf<br />
2) make lib32<br />
3) ライブラリファイルのlibfftw3xf_intel.a は /opt/intel/Compiler/11.0/084/mkl/lib/32 にある。<br />
※ 管理者権限が必要ないところにインストールすると上手く動作している。mkl を home にコピーしてコンパイルしてみるとよい。<br />
------------------------------------------------------------------------------<br />
第一原理計算のセットアップ PWscf<br />
&nbsp; ◆ gfortran の場合（業者様向け &amp; 学生様向け）<br />
&nbsp; ◇ 並列化</p>

<p>&nbsp;&nbsp;MPICH2 version 1.2.1<br />
&nbsp; 1) tar zxvf expresso-4.3.2.tar.gz<br />
&nbsp; 2) cd expresso-4.3.2<br />
&nbsp; 3) ./configure MPIF90=/usr/local/openmpi/bin/mpif90 CXX=g++ CC=gcc FC=gfortran F77=gfortran F90=gfortran BLAS_LIBS=&quot;-L/usr/lib -lblas&quot;&nbsp;LAPACK_LIBS=&quot;-L/usr/lib -llapack&quot;&nbsp;FFT_LIBS=&quot;-L/usr/lib -lfftw3&quot;<br />
&nbsp; 4) make all<br />
&nbsp; 5)&nbsp;mpirun -machinefile /home/*/hosts -np 2 /home/*/espresso-4.3.2/bin/pw.x&nbsp;&lt;atom.in&gt; atom.out にて計算が成功する。<br />
<br />
&nbsp;&nbsp;◇ 並列化</p>

<p>&nbsp; OpenMPI<br />
&nbsp;&nbsp;1) tar zxvf expresso-4.3.2.tar.gz<br />
&nbsp; 2) cd expresso-4.3.2<br />
&nbsp;&nbsp;3) ./configure MPIF90=/usr/local/openmpi/bin/mpif90 CXX=g++ CC=gcc FC=gfortran F77=gfortran F90=gfortran BLAS_LIBS=&quot;-L/usr/lib -lblas&quot; LAPACK_LIBS=&quot;-L/usr/lib -llapack&quot; FFT_LIBS=&quot;-L/usr/lib -lfftw3&quot;<br />
&nbsp; 4) make all<br />
&nbsp; 5) /usr/lib/openmpi/bin/mpirun -machinefile /home/*/hosts -np 2 /home/*/espresso-4.3.2/bin/pw.x &lt;atom.in&gt; atom.out&nbsp;<br />
<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; ◇ 並列化</p>

<p>&nbsp; OpenMP<br />
&nbsp;&nbsp;1) tar zxvf expresso-4.3.2.tar.gz<br />
&nbsp; 2) cd expresso-4.3.2<br />
&nbsp; 3) ./configure CXX=g++ CC=gcc FC=ifort F77=ifort F90=ifort&nbsp; --enable-openmp --with-internal-blas --with-internal-lapack --with-internal-fftw<br />
&nbsp; 4) make all<br />
&nbsp; 5)&nbsp;/home/*/espresso-4.3.2/bin/pw.x &lt;atom.in&gt; atom.out にて計算が成功する。<br />
&nbsp; ※ mpi に関するエラーが出る場合は、MPI_LIBS=&quot; &quot; とすると良い。<br />
<br />
&nbsp; ◇ 並列化&nbsp;</p>

<p>&nbsp; OpenMPI<br />
&nbsp; 1) tar zxvf&nbsp;expresso-4.3.2.tar.gz<br />
&nbsp; 2) cd&nbsp;expresso-4.3.2<br />
&nbsp; 3) ./configure MPIF90=/usr/local/openmpi/bin/mpif90 CXX=g++ CC=gcc FC=ifort F77=ifort F90=ifort --with-internal-blas --with-internal-lapack --with-internal-fftw<br />
&nbsp; 4) make all<br />
&nbsp; 5) /usr/local/openmpi/bin/mpirun -machinefile /home/*/hosts -np 2 /home/*/espresso-4.3.2/bin/pw.x &lt;atom.in&gt; atom.out<br />
<br />
参考：<a href="http://sourceforge.jp/magazine/08/12/24/123237/3">http://sourceforge.jp/magazine/08/12/24/123237/3</a><br />
<a href="http://www.misasa.okayama-u.ac.jp/~masami/pukiwiki/index.php?Quantum-Espresso%A4%CE%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%EBPC">http://www.misasa.okayama-u.ac.jp/~masami/pukiwiki/index.php?Quantum-Espresso%A4%CE%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%EBPC</a><br />
------------------------------------------------------------------------------<br />
第一原理計算のセットアップ CPMD<br />
&nbsp; ◆ gfortran の場合（業者様向け &amp; 学生様向け）<br />
&nbsp; ◇ 並列化</p>

<p sizcache="5" sizset="0">&nbsp;&nbsp;CPMD setup<br />
&nbsp; 1) download CPMD : <a href="http://cpmd.org/">http://cpmd.org/</a>&nbsp;<br />
&nbsp; 2) tar zxvf cpmd-v3_15_1.tgz<br />
&nbsp; 3) cd CPMD<br />
&nbsp; 4) CONFIGUREの中から適した環境のファイル名を探す<br />
&nbsp;&nbsp;&nbsp; ./mkconfig.sh&nbsp;LINUX-i686-FEDORA-MPI &gt; Makefile<br />
&nbsp;&nbsp;&nbsp;&nbsp;Makefile において<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LFLAGS=&#39;-L/usr/lib/ -llapack -lblas -lfftw&#39;</p>

<p sizcache="5" sizset="0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CC = /usr/local/openmpi/bin/mpicc&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FC = /usr/local/openmpi/bin/mpif77<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LD = /usr/local/openmpi/bin/mpif77</p>

<p sizcache="5" sizset="0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CPPFLAGS = -D__Linux -D__PGI -D__GNU -DFFT_FFTW -DPARALLEL -DMYRINET</p>

<p sizcache="5" sizset="0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mpifcc を /usr/local/openmpi/bin/mpicc へ</p>

<p sizcache="9" sizset="0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mpif77&nbsp;を /usr/local/openmpi/bin/mpif90 へ<br />
&nbsp; 5) make<br />
References<br />
[1] <a href="https://extras.csc.fi/chem/courses/cpmd/terminal-intro.pdf" sizcache="9" sizset="0">https://extras.csc.fi/chem/courses/cpmd/terminal-intro.pdf</a>　<br />
<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; ◇ 並列化</p>

<p sizcache="9" sizset="1">&nbsp; CPMD setup<br />
&nbsp; 1) download CPMD : http://cpmd.org/<br />
&nbsp; 2) tar zxvf cpmd-v3_15_1.tgz<br />
&nbsp; 3) cd CPMD<br />
&nbsp; 4) CONFIGUREの中から適した環境のファイル名を探す<br />
&nbsp;&nbsp;5)&nbsp;./mkconfig.sh PC-IFC-MPI &gt; Makefile<br />
&nbsp;&nbsp;&nbsp; Makefile において<br />
&nbsp;&nbsp;&nbsp;&nbsp;FFLAGS で -axM -tpp6 を削除<br />
&nbsp;&nbsp;&nbsp;&nbsp;LFLAGS = -L/home/*/intel/*/mkl/lib/ia32 -lmkl_blas95 -lmkl_lapack95 -lmkl_intel -lmkl_intel_thread -lmkl_core -lifcore -lguide -lpthread -lsvml -L/usr/lib -lfftw -lfftw_mpi<br />
&nbsp;&nbsp;&nbsp;&nbsp;mpif77 を /usr/local/openmpi/bin/mpif90 へ<br />
&nbsp; 5) make<br />
References<br />
[1] <a href="https://extras.csc.fi/chem/courses/cpmd/terminal-intro.pdf" sizcache="9" sizset="1">https://extras.csc.fi/chem/courses/cpmd/terminal-intro.pdf</a>　<br />
<br />
------------------------------------------------------------------------------<br />
第一原理計算のセットアップ ABINIT<br />
&nbsp;&nbsp;◆ gfortran の場合（業者様向け &amp; 学生様向け）<br />
&nbsp; ◇ 並列化</p>

<p>&nbsp;&nbsp;MPICH2<br />
&nbsp;&nbsp;1) tar zxvf abinit-6.8.1.tar.gz<br />
&nbsp;&nbsp;2) cd abinit-6.8.1<br />
&nbsp;&nbsp;3) ./configure CC=gcc FC=mpif90 --enable-gw-cutoff --enable-gw-dpc --enable-gw-optimal --enable-gw-wrapper --enable-vdwxc --enable-mpi&nbsp; LDFLAGS=-L/usr/lib LIBS=&quot;-llapack -lblas -lfftw3&quot; --with-trio-flavor=&quot;none&quot;&nbsp;--with-dft-flavor=&quot;none&quot;<br />
&nbsp;&nbsp;4) make multi multi_nprocs=2<br />
&nbsp; 5) make install<br />
&nbsp; 6)&nbsp;mpirun -machinefile /home/*/hosts -np 2 abinit &lt;case.files&gt; case.log<br />
&nbsp;<br />
&nbsp;&nbsp;◇ 並列化</p>

<p>&nbsp; OpenMPI<br />
&nbsp;&nbsp;1) tar zxvf abinit-6.8.1.tar.gz<br />
&nbsp; 2) cd abinit-6.8.1<br />
&nbsp; 3) ./configure --enable-gw-cutoff --enable-gw-dpc --enable-gw-optimal --enable-gw-wrapper --enable-vdwxc --enable-mpi CC=icc FC=/usr/lib/openmpi/bin/mpif90 LDFLAGS=&quot;-L/usr/lib&quot; LIBS=&quot;-llapack -lblas&quot; --with-trio-flavor=&quot;none&quot; --with-trio-flavor=&quot;none&quot; --with-dft-flavor=&quot;none&quot;<br />
&nbsp; 4) make multi multi_nprocs=2<br />
&nbsp; 5) make install<br />
&nbsp; 6) /usr/lib/openmpi/bin/mpirun -machinefile /home/*/hosts -np 2 abinit &lt;case.files&gt; case.log<br />
<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; ◇ 並列化</p>

<p>&nbsp;&nbsp;OpenMPI<br />
&nbsp;&nbsp;1) tar zxvf abinit-6.8.1.tar.gz<br />
&nbsp; 2) cd abinit-6.8.1<br />
&nbsp; 3) ./configure --enable-gw-cutoff --enable-gw-dpc --enable-gw-optimal --enable-gw-wrapper --enable-vdwxc --enable-mpi CC=icc FC=/usr/local/openmpi/bin/mpif90 LDFLAGS=&quot;-L/home/*/intel/*/mkl/lib/ia32&quot; LIBS=&quot;-lmkl_intel -lmkl_sequential -lmkl_core -lpthread&quot;&nbsp;--with-trio-flavor=&quot;none&quot;&nbsp;--with-dft-flavor=&quot;none&quot;&nbsp;--prefix=/home/user_name/abinit-6.8.1<br />
&nbsp; 4) make multi multi_nprocs=2<br />
&nbsp; 5) make install<br />
&nbsp; 6) /usr/local/openmpi/bin/mpirun -machinefile /home/*/hosts -np 2 /home/*/abinit-6.8.1/bin/abinit &lt;case.files&gt; case.log</p>

<p>&nbsp;</p>

<p sizcache="9" sizset="1">Abinit Band Structure maker</p>

<p sizcache="9" sizset="1">&nbsp; 1) cd /home/*/abinit-6.8.1/util/users</p>

<p sizcache="9" sizset="1">&nbsp; 2) python AbinitBandStructureMaker.py case.out</p>

<p sizcache="9" sizset="1">&nbsp; 3) python AbinitBandStructureMaker.py case.out.dbs</p>

<p sizcache="9" sizset="1">&nbsp; 4) xmgrace case.out.dbs.agr</p>

<p sizcache="9" sizset="1">※ manual : /home/*/abinit-6.8.1/doc/users<br />
<br />
<br />
EXC （準備中）<br />
&nbsp; OpenMPI<br />
&nbsp; 1) tar zxvf<br />
&nbsp; 2) cd<br />
&nbsp; 3) ./configure F90=mpif90 F90FLAGS=&quot;-O2&quot; CC=gcc --with-fftw3=&quot;/usr/lib/libfftw3.a&quot; --with-blas=&quot;/usr/lib/libblas.a&quot; --with-lapack=&quot;/usr/lib/liblapack.a&quot;<br />
&nbsp; 4) make<br />
&nbsp; 5) make tests<br />
&nbsp; 6) make install<br />
<br />
DP （準備中）<br />
&nbsp; OpenMPI<br />
&nbsp; 1) tar zxvf<br />
&nbsp; 2) cd<br />
&nbsp; 3) ./configure<br />
&nbsp; 4) make<br />
&nbsp; 5) make tests<br />
&nbsp; 6) make install<br />
<br />
BigDFT （準備中）<br />
&nbsp; OpenMPI<br />
&nbsp; 1) tar zxvf /home/*/Downloads/bigdft-1.5.2.tar.gz<br />
&nbsp; 2) cd bigdft-1.5.2<br />
◆ gfortranの場合　（gfortran でBLAS, LAPACKをコンパイルすることが必要)<br />
3) ./configure CXX=g++ CC=gcc F77=gfortran FC=mpif90 FCFLAGS=&quot;-fbounds-check -O2 -Wall&quot; --with-ext-linalg=&quot;-llapack -lblas&quot; --with-ext-linalg-path=&quot;-L/usr/lib&quot; --with-libabinit-path=&quot;/home/*/abinit-6.8.1/lib&quot;<br />
◆ Intel Fortran Compilerの場合<br />
3) ./configure CXX=icpc CC=icc F77=ifort FC=/usr/local/openmpi/bin/mpif90 FCFLAGS=&quot;-O2&quot; --with-ext-linalg=&quot;-lmkl_intel -lmkl_sequential -lmkl_core -lpthread&quot; --with-ext-linalg-path=&quot;-L/home/*/intel/*/mkl/lib/ia32&quot; --with-libabinit-path=&quot;/home/*/abinit-6.8.1/lib&quot;<br />
&nbsp; 4) make<br />
&nbsp; 5) cd tests<br />
&nbsp; 6) export run_parallel=&#39;mpirun -np 2&#39;<br />
&nbsp; 7) make check<br />
&nbsp; 8) cd ..<br />
&nbsp; 9) su<br />
&nbsp; 10) make install<br />
※ --with-libabinit-path=&quot;/home/*/abinit-6.8.1/lib&quot; は無い方が良いかもしれない。<br />
------------------------------------------------------------------------------<br />
第一原理計算のセットアップ Yambo<br />
&nbsp;&nbsp;◆ gfortran の場合（業者様向け &amp; 学生様向け）<br />
&nbsp; （NetCDF無しの場合）　（*はユーザー名にして下さい）<br />
&nbsp; (/home/centos5/PWscfでexpresso-4.3.2を解凍した場合)<br />
1) tar zxvf yambo-3.2.4-rev.17.tar.gz<br />
2) cd yambo-3.2.4-r.855<br />
&nbsp; 3) ./configure F77=gfortran FC=gfortran F90=gfortran MPIF=/usr/local/openmpi/bin/mpif90 MPICC=/usr/local/openmpi/bin/mpicc --with-iotk=&#39;/home/*/espresso-4.3.2/iotk&#39; --with-p2y=4.0<br />
&nbsp; 4) make yambo interfaces ypp<br />
&nbsp; 5) [X] PW (4.0) supportかを確認する。<br />
<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; （NetCDF無しの場合）（*はユーザー名にして下さい）<br />
&nbsp; (/home/centos5/PWscfでexpresso-4.3.2を解凍した場合)<br />
1) tar zxvf yambo-3.2.4-rev.17.tar.gz<br />
2) cd yambo-3.2.4-r.855<br />
&nbsp; 3) ./configure F77=ifort FC=ifort F90=ifort MPIF=/usr/local/openmpi/bin/mpif90&nbsp;MPICC=/usr/local/openmpi/bin/mpicc --with-iotk=&#39;/home/*/espresso-4.3.2/iotk&#39; --with-p2y=4.0<br />
&nbsp; 4) make yambo interfaces ypp<br />
&nbsp; 5) [X] PW (4.0) supportかを確認する。<br />
<br />
------------------------------------------------------------------------------<br />
第一原理計算のセットアップ SPRKKR<br />
&nbsp;&nbsp;◆ gfortran の場合（業者様向け &amp; 学生様向け）</p>

<p>　◇ 並列化</p>

<p sizcache="5" sizset="1">&nbsp; OpenMPI&nbsp;（下記で試したが、エラーが出る。コード自体を書き換えないと修正が無理のように思えた）<br />
&nbsp; 1) tar zxvf PUB*<br />
&nbsp; 2) 並列化のソフトによって下記のようにmake.incを書き換える<br />
&nbsp;&nbsp;&nbsp; LIB =&nbsp;-L/usr/local/lib -lblas -llapack -lpthread<br />
&nbsp;&nbsp;&nbsp;&nbsp;INCLUDE =&nbsp;-I/usr/local/openmpi/include</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;FFLAGS =&nbsp;-O3<br />
&nbsp;&nbsp;&nbsp;&nbsp;FC = /usr/local/openmpi/bin/mpif90 -c $(FFLAGS) $(INCLUDE)<br />
&nbsp;&nbsp;&nbsp;&nbsp;LINK = /usr/local/openmpi/bin/mpif90 $(FFLAGS) $(INCLUDE)<br />
&nbsp; 3)&nbsp;make scfmpi　（並列化しない場合は、make scf)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上記の作業で binary が作成される。PCが 4 core の場合は下記となる<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mpirun -np 4 kkrscf5.4MPI INPUT&gt;OUTPUT<br />
&nbsp;&nbsp;4) この他にもプログラムを作成することができる<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a)&nbsp;make&nbsp;all<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen, scf, embgen, embscf が作成される<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b) make&nbsp;allmpi<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scfmpi, embscfmpi, specmpi が作成される<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c)&nbsp;Makefile を見ると一応下記のコマンドがある<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make genmpi, make embscfmpi, make chi,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; make opm, make opmmpi, make spec<br />
&nbsp; 5) 再度コンパイルする場合には、make clean を用いる</p>

<p>&nbsp; <a href="http://linux.die.net/man/1/gfortran">http://linux.die.net/man/1/gfortran</a></p>

<p>&nbsp;</p>

<p>&nbsp;◆ Intel Compiler をインストールする場合（学生様向け）</p>

<p>&nbsp; ◇ 並列化</p>

<p>&nbsp; OpenMPI の場合</p>

<p>&nbsp;&nbsp;1) tar zxvf PUB*<br />
&nbsp; 2) 並列化のソフトによって下記のようにmake.incを書き換える<br />
&nbsp;&nbsp;&nbsp; LIB =&nbsp;-L/home/*/intel/*/mkl/lib/ia32 -lmkl_intel -lmkl_sequential -lmkl_core -lpthread<br />
&nbsp;&nbsp;&nbsp;&nbsp;INCLUDE =&nbsp;-I/usr/local/openmpi/include<br />
&nbsp;&nbsp;&nbsp;&nbsp;FC = /usr/local/openmpi/bin/mpif90 -c $(FFLAGS) $(INCLUDE)<br />
&nbsp;&nbsp;&nbsp;&nbsp;LINK = /usr/local/openmpi/bin/mpif90 $(FFLAGS) $(INCLUDE)<br />
&nbsp; 3)&nbsp;make scfmpi　（並列化しない場合は、make scf)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上記の作業で binary が作成される。PCが 4 core の場合は下記となる<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mpirun -np 4 kkrscf5.4MPI INPUT&gt;OUTPUT<br />
&nbsp;&nbsp;4) この他にもプログラムを作成することができる<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a)&nbsp;make&nbsp;all<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen, scf, embgen, embscf が作成される<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b) make&nbsp;allmpi<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scfmpi, embscfmpi, specmpi が作成される<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c)&nbsp;Makefile を見ると一応下記のコマンドがある<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make genmpi, make embscfmpi, make chi,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; make opm, make opmmpi, make spec<br />
&nbsp; 5) 再度コンパイルする場合には、make clean, make reset を用いる<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; よく分からなければ、再度コンパイルする前に make clean を入力しておけばよい。</p>

<p>&nbsp;</p>

<p>　◇ 並列化</p>

<p>&nbsp; OpenMPI +Scalapack の場合</p>

<p>&nbsp;&nbsp;1) tar zxvf PUB*<br />
&nbsp; 2) 並列化のソフトによって下記のようにmake.incを書き換える<br />
&nbsp;&nbsp;&nbsp; LIB = -L/home/centos6/intel/composerxe-2011.4.191/mkl/lib/ia32 -lmkl_intel -lmkl_scalapack_core -lmkl_blacs_openmpi -lmkl_solver -lmkl_sequential -lmkl_core -lmkl_cdft_core -lpthread</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;INCLUDE =&nbsp;-I/usr/local/openmpi/include<br />
&nbsp;&nbsp;&nbsp;&nbsp;FC = /usr/local/openmpi/bin/mpif90 -c $(FFLAGS) $(INCLUDE)<br />
&nbsp;&nbsp;&nbsp;&nbsp;LINK = /usr/local/openmpi/bin/mpif90 $(FFLAGS) $(INCLUDE)<br />
&nbsp; 3)&nbsp;make scfmpi　（並列化しない場合は、make scf)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上記の作業で binary が作成される。PCが 4 core の場合は下記となる<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mpirun -np 4 kkrscf5.4MPI INPUT&gt;OUTPUT<br />
&nbsp;&nbsp;4) この他にもプログラムを作成することができる<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a)&nbsp;make&nbsp;all<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen, scf, embgen, embscf が作成される<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b) make&nbsp;allmpi<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scfmpi, embscfmpi, specmpi が作成される<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c)&nbsp;Makefile を見ると一応下記のコマンドがある<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make genmpi, make embscfmpi, make chi,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; make opm, make opmmpi, make spec<br />
&nbsp; 5) 再度コンパイルする場合には、make clean, make reset を用いる<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; よく分からなければ、再度コンパイルする前に make clean を入力しておけばよい。</p>

<p sizcache="9" sizset="2">参考文献：<a href="http://ebert.cup.uni-muenchen.de/index.php?option=com_remository&amp;Itemid=4&amp;func=startdown&amp;id=155&amp;lang=de" sizcache="9" sizset="2">http://ebert.cup.uni-muenchen.de/index.php?option=com_remository&amp;Itemid=4&amp;func=startdown&amp;id=155&amp;lang=de</a></p>

<p>------------------------------------------------------------------------------<br />
第一原理計算のセットアップ WIEN2k<br />
◆ gfortran の場合（業者様向け &amp; 学生様向け）<br />
◇ 並列化&nbsp;</p>

<p>&nbsp; 1) tar -xvf WIEN2k_11.tar<br />
&nbsp; 2) gunzip *.gz<br />
&nbsp; 3) chmod +x ./expand_lapw<br />
&nbsp; 4) ./expand_lapw<br />
&nbsp; 5) ./siteconfig_lapw<br />
&nbsp; 6) V gfortran + gotolib を選択<br />
&nbsp; 7) gfortran, gcc を入力<br />
&nbsp; 8) r を押して、-llapack_lapw -lblas_lapw -lblas -llapack</p>

<p>&nbsp;&nbsp;&nbsp; l を押して、$(FOPT) -L../SRC_lib</p>

<p>&nbsp; 9)&nbsp;shared&nbsp;Memory&nbsp;Architecture?&nbsp;(y/n):&nbsp;n</p>

<p>&nbsp; 10)&nbsp;&nbsp;Remote&nbsp;shell&nbsp;(defaults&nbsp;is&nbsp;ssh) =&nbsp;rsh<br />
&nbsp; 11) ./userconfig_lapw&nbsp;<br />
&nbsp; 12) bash<br />
&nbsp; 13) w2web</p>

<p>&nbsp;</p>

<p>&nbsp; ◆ gfortran + Intel MKLの場合（業者様向け &amp; 学生様向け）<br />
&nbsp; ◇ 並列化&nbsp;</p>

<p>&nbsp; OpenMPI<br />
&nbsp;&nbsp;1) tar -xvf WIEN2k_11.tar<br />
&nbsp; 2) gunzip *.gz<br />
&nbsp; 3) chmod +x ./expand_lapw<br />
&nbsp; 4) ./expand_lapw<br />
&nbsp; 5) ./siteconfig_lapw<br />
&nbsp; 6) V gfortran + gotolib を選択<br />
&nbsp; 7) gfortran, gcc を入力</p>

<p>&nbsp; 8)&nbsp;O&nbsp;&nbsp; specify compiler options, BLAS and LAPACK</p>

<p>&nbsp;&nbsp;&nbsp; O&nbsp;&nbsp; Compiler options:&nbsp;-ffree-form -O2</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp; L&nbsp;&nbsp; Linker Flags: $(FOPT) -L$(MKLROOT)/lib/$(MKL_TARGET_ARCH) -pthread<br />
&nbsp;&nbsp;&nbsp;&nbsp; P&nbsp;&nbsp; Preprocessor flags&nbsp;&#39;-DParallel&#39;<br />
&nbsp;&nbsp;&nbsp;&nbsp; R&nbsp;&nbsp; R_LIB (LAPACK+BLAS):&nbsp;-lmkl_intel -lmkl_lapack95 -lmkl_blas95 -lmkl_core -lmkl_sequential -lmkl_gf</p>

<p>&nbsp; 9)&nbsp;shared&nbsp;Memory&nbsp;Architecture?&nbsp;(y/n):&nbsp;y</p>

<p>&nbsp; 10) Do you have MPI and Scalapack installed and......(y/n): y<br />
&nbsp;&nbsp;&nbsp; Your compiler: /usr/lib/openmpi/bin/mpif90<br />
&nbsp;&nbsp;&nbsp; RP&nbsp; RP_LIB(SCALAPACK+PBLAS): -lmkl_scalapack_core -lmkl_solver -lmkl_blacs_openmpi -L/usr/lib -lfftw_mpi -lfftw $(R_LIBS)<br />
&nbsp;&nbsp;&nbsp;&nbsp;FP&nbsp; FPOPT(par.comp.options): -ffree-form -O2</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;MP&nbsp; MPIRUN commando: mpirun -np _NP_ -machinefile _HOSTS_ _EXEC_<br />
&nbsp; 11) ./userconfig_lapw&nbsp;<br />
&nbsp; 12) bash<br />
&nbsp; 13) w2web</p>

<p>&nbsp;<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; ◇ 並列化</p>

<p>&nbsp; OpenMP</p>

<p sizcache="5" sizset="0">&nbsp;&nbsp;1) tar -xvf WIEN2k_11.tar<br />
&nbsp; 2) gunzip *.gz<br />
&nbsp; 3) chmod +x ./expand_lapw<br />
&nbsp; 4) ./expand_lapw<br />
&nbsp; 5) ./siteconfig_lapw<br />
&nbsp; 6) ヴァージョンに合わせてI, J, K, K1 を選択（ここでは12&nbsp;のIを選択してみる）<br />
&nbsp; 7) ifort, icc を入力<br />
&nbsp; 8)&nbsp;Current settings:<br />
&nbsp;&nbsp;&nbsp; O Compiler options: -FR -mp1 -w -prec_div -pc80 -pad -ip -DINTEL_VML -traceback<br />
&nbsp;&nbsp;&nbsp; L Linker Flags: $(FOPT)&nbsp; -L$(MKLROOT)/lib/$(MKL_TARGET_ARCH) -pthread</p>

<p sizcache="9" sizset="3">&nbsp;&nbsp;&nbsp;&nbsp;P Preprocessor flags &#39;-DParallel&#39;<br />
&nbsp;&nbsp;&nbsp;&nbsp;R R_LIB (LAPACK+BLAS): -lmkl_intel -lmkl_intel_thread -lmkl_core -lpthread -openmp<br />
&nbsp;&nbsp;9) Shared Memory Architecture? (y/n): y<br />
&nbsp;&nbsp;10) Do you have MPI and Scalapack installed and......(y/n): n<br />
&nbsp;&nbsp;11) ./userconfig_lapw&nbsp;<br />
&nbsp;&nbsp;12) bash<br />
&nbsp;&nbsp;13) w2web<br />
&nbsp; ※ ./userconfig_lapwの後、.bashrc を開いて、export OMP_NUM_THREADS= の後にスレッドの数 を書き入れる。<br />
参考HP : <a href="http://xinhuolin.web.officelive.com/Wien2kinUbuntu.aspx" sizcache="9" sizset="3">http://xinhuolin.web.officelive.com/Wien2kinUbuntu.aspx</a><br />
参考文献 : <a href="http://www.ghfecher.de/Fecher_CompileIntel.pdf" sizcache="9" sizset="4">http://www.ghfecher.de/Fecher_CompileIntel.pdf</a>&nbsp;</p>

<p sizcache="5" sizset="0">&nbsp;</p>

<p>　◇ 並列化</p>

<p>&nbsp; OpenMPI&nbsp;</p>

<p>&nbsp;&nbsp;1) tar -xvf WIEN2k_11.tar<br />
&nbsp;&nbsp;2) gunzip *.gz<br />
&nbsp;&nbsp;3) chmod +x ./expand_lapw<br />
&nbsp;&nbsp;4) ./expand_lapw<br />
&nbsp;&nbsp;5) ./siteconfig_lapw<br />
&nbsp;&nbsp;6) ヴァージョンに合わせてI, J, K, K1 を選択（ここでは 12 のIを選択する）<br />
&nbsp; 7) ifort, icc を入力<br />
&nbsp; 8) Current settings:<br />
&nbsp;&nbsp;&nbsp; O Compiler options: -FR -mp1 -w -prec_div -pc80 -pad -ip -DINTEL_VML -traceback<br />
&nbsp;&nbsp;&nbsp; L Linker Flags: $(FOPT) $(FOPT) -L$(MKLROOT)/lib/$(MKL_TARGET_ARCH) -pthread</p>

<p sizcache="5" sizset="0">&nbsp;&nbsp;&nbsp; P Preprocessor flags &#39;-DParallel&#39;<br />
&nbsp;&nbsp;&nbsp; R R_LIB (LAPACK+BLAS): -lmkl_intel -lmkl_intel_thread -lmkl_core -openmp -lpthread<br />
&nbsp; 9) Shared Memory Architecture? (y/n): y<br />
&nbsp; 10) Do you have MPI and Scalapack installed and......(y/n): y<br />
&nbsp;&nbsp;&nbsp; Your compiler: /usr/local/openmpi/bin/mpif90<br />
&nbsp;&nbsp;&nbsp; RP RP_LIB(SCALAPACK+PBLAS): -lmkl_scalapack_core -lmkl_solver -lmkl_blacs_openmpi -L/usr/local/lib -lfftw_mpi -lfftw $(R_LIBS)</p>

<p sizcache="5" sizset="0">　　FP FPOPT(par.comp.options): $(FOPT) -FR -mp1 -w -prec_div -pc80 -pad -ip -DINTEL_VML -traceback&nbsp;</p>

<p>&nbsp; 11) ./userconfig_lapw&nbsp;<br />
&nbsp; 12) bash<br />
&nbsp; 13) w2web</p>

<p>&nbsp;</p>

<p>&nbsp; BoltzTraP&nbsp;</p>

<p>&nbsp; 1) tar xvf BoltzTraP_1.20.tar.bz2&nbsp;</p>

<p>&nbsp;&nbsp;2)&nbsp;cd&nbsp;boltztrap-1.2.0<br />
&nbsp; 3) cd src</p>

<p>&nbsp; 4) 解凍されたファイルで、src と書かれたファイルを開く<br />
&nbsp; 5) Makefileを書き換える<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A) gfortran</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a) Netlib</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDFLAGS = -L/usr/lib</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LIBS = -llapack -lblas</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b) ATLAS</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDFLAGS = -L/usr/local/atlas/lib</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LIBS = -llapack_netlib_atlas -lblas_atlas -latlas</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c) GotoBLAS</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDFLAGS = -L/usr/local/lib</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LIBS = -lgoto2 -lpthread</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B) Intel&nbsp;compiler　(調査中)</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FC =&nbsp;ifort</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FOPT = -FR -mp1 -w -prec_div -pc80 -pad -ip -DINTEL_VML<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LDFLAGS =&nbsp;&nbsp;$(FOPT) -L/home/*/intel/mkl/lib/ia32 -pthread -i-static</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LIBS = -lmkl_intel -lmkl_sequential -lmkl_core -lpthread<br />
&nbsp; 6)&nbsp;make<br />
------------------------------------------------------------------------------<br />
&nbsp;第一原理計算のセットアップ exciting　（FLAPW）</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;◆ gfortran の場合（業者様向け &amp; 学生様向け）<br />
&nbsp;&nbsp;&nbsp;&nbsp;◇ 並列化</p>

<p>&nbsp;&nbsp;&nbsp;1)&nbsp;tar&nbsp;zxvf&nbsp;exciting.helium.2010.12.17.gz</p>

<p>&nbsp;&nbsp;&nbsp;2)&nbsp;cd&nbsp;exciting</p>

<p>&nbsp;&nbsp;&nbsp;3)&nbsp;make</p>

<p>&nbsp;&nbsp;&nbsp;4)&nbsp;5 gfortran を選択</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enter the number of the platform that suites your system best:&nbsp; 5</p>

<p>&nbsp;&nbsp;&nbsp;5) Build MPI binary ?&nbsp;yes</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Select the mechanism to include MPI interface variables<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 use MPI module (f90 interfaces) recommended if available</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;にて 1 を入力</p>

<p>&nbsp;&nbsp;&nbsp;6) Build SMP lib binary (yes/No)&nbsp;yes</p>

<p>&nbsp;&nbsp;&nbsp;bin の中には、excitingmpi, excitingser が生成されている。</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; ◇ 並列化<br />
------------------------------------------------------------------------------<br />
第一原理計算のセットアップ CASINO<br />
&nbsp; ◆ gfortran の場合（業者様向け &amp; 学生様向け）<br />
&nbsp; ◇ 並列化</p>

<p>&nbsp;&nbsp;CASINO（CASINO_v2.6_standard.tar.tar）<br />
&nbsp; 1) tar zxvf CASINO*<br />
&nbsp; 2) cd CASINO<br />
&nbsp; 3) .bashrc にて下記を加える。QMC_ARCH ではREADME_ARCHから選択する。<br />
CASINO/arch/make.inc の中にも対応する名称が.inc付きで書かれている。<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; export QMC_ARCH=&quot;linuxpc-gcc-parallel&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; export PATH=$PATH:$HOME/CASINO/bin_qmc<br />
&nbsp;&nbsp;4)&nbsp;bash<br />
&nbsp; 5) make<br />
<br />
&nbsp; ◆ Intel Compiler をインストールする場合（学生様向け）<br />
&nbsp; ◇ 並列化</p>

<p>&nbsp; CASINO（CASINO_v2.6_standard.tar.tar）<br />
&nbsp; 1) tar zxvf CASINO*<br />
&nbsp; 2) cd CASINO<br />
&nbsp; 3) .bashrc にて下記を加える。QMC_ARCH ではREADME_ARCHから選択する。<br />
CASINO/arch/make.inc の中にも対応する名称が.inc付きで書かれている。<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; export QMC_ARCH=&quot;linuxpc-ifort-parallel&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; export PATH=$PATH:$HOME/CASINO/bin_qmc<br />
&nbsp; 4) bash<br />
&nbsp; 5) make<br />
------------------------------------------------------------------------------</p>

<p>ubuntuの利用には下記参考文献が役に立つかもしれない（未調査）。</p>

<p><a href="http://xenolith.image.coocan.jp/ubuntu_linux.html">http://xenolith.image.coocan.jp/ubuntu_linux.html</a></p>

<p>------------------------------------------------------------------------------</p>
