Lammps (phonon calculation) (https://lammps.sandia.gov/)<br />
------------------------------------------------------------------------------<br />
■ 注意事項<br />
<br />
・python 2 のサポートが2020年に終了するため、Renormalization の計算が可能な DynaPhoPy関連のコードを2019年内にインストールしておくことをお勧めします。2019年であればubuntu 18.04 LTSがまだ使われているので下記の記載の通りに行えばよいです。<br />
・lammpsに入れられているphana、またはalamodeやphonolammps(+DynaPhoPy)の利用をおすすめする<br />
・alamodeやDynaPhoPyなどはVASPもサポートしている。lammpsで目的のポテンシャルが見つからない場合は、VASPの利用を検討することが必要になる。ただし、DynaPhoPyでのRenormalizationは第一原理MD（第一原理分子動力学法）で計算する必要があるためかなりの計算時間がかかる。フォノンでのバンド分散で負の値の結果が得られるような場合には、このRenormalizationを行って各温度での分散関係を確かめてみることが役に立つ場合もある（lammps用の正確なポテンシャルを作る能力がもしあなたにあれば多くの物質で重要なデータを提供できるでしょう）<br />
・alamodeを用いたlammpsやgulpでの計算も可能です。私の場合、githubから取得したalamdeでは計算に失敗してしまったので、他のURLからのデータで成功した方法を記載しておきます<br />
・それぞれのコードはそれぞれ特徴的な機能を有しているため、phana、alamode, phonolammps(+DynaPhoPy)、ShengBTEなど多くのコードを使えるようになると研究の幅が広がると思われます。例えば、alamodeは、自己無撞着フォノン（SCPH)理論に基づいて、4次の非調和効果が繰り込まれたフォノン振動数を計算して、ソフトモードの温度依存性や高温相のフォノン・熱伝導率計算、構造の安定性の評価が可能になっています。PhonTSはVCAの計算が可能<br />
------------------------------------------------------------------------------<br />
■ Install (ubuntu 18.04 LTS (64 bit) on windows 10 (64 bit))<br />
<br />
□ install (easy method) (2019/05/14)<br />
1. sudo apt-get install lammps<br />
2. which lammps<br />
&nbsp; /usr/bin/lammps<br />
<br />
◇ Usage<br />
1. mpirun -np 6 lammps &lt; case.in<br />
&nbsp; ※ aireboやeam/alloyなどが動作する<br />
&nbsp; ※ [LAMMPS tutorials](https://icme.hpc.msstate.edu/mediawiki/index.php/LAMMPS_tutorials)の動作も確認<br />
<br />
◇ remove (削除したい場合)<br />
1. sudo apt-get remove lammps<br />
------------------------------------------------------------------------------<br />
■ Install (ubuntu 18.04 LTS (64 bit) on windows 10 (64 bit))<br />
<br />
◇ Install (lammps)<br />
1. git clone git://github.com/lammps/lammps.git&nbsp;<br />
2. cd ~/lammps/src<br />
3. make package-status<br />
4. make yes-MANYBODY yes-MOLECULE yes-KSPACE yes-OPT yes-USER-MISC yes-USER-PHONON<br />
5. make serial<br />
&nbsp; (or make mpi)<br />
※ you can ignore &quot;cp: cannot stat...&quot;<br />
-----<br />
Installing package MANYBODY<br />
&nbsp; updating package OPT<br />
&nbsp; updating package USER-MISC<br />
Installing package MOLECULE<br />
&nbsp; updating package USER-MISC<br />
Installing package KSPACE<br />
&nbsp; updating package OPT<br />
&nbsp; updating package USER-PHONON<br />
cp: cannot stat &#39;third_order.cpp&#39;: No such file or directory<br />
&nbsp; updating src/third_order.cpp<br />
cp: cannot stat &#39;third_order.h&#39;: No such file or directory<br />
&nbsp; updating src/third_order.h<br />
Installing package OPT<br />
Installing package USER-MISC<br />
Installing package USER-PHONON<br />
cp: cannot stat &#39;third_order.cpp&#39;: No such file or directory<br />
cp: cannot stat &#39;third_order.h&#39;: No such file or directory<br />
-----<br />
<br />
------------------------------<br />
◇ Install (phana)<br />
1. cd ~/lammps/tools/phonon<br />
2. make<br />
<br />
◇ phonon calculation<br />
1. cd ~/lammps/examples/USER/phonon<br />
2. cd 3-3D-FCC-Cu-EAM/<br />
3. ~/lammps/src/lmp_serial &lt; in.EAM3D<br />
4. gedit in.disp<br />
-----<br />
1<br />
1<br />
2<br />
disp.dat<br />
0 &nbsp; 0 &nbsp;0 &nbsp; &nbsp; &nbsp; ! Gamma<br />
0.5 0 &nbsp;0.5 &nbsp; &nbsp; ! X<br />
10<br />
0.5 0 &nbsp; &nbsp;0.5 &nbsp; ! X<br />
0.5 0.25 0.75 &nbsp;! W<br />
5<br />
0.5 0.25 0.75 &nbsp;! W<br />
0.5 0 &nbsp; &nbsp;0.5 &nbsp; ! X<br />
5<br />
0.5 1. &nbsp; 0.5 &nbsp; ! X&#39;<br />
0 &nbsp; 0 &nbsp; &nbsp;0 &nbsp; &nbsp; ! Gamma<br />
15<br />
0 &nbsp; 0 &nbsp; &nbsp;0 &nbsp; &nbsp; ! Gamma<br />
0.5 0.5 &nbsp;0.5 &nbsp; ! L<br />
10<br />
q<br />
0<br />
-----<br />
5. ~/lammps/tools/phonon/phana CuPhonon.bin.6500000 &lt; in.disp<br />
6. gnuplot &nbsp;plot.disp<br />
7. evince &nbsp; pdisp.eps<br />
8. gedit in.dos<br />
-----<br />
1<br />
1<br />
1<br />
80 80 80<br />
0 7.5<br />
100<br />
n<br />
dos.dat<br />
0<br />
-----<br />
9. ~/lammps/tools/phonon/phana CuPhonon.bin.6500000 &lt; in.dos<br />
10. gnuplot plot.dos<br />
11. evince pdos.eps<br />
<br />
※ Info (input file : output)<br />
1: Please input the # of iterations to enforce ASR [1]:<br />
1: Your choice [1]: Your &nbsp;selection: 1<br />
1: Your &nbsp;selection: 1<br />
<br />
<br />
------------------------------<br />
◇ Install (phana with spglib)<br />
1. cd ~/lammps/tools/phonon<br />
2. gedit Makefile<br />
-----before<br />
# UFLAG &nbsp;= -DUseSPG<br />
# SPGINC = -I/opt/libs/spglib/1.8.2/include<br />
# SPGLIB = -L/opt/libs/spglib/1.8.2/lib -lsymspg<br />
-----<br />
-----after<br />
UFLAG &nbsp;= -DUseSPG<br />
SPGINC = -I$(HOME)/spglib/include<br />
SPGLIB = -L$(HOME)/spglib/lib -Wl,--rpath=$(HOME)/spglib/lib -lsymspg<br />
-----<br />
3. make clean<br />
4. make<br />
<br />
◇ phonon calculation<br />
1. cd ~/lammps/examples/USER/phonon<br />
2. cd 3-3D-FCC-Cu-EAM/<br />
3. ~/lammps/src/lmp_serial &lt; in.EAM3D<br />
4. gedit in.disp<br />
-----<br />
1<br />
1<br />
2<br />
1<br />
disp.dat<br />
0 &nbsp; 0 &nbsp;0 &nbsp; &nbsp; &nbsp; ! Gamma<br />
0.5 0 &nbsp;0.5 &nbsp; &nbsp; ! X<br />
10<br />
0.5 0 &nbsp; &nbsp;0.5 &nbsp; ! X<br />
0.5 0.25 0.75 &nbsp;! W<br />
5<br />
0.5 0.25 0.75 &nbsp;! W<br />
0.5 0 &nbsp; &nbsp;0.5 &nbsp; ! X<br />
5<br />
0.5 1. &nbsp; 0.5 &nbsp; ! X&#39;<br />
0 &nbsp; 0 &nbsp; &nbsp;0 &nbsp; &nbsp; ! Gamma<br />
15<br />
0 &nbsp; 0 &nbsp; &nbsp;0 &nbsp; &nbsp; ! Gamma<br />
0.5 0.5 &nbsp;0.5 &nbsp; ! L<br />
10<br />
q<br />
0<br />
-----<br />
5. ~/lammps/tools/phonon/phana CuPhonon.bin.6500000 &lt; in.disp<br />
6. gnuplot &nbsp;plot.disp<br />
7. evince &nbsp; pdisp.eps<br />
8. gedit in.dos<br />
-----<br />
1<br />
1<br />
1<br />
80 80 80<br />
2<br />
0 7.5<br />
100<br />
n<br />
dos.dat<br />
0<br />
-----<br />
9. ~/lammps/tools/phonon/phana CuPhonon.bin.6500000 &lt; in.dos<br />
10. gnuplot plot.dos<br />
11. evince pdos.eps<br />
<br />
◇ phonon calculation<br />
1. cd ~/lammps/examples/USER/phonon<br />
2. cd 3-3D-FCC-Cu-EAM/<br />
3. ~/lammps/src/lmp_serial &lt; in.EAM3D<br />
4. ~/lammps/tools/phonon/phana CuPhonon.bin.6500000 &lt; in.disp2<br />
5. gnuplot plot.disp<br />
6. evince pdisp.eps<br />
------------------------------------------------------------------------------<br />
■ dump2phonon<br />
(https://github.com/lingtikong/dump2phonon)<br />
<br />
□ Insall<br />
1. git clone https://github.com/lingtikong/dump2phonon.git<br />
2. cd dump2phonon]<br />
3. gedit Makefile<br />
-----before<br />
# compiler and flags<br />
CC &nbsp; &nbsp; = /opt/intel/bin/icc<br />
#CC &nbsp; &nbsp; = g++ -Wno-unused-result<br />
LINK &nbsp; = $(CC) ${PARALIB}<br />
CFLAGS = -O3 $(UFLAG) $(DEBUG)<br />
#<br />
OFLAGS = -O3 $(DEBUG)<br />
INC &nbsp; &nbsp;= $(FFTINC) $(LPKINC) $(USRINC) $(VoroINC) $(GslINC)<br />
LIB &nbsp; &nbsp;= $(FFTLIB) $(LPKLIB) $(USRLIB) $(VoroLIB) $(GslLIB)<br />
#<br />
# fftw 3 library; not needed by this code<br />
FFTINC &nbsp; &nbsp;= -I/opt/libs/fftw/3.2.2/include<br />
FFTLIB &nbsp; &nbsp;= -L/opt/libs/fftw/3.2.2/lib -lfftw3<br />
<br />
${EXE}: &nbsp;$(OBJ)<br />
&nbsp; &nbsp; &nbsp; &nbsp; $(LINK) $(OFLAGS) $(OBJ) $(LIB) -o $@<br />
-----<br />
-----after<br />
# compiler and flags<br />
#CC &nbsp; &nbsp; = /opt/intel/bin/icc<br />
CC &nbsp; &nbsp; = g++ -Wno-unused-result<br />
LINK &nbsp; = $(CC) ${PARALIB}<br />
CFLAGS = -O3 $(UFLAG) $(DEBUG)<br />
#<br />
OFLAGS = -O3 $(DEBUG)<br />
INC &nbsp; &nbsp;= $(FFTINC) $(LPKINC) $(USRINC) $(VoroINC) $(GslINC)<br />
LIB &nbsp; &nbsp;= $(FFTLIB) $(LPKLIB) $(USRLIB) $(VoroLIB) $(GslLIB)<br />
#<br />
# fftw 3 library; not needed by this code<br />
FFTINC &nbsp; &nbsp;= -I/usr/include<br />
FFTLIB &nbsp; &nbsp;= -L/usr/lib/x86_64-linux-gnu -lfftw3<br />
-----<br />
4. make<br />
5. ./d2p -h<br />
<br />
◇ Usage (no check)<br />
1. gedit control-file<br />
-----<br />
units &nbsp; &nbsp; &nbsp; lj<br />
sysdim &nbsp; &nbsp; &nbsp;3<br />
temperature 298<br />
mapfile &nbsp; &nbsp; map.in<br />
prefix &nbsp; &nbsp; &nbsp;phonon<br />
nskip &nbsp; &nbsp; &nbsp; 0<br />
-----<br />
2. d2p &nbsp;control-file &nbsp; dump-file<br />
------------------------------------------------------------------------------<br />
■ phonolammps (Phonon anharmonic properties from Molecular Dynamics)<br />
(http://abelcarreras.github.io/DynaPhoPy/index.html)<br />
(https://pypi.org/project/dynaphopy/1.16.4/)<br />
(https://github.com/abelcarreras/DynaPhoPy) guitub<br />
<br />
□ Install (DynaPhoPy)<br />
1. git clone https://github.com/abelcarreras/DynaPhoPy.git<br />
2. cd DynaPhoPy<br />
3. pip install -r requirements.txt --user<br />
4. python setup.py install --user<br />
&nbsp; (pip install dynaphopy --user)<br />
※ ($HOME/.local/lib/python2.7/site-packages)<br />
<br />
□ Install (seekpath)<br />
1. pip install seekpath<br />
<br />
□ Install (phonolammps)<br />
(https://github.com/abelcarreras/phonolammps)<br />
1. git clone https://github.com/abelcarreras/phonolammps.git<br />
2. cd phonolammps<br />
3. python setup.py install --user<br />
4. pip install phonoLAMMPS --user<br />
※ ($HOME/.local/lib/python2.7/site-packages)<br />
<br />
□ Install (lammps for python)<br />
1. git clone git://github.com/lammps/lammps.git<br />
2. cd ~/lammps/src<br />
3. make package-status<br />
4. make yes-MANYBODY yes-MOLECULE yes-KSPACE yes-USER-MISC yes-PYTHON<br />
5. make serial mode=shlib LMP_INC=&quot;-DLAMMPS_EXCEPTIONS&quot;<br />
&nbsp; (or make mpi mode=shlib LMP_INC=&quot;-DLAMMPS_EXCEPTIONS&quot;)<br />
6. make install-python<br />
◇ Test<br />
1. export PYTHONPATH=/usr/local/lib/python2.7/site-packages/:$PYTHONPATH<br />
2. python<br />
&nbsp; import lammps<br />
※ Using Python in LAMMPS<br />
&nbsp; https://lammps.sandia.gov/workshops/Aug17/pdf/berger.pdf<br />
&nbsp;&nbsp;<br />
□ Install (lammps for DynaPhoPy)<br />
1. git clone git://github.com/lammps/lammps.git<br />
2. cd ~/lammps/src<br />
3. make package-status<br />
4. make yes-MANYBODY yes-MOLECULE yes-KSPACE yes-USER-MISC yes-PYTHON<br />
5. make serial<br />
<br />
◇ Examples (LAMMPS calculations)<br />
0. export PYTHONPATH=/usr/local/lib/python2.7/site-packages/:$PYTHONPATH<br />
1. cd ~/phonolammps/examples/Si<br />
2. phonolammps in.lammps --dim 2 2 2 -pa 0.0 0.5 0.5 0.5 0.0 0.5 0.5 0.5 0.0 -c POSCAR_unitcell -p<br />
<br />
◇ Examples (LAMMPS calculations)<br />
0. export PYTHONPATH=/usr/local/lib/python2.7/site-packages/:$PYTHONPATH<br />
1. cd ~/phonolammps/examples/GaN<br />
2. phonolammps in.lammps -c POSCAR_unitcell --dim 2 2 2 -p<br />
3. phonolammps in.lammps -c POSCAR_unitcell --dim 2 2 2 -p -t 800<br />
<br />
◇ Examples (LAMMPS calculation)<br />
1. cd ~/DynaPhoPy/examples/GaN_lammps<br />
2. dynaphopy input_gan -c_lammps data.gan --dim 3 3 3<br />
3. $HOME/lammps/src/lmp_serial &lt; in.md_pos<br />
4. dynaphopy input_gan gan_2000_test.lammpstrj -ts 0.001 -sdata -thm --normalize_dos -sfc renormalized_fc<br />
<br />
◇ Examples (LAMMPS calculation)<br />
1. cd ~/DynaPhoPy/examples/GaN_lammps<br />
2. dynaphopy input_gan -c_lammps data.gan --dim 3 3 3<br />
3. $HOME/lammps/src/lmp_serial &lt; in.md_pos<br />
4. dynaphopy input_gan gan_2000_test.lammpstrj -ts 0.001 -i<br />
&nbsp; (dynaphopy input_gan gan_2000_test.lammpstrj -i)<br />
<br />
◇ Usage (GaN, 800K, Renormalized &nbsp;phonon dispersion)<br />
1. gedit POSCAR<br />
-----<br />
Ga N<br />
1.0<br />
&nbsp; &nbsp; &nbsp; &nbsp; 3.1900000572 &nbsp; &nbsp; &nbsp; 0.000000000 &nbsp; &nbsp; &nbsp; 0.0000000000<br />
&nbsp; &nbsp; &nbsp; &nbsp;-1.5950000286 &nbsp; &nbsp; &nbsp; 2.762621076 &nbsp; &nbsp; &nbsp; 0.0000000000<br />
&nbsp; &nbsp; &nbsp; &nbsp; 0.0000000000 &nbsp; &nbsp; &nbsp; 0.000000000 &nbsp; &nbsp; &nbsp; 5.1890001297<br />
&nbsp; &nbsp;Ga &nbsp; &nbsp;N<br />
&nbsp; &nbsp; 2 &nbsp; &nbsp;2<br />
Direct<br />
&nbsp; &nbsp; &nbsp;0.66666669 &nbsp; &nbsp; &nbsp; &nbsp; 0.33333334 &nbsp; &nbsp; &nbsp; &nbsp; 0.000000000<br />
&nbsp; &nbsp; &nbsp;0.33333331 &nbsp; &nbsp; &nbsp; &nbsp; 0.66666663 &nbsp; &nbsp; &nbsp; &nbsp; 0.500000000<br />
&nbsp; &nbsp; &nbsp;0.66666669 &nbsp; &nbsp; &nbsp; &nbsp; 0.33333334 &nbsp; &nbsp; &nbsp; &nbsp; 0.375000000<br />
&nbsp; &nbsp; &nbsp;0.33333331 &nbsp; &nbsp; &nbsp; &nbsp; 0.66666663 &nbsp; &nbsp; &nbsp; &nbsp; 0.875000000<br />
-----<br />
&nbsp; (or 1. cif2cell --no-reduce -p vasp -f GaN.cif&quot;)<br />
2. cp POSCAR POSCAR_unitcell<br />
3. gedit input_file_str<br />
-----<br />
STRUCTURE FILE POSCAR<br />
POSCAR_unitcell<br />
-----<br />
4. dynaphopy input_file_str --dim 1 1 1 -c_lammps data.gan111<br />
5. gedit in.lammps<br />
-----<br />
units metal<br />
boundary p p p<br />
box tilt large<br />
atom_style atomic<br />
read_data data.gan111<br />
pair_style tersoff<br />
pair_coeff * * GaN.tersoff Ga N<br />
neighbor 0.3 bin<br />
-----<br />
6. cp ~/lammps/potentials/GeN.tersoff ./<br />
7. phonolammps in.lammps --dim 2 2 2 -c POSCAR_unitcell -p -t 800<br />
<br />
◇ Usage (FCC Si, 800K, Renormalized &nbsp;phonon dispersion, etc)<br />
1. gedit POSCAR<br />
-----<br />
&nbsp;Si &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />
&nbsp; &nbsp;1.00000000000000 &nbsp; &nbsp;&nbsp;<br />
&nbsp; &nbsp; &nbsp;5.4365330000000000 &nbsp; &nbsp;0.0000000000000000 &nbsp; &nbsp;0.0000000000000000<br />
&nbsp; &nbsp; &nbsp;0.0000000000000000 &nbsp; &nbsp;5.4365330000000000 &nbsp; &nbsp;0.0000000000000000<br />
&nbsp; &nbsp; &nbsp;0.0000000000000000 &nbsp; &nbsp;0.0000000000000000 &nbsp; &nbsp;5.4365330000000000<br />
&nbsp; &nbsp;Si<br />
&nbsp; &nbsp; &nbsp;8<br />
Direct<br />
&nbsp; 0.8750000000000000 &nbsp;0.8750000000000000 &nbsp;0.8750000000000000<br />
&nbsp; 0.8750000000000000 &nbsp;0.3750000000000000 &nbsp;0.3750000000000000<br />
&nbsp; 0.3750000000000000 &nbsp;0.8750000000000000 &nbsp;0.3750000000000000<br />
&nbsp; 0.3750000000000000 &nbsp;0.3750000000000000 &nbsp;0.8750000000000000<br />
&nbsp; 0.1250000000000000 &nbsp;0.1250000000000000 &nbsp;0.1250000000000000<br />
&nbsp; 0.1250000000000000 &nbsp;0.6250000000000000 &nbsp;0.6250000000000000<br />
&nbsp; 0.6250000000000000 &nbsp;0.1250000000000000 &nbsp;0.6250000000000000<br />
&nbsp; 0.6250000000000000 &nbsp;0.6250000000000000 &nbsp;0.1250000000000000<br />
-----<br />
&nbsp; (or 1. cif2cell --no-reduce -p vasp -f Si.cif&quot;)<br />
2. cp POSCAR POSCAR_unitcell<br />
3. gedit input_file_str<br />
-----<br />
STRUCTURE FILE POSCAR<br />
POSCAR_unitcell<br />
-----<br />
4. dynaphopy input_file_str --dim 1 1 1 -c_lammps data.si111<br />
5. gedit in.lammps<br />
-----<br />
units metal<br />
boundary p p p<br />
box tilt large<br />
atom_style atomic<br />
read_data data.si111<br />
pair_style tersoff<br />
pair_coeff * * SiCGe.tersoff Si(C)<br />
neighbor 0.3 bin<br />
-----<br />
6. cp ~/lammps/potentials/SiCGe.tersoff ./<br />
7. phonolammps in.lammps --dim 2 2 2 -c POSCAR_unitcell -t 800<br />
&nbsp; (you can get FORCE_CONSTANTS)<br />
8. dynaphopy input_file_str --dim 2 2 2 -c_lammps data.si222<br />
9. gedit input_file<br />
-----<br />
units &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; metal &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #Use this units for DynaPhoPy<br />
atom_style &nbsp; &nbsp; &nbsp;atomic<br />
<br />
boundary &nbsp; &nbsp; &nbsp; &nbsp;p p p &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #Periodical conditions<br />
<br />
read_data &nbsp; &nbsp; &nbsp; data.si222 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#Structure file<br />
<br />
pair_style &nbsp; &nbsp; &nbsp;tersoff<br />
pair_coeff &nbsp; &nbsp; &nbsp;* * SiCGe.tersoff Si(C) &nbsp; &nbsp; #Empirical potential<br />
<br />
variable &nbsp; &nbsp; &nbsp; &nbsp;t equal 800 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #Define the temperature<br />
<br />
neighbor &nbsp; &nbsp; &nbsp; &nbsp;0.3 bin<br />
neigh_modify &nbsp; &nbsp;delay 0<br />
<br />
timestep &nbsp; &nbsp; &nbsp; &nbsp;0.001 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #Define time step<br />
<br />
thermo_style &nbsp; &nbsp;custom step etotal temp vol press<br />
thermo &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2000<br />
<br />
velocity &nbsp; &nbsp; &nbsp; &nbsp;all create $t 3627941 dist gaussian mom yes<br />
velocity &nbsp; &nbsp; &nbsp; &nbsp;all scale $t<br />
<br />
fix &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int all nvt temp $t $t 0.5 &nbsp;#Canonical ensemble<br />
<br />
dump &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dynaphopy all custom 1 trajectory.lammpstrj x y z<br />
dump_modify &nbsp; &nbsp; dynaphopy sort id<br />
#dump_modify &nbsp; &nbsp; dynaphopy format &quot;%16.10f %16.10f %16.10f&quot;<br />
<br />
run &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20000 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#Number of timesteps<br />
-----<br />
&nbsp; (dynaphopy HP: &quot;thermo 10000&quot;, &quot;run 1000000&quot;)<br />
10. $HOME/lammps/src/lmp_serial &lt; input_file<br />
11. geidt input_dyna<br />
-----<br />
STRUCTURE FILE POSCAR<br />
POSCAR_unitcell<br />
<br />
FORCE CONSTANTS<br />
FORCE_CONSTANTS<br />
<br />
PRIMITIVE MATRIX<br />
0.0 0.5 0.5<br />
0.5 0.0 0.5<br />
0.5 0.5 0.0<br />
<br />
SUPERCELL MATRIX PHONOPY<br />
2 0 0<br />
0 2 0<br />
0 0 2<br />
<br />
BANDS<br />
0.0, &nbsp; 0.0, &nbsp; 0.0 &nbsp; &nbsp; &nbsp; &nbsp; 0.5, &nbsp; 0.0, &nbsp;0.5<br />
0.5, &nbsp; 0.0, &nbsp; 0.5 &nbsp; &nbsp; &nbsp; &nbsp; 0.625 &nbsp;0.25 &nbsp;0.625<br />
0.375, 0.375, 0.75 &nbsp; &nbsp; &nbsp; &nbsp;0.0, &nbsp; 0.0, &nbsp;0.0<br />
0.0, &nbsp; 0.0, &nbsp; 0.0 &nbsp; &nbsp; &nbsp; &nbsp; 0.5, &nbsp; 0.5, &nbsp;0.5<br />
-----<br />
12. dynaphopy input_dyna trajectory.lammpstrj -n 20000 -ts 0.001 -i<br />
&nbsp; (dynaphopy HP: &quot;-n 50000&quot;)<br />
◇ Renormalized &nbsp;phonon dispersion<br />
13. 6<br />
&nbsp; (Renormalized phonon dispersion)<br />
14. 1<br />
&nbsp; (Harmonic and renormalized phonon dispersion relations)<br />
15. 0<br />
&nbsp; (Return)<br />
◇ Phonon DOS<br />
13. 1<br />
&nbsp; (Harmonic calculations)<br />
14. 4<br />
&nbsp; (Plot phonon density of states )<br />
15. 0<br />
&nbsp; (Return)<br />
◇ Renormalized Phonon DOS (on Thermal properties)<br />
13. 3<br />
&nbsp; (Thermal properties)<br />
14. 0<br />
&nbsp; (Return)<br />
◇ Renormalized Phonon DOS and Power spectrum and&nbsp;<br />
13. 5<br />
&nbsp; (Power spectrum)<br />
14. 1<br />
&nbsp; (Full power spectrum )<br />
15. 0<br />
&nbsp; (Return)<br />
※ Before &quot;Return&quot;, close graph windows by &quot;x&quot; botton.<br />
<br />
※ $HOME/.local/bin<br />
※ Finite temperature renormalized force constants&nbsp;<br />
※ Renormalized calculation (Lammps or VASP(MD mode))<br />
------------------------------------------------------------------------------<br />
■ ALAMODE 1.1.0<br />
(https://github.com/ttadano/alamode/releases)<br />
<br />
□ Install (ubuntu 18.04 LTS (64 bit)<br />
・alamode-v.1.1.0.tar.gz<br />
0. wget wget https://github.com/ttadano/alamode/archive/v.1.1.0.tar.gz<br />
&nbsp; sudo apt-get update<br />
&nbsp; sudo apt install liblapack-dev<br />
&nbsp; sudo apt install libopenmpi-dev<br />
&nbsp; sudo apt install libboost-all-dev<br />
&nbsp; sudo apt install libfftw3-dev<br />
&nbsp; sudo apt install libeigen3-dev<br />
1. tar zxvf v.1.1.0.tar.gz<br />
2. cd ~/alamode-v.1.1.0<br />
3. cd alm<br />
4. cp Makefile.linux Makefile<br />
5. gedit Makefile<br />
-----before<br />
CXX = icpc<br />
CXXFLAGS = -O2 -xHOST -qopenmp -std=c++11<br />
INCLUDE = -I../include -I$(HOME)/include -I$(SPGLIB_ROOT)/include<br />
<br />
CXXL = ${CXX}<br />
LDFLAGS = -mkl -L$(SPGLIB_ROOT)/lib -lsymspg<br />
<br />
LAPACK =<br />
LIBS = ${LAPACK}<br />
<br />
alm: ${OBJS}<br />
&nbsp; &nbsp; &nbsp; &nbsp; ${CXXL} ${LDFLAGS} -o $@ ${OBJS} ${LIBS}<br />
-----<br />
-----after<br />
CXX = mpicxx<br />
CXXFLAGS = -O2 -std=c++11<br />
SPGLIB_ROOT = ${HOME}/spglib<br />
INCLUDE = -I../include -I$(HOME)/include -I/usr/include/eigen3 -I$(SPGLIB_ROOT)/include<br />
<br />
CXXL = ${CXX}<br />
LDFLAGS = -L$(SPGLIB_ROOT)/lib -Wl,--rpath=$(SPGLIB_ROOT)/lib -lsymspg<br />
<br />
LAPACK = -L/usr/lib/x86_64-linux-gnu<br />
LIBS = ${LAPACK} -llapack -lblas<br />
<br />
alm: ${OBJS}<br />
&nbsp; &nbsp; &nbsp; &nbsp; ${CXXL} -o $@ ${OBJS} ${LIBS} ${LDFLAGS}<br />
-----<br />
6. make -j<br />
7. cd ..<br />
8. cd anphon<br />
9. cp Makefile.linux Makefile<br />
10. gedit Makefile<br />
-----before<br />
MPICXX = mpicxx<br />
CXXFLAGS = -O3 -xHOST -openmp -std=c++11<br />
INCLUDE = -I../include<br />
<br />
LINKER = ${MPICXX}<br />
LDFLAGS = -mkl<br />
<br />
LAPACK =<br />
LIBS = ${LAPACK}<br />
-----<br />
-----after<br />
MPICXX = mpicxx<br />
CXXFLAGS = -O3 -std=c++11<br />
INCLUDE = -I../include -I/usr/include/eigen3<br />
<br />
LINKER = ${MPICXX}<br />
LDFLAGS =<br />
<br />
LAPACK = -L/usr/lib/x86_64-linux-gnu<br />
LIBS = ${LAPACK} -llapack -lblas -lfftw3<br />
-----<br />
11. make -j<br />
12. cd ..<br />
13. cd tools<br />
14. gedit Makefile<br />
-----before<br />
# OSX (gcc)<br />
CXX = g++-8<br />
-----<br />
-----after<br />
# OSX (gcc)<br />
#CXX = g++-8<br />
<br />
#gfortran compiler<br />
CXX = mpicxx<br />
-----<br />
15. make -j<br />
<br />
□ test<br />
1. cd ~/alamode-v.1.1.0/example/Si_LAMMPS<br />
2. gedit run_all.sh<br />
-----before<br />
LAMMPS=/usr/local/bin/lmp<br />
ALAMODE_ROOT=${HOME}/Work/alamode/<br />
-----<br />
-----after<br />
LAMMPS=${HOME}/lammps/src/lmp_serial<br />
ALAMODE_ROOT=${HOME}/alamode-v.1.1.0<br />
-----s<br />
3. chmod +x run_all.sh<br />
4. ./run_all.sh<br />
5. python ~/alamode-v.1.1.0/tools/plotband.py si222.bands<br />
6. gnuplot<br />
&nbsp; set logscale xy<br />
&nbsp; set xlabel &quot;Temperature (K)&quot;<br />
&nbsp; set ylabel &quot;Lattice thermal conductivity (W/mK)&quot;<br />
&nbsp; plot &quot;si222_10.kl&quot; usi 1:2 w lp<br />
7. quit<br />
8. python ~/alamode-v.1.1.0/tools/analyze_phonons.py --calc kappa_boundary --size 1.0e+6 si222_10.result &gt; &nbsp;si222_boundary_1mm.kl<br />
9. gnuplot<br />
&nbsp; set logscale xy<br />
&nbsp; set xlabel &quot;Temperature (K)&quot;<br />
&nbsp; set ylabel &quot;Lattice thermal conductivity (W/mK)&quot;<br />
&nbsp; plot &quot;si222_10.kl&quot; usi 1:2 w lp, &quot;si222_boundary_1mm.kl&quot; usi 1:2 w lp<br />
10. quit<br />
11. python ~/alamode-v.1.1.0/tools/analyze_phonons.py --calc tau --temp 300 si222_10.result &gt; tau300K_10.dat<br />
12. gnuplot<br />
&nbsp; set xrange [1:]<br />
&nbsp; set logscale y<br />
&nbsp; set xlabel &quot;Phonon frequency (cm^{-1})&quot;<br />
&nbsp; set ylabel &quot;Phonon lifetime (ps)&quot;<br />
&nbsp; plot &quot;tau300K_10.dat&quot; using 3:4 w p<br />
13. quit<br />
14. python ~/alamode-v.1.1.0/tools/analyze_phonons.py --calc cumulative --temp 300 --length 10000:5 si222_10.result &gt; cumulative_300K_10.dat<br />
15. gnuplot<br />
&nbsp; set logscale x<br />
&nbsp; set xlabel &quot;L (nm)&quot;<br />
&nbsp; set ylabel &quot;Cumulative kappa (W/mK)&quot;<br />
&nbsp; plot &quot;cumulative_300K_10.dat&quot; using 1:2 w lp<br />
16. quit<br />
17. gedit si_RTA.in<br />
-----<br />
&amp;general<br />
&nbsp; PREFIX = si222<br />
&nbsp; MODE = RTA<br />
&nbsp; FCSXML = si222_cubic.xml<br />
<br />
&nbsp; NKD = 1; KD = Si<br />
&nbsp; MASS = 28.0855<br />
<br />
&nbsp; EMIN = 0; EMAX = 550; DELTA_E = 1.0 # &lt;-- frequency range<br />
/<br />
<br />
&amp;cell<br />
10.203<br />
&nbsp;0.0 0.5 0.5<br />
&nbsp;0.5 0.0 0.5<br />
&nbsp;0.5 0.5 0.0<br />
/<br />
<br />
&amp;kpoint<br />
&nbsp;2<br />
&nbsp;10 10 10<br />
/<br />
<br />
&amp;analysis<br />
&nbsp;KAPPA_SPEC = 1 # compute spectrum of kappa<br />
/<br />
-----<br />
18. ~/alamode-v.1.1.0/anphon/anphon si_RTA.in &gt; si_RTA2.log<br />
19. awk &#39;{if ($1 == 300.0) print $0}&#39; si222.kl_spec &gt; si222_300K_10.kl_spec<br />
20. gnuplot<br />
&nbsp; set xlabel &quot;Frequency (cm^{-1})&quot;<br />
&nbsp; set ylabel &quot;Spectrum of kappa (W/mK/cm^{-1})&quot;<br />
&nbsp; plot &quot;si222_300K_10.kl_spec&quot; using 2:3 w l lt 2 lw 2<br />
21. quit<br />
<br />
□ Tutorial (Si_LAMMPS)<br />
◇(1. Get displacement patterns by alm)<br />
1. cd ~/alamode-v.1.1.0/example/Si_LAMMPS<br />
2. cp ../Si/si_alm.in ./<br />
3. ~/alamode-v.1.1.0/alm/alm si_alm.in &gt; si_alm.log1<br />
◇(2. Calculate atomic forces for the displaced configurations)<br />
4. python ~/alamode-v.1.1.0/tools/displace.py --LAMMPS=Si222.lammps --mag=0.01 --prefix harm &nbsp;si222.pattern_HARMONIC<br />
5. cp si_alm.in si_alm2.in<br />
◇(5. Estimate cubic IFCs for thermal conductivity)<br />
6. gedit si_alm2.in<br />
-----before<br />
&amp;general<br />
&nbsp; PREFIX = si222<br />
&nbsp; MODE = suggest<br />
&nbsp; NAT = 64; NKD = 1<br />
&nbsp; KD = Si<br />
/<br />
<br />
&amp;interaction<br />
&nbsp; NORDER = 1 &nbsp;# 1: harmonic, 2: cubic, ..<br />
/<br />
<br />
&amp;cell<br />
&nbsp; 20.406 # factor in Bohr unit<br />
&nbsp; 1.0 0.0 0.0 # a1<br />
&nbsp; 0.0 1.0 0.0 # a2<br />
&nbsp; 0.0 0.0 1.0 # a3<br />
/<br />
<br />
&amp;cutoff<br />
&nbsp; Si-Si None<br />
/<br />
-----<br />
-----after<br />
&amp;general<br />
&nbsp; PREFIX = si222_cubic<br />
&nbsp; MODE = suggest<br />
&nbsp; NAT = 64; NKD = 1<br />
&nbsp; KD = Si<br />
/<br />
<br />
&amp;interaction<br />
&nbsp; NORDER = 2<br />
/<br />
<br />
&amp;cell<br />
&nbsp; 20.406 # factor in Bohr unit<br />
&nbsp; 1.0 0.0 0.0 # a1<br />
&nbsp; 0.0 1.0 0.0 # a2<br />
&nbsp; 0.0 0.0 1.0 # a3<br />
/<br />
<br />
&amp;cutoff<br />
&nbsp; Si-Si None 7.3<br />
/<br />
-----<br />
7. ~/alamode-v.1.1.0/alm/alm si_alm2.in &gt; si_alm2.log<br />
8. python ~/alamode-v.1.1.0/tools/displace.py --LAMMPS=Si222.lammps --mag=0.04 --prefix cubic si222_cubic.pattern_ANHARM3<br />
9. gedit lammps_run.sh<br />
-----<br />
#!/bin/bash<br />
<br />
cp harm1.lammps tmp.lammps<br />
$HOME/lammps/src/lmp_serial &lt; in.sw &gt; log.lammps<br />
cp XFSET XFSET.harm1<br />
<br />
for ((i=1;i&lt;=20;i++))<br />
do<br />
&nbsp; num=`echo $i | awk &#39;{printf(&quot;%02d&quot;,$1)}&#39;`<br />
&nbsp; cp cubic${num}.lammps tmp.lammps<br />
&nbsp; $HOME/lammps/src/lmp_serial &lt; in.sw &gt; log.lammps<br />
&nbsp; cp XFSET XFSET.cubic${num}<br />
done<br />
-----<br />
10. chmod +x lammps_run.sh<br />
11. ./lammps_run.sh<br />
12. gedit si_alm2.in<br />
-----before<br />
&amp;general<br />
&nbsp; PREFIX = si222_cubic<br />
&nbsp; MODE = suggest<br />
&nbsp; NAT = 64; NKD = 1<br />
&nbsp; KD = Si<br />
/<br />
-----<br />
-----after<br />
&amp;general<br />
&nbsp; PREFIX = si222_cubic<br />
&nbsp; MODE = optimize<br />
&nbsp; NAT = 64; NKD = 1<br />
&nbsp; KD = Si<br />
/<br />
<br />
&amp;optimize<br />
&nbsp; DFSET = DFSET_cubic<br />
&nbsp; FC2XML = si222.xml # Fix harmonic IFCs<br />
/<br />
-----<br />
13. ~/alamode-v.1.1.0/alm/alm si_alm2.in &gt; si_alm2.log<br />
14. python ~/alamode-v.1.1.0/tools/extract.py --LAMMPS=Si222.lammps XFSET.harm1 &gt; DFSET_harmonic<br />
15. python ~/alamode-v.1.1.0/tools/extract.py --LAMMPS=Si222.lammps XFSET.cubic* &gt; DFSET_cubic<br />
◇ (3. Estimate force constants by fitting)<br />
16. gedit si_alm.in<br />
-----before<br />
&amp;general<br />
&nbsp; PREFIX = si222<br />
&nbsp; MODE = suggest<br />
&nbsp; NAT = 64; NKD = 1<br />
&nbsp; KD = Si<br />
/<br />
-----<br />
-----after<br />
&amp;general<br />
&nbsp; PREFIX = si222<br />
&nbsp; MODE = optimize &nbsp; # &lt;-- here<br />
&nbsp; NAT = 64; NKD = 1<br />
&nbsp; KD = Si<br />
/<br />
<br />
&amp;fitting<br />
&nbsp; DFSET = DFSET_harmonic<br />
/<br />
-----<br />
17. ~/alamode-v.1.1.0/alm/alm si_alm.in &gt; si_alm.log2<br />
◇(4. Calculate phonon dispersion and phonon DOS)<br />
18. cp ../Si/si_phband.in ./<br />
19. ~/alamode-v.1.1.0/anphon/anphon si_phband.in &gt; si_phband.log<br />
20. python ~/alamode-v.1.1.0/tools/plotband.py si222.bands<br />
&nbsp; (python ~/alamode-v.1.1.0/tools/plotband.py -h)<br />
21. cp si_phband.in si_phdos.in<br />
22. gedit si_phdos.in<br />
-----before<br />
&amp;kpoint<br />
&nbsp; 1 &nbsp;# KPMODE = 1: line mode<br />
&nbsp; G 0.0 0.0 0.0 X 0.5 0.5 0.0 51<br />
&nbsp; X 0.5 0.5 1.0 G 0.0 0.0 0.0 51<br />
&nbsp; G 0.0 0.0 0.0 L 0.5 0.5 0.5 51<br />
/<br />
-----<br />
-----after<br />
&amp;kpoint<br />
&nbsp; 2 &nbsp;# KPMODE = 2: uniform mesh mode<br />
&nbsp; 20 20 20<br />
/<br />
-----<br />
23. ~/alamode-v.1.1.0/anphon/anphon si_phdos.in &gt; si_phdos.log<br />
24. python ~/alamode-v.1.1.0/tools/plotdos.py --emax 600 --nokey si222.dos<br />
◇ (6. Calculate thermal conductivity)<br />
(24.5 cp si_phdos.in si_RTA.in)<br />
25. gedit RTA.in<br />
-----<br />
&amp;general<br />
&nbsp; PREFIX = si222<br />
&nbsp; MODE &nbsp; = RTA<br />
&nbsp; FCSXML = si222_cubic.xml<br />
<br />
&nbsp; NKD = 1; KD = Si<br />
&nbsp; MASS = 28.0855<br />
/<br />
<br />
&amp;cell<br />
&nbsp; 10.203<br />
&nbsp; 0.0 0.5 0.5<br />
&nbsp; 0.5 0.0 0.5<br />
&nbsp; 0.5 0.5 0.0<br />
/<br />
<br />
&amp;kpoint<br />
&nbsp; 2 # KPMODE = 1: line mode<br />
&nbsp; 10 10 10<br />
/<br />
-----<br />
26. ~/alamode-v.1.1.0/anphon/anphon si_RTA.in &gt; si_RTA.log &amp;<br />
------------------------------------------------------------------------------<br />
■ ALAMODE 1.0.2&nbsp;<br />
(https://github.com/ttadano/alamode/releases)<br />
<br />
□ Install (ubuntu 18.04 LTS (64 bit)<br />
・alamode-v.1.0.2.tar.gz<br />
0. wget https://github.com/ttadano/alamode/archive/v.1.0.2.tar.gz<br />
&nbsp; sudo apt-get update<br />
&nbsp; sudo apt install liblapack-dev<br />
&nbsp; sudo apt install libopenmpi-dev<br />
&nbsp; sudo apt install libboost-all-dev<br />
&nbsp; sudo apt install libfftw3-dev<br />
&nbsp; sudo apt install libeigen3-dev<br />
1. tar zxvf v.1.0.2.tar.gz<br />
2. cd ~/alamode-v.1.0.2<br />
3. cd alm<br />
4. cp Makefile.linux Makefile<br />
5. gedit Makefile<br />
-----before<br />
CXX = icpc<br />
CXXFLAGS = -O2 -xHOST -openmp -std=c++11<br />
INCLUDE = -I../include<br />
<br />
CXXL = ${CXX}<br />
LDFLAGS = -mkl<br />
<br />
LAPACK =<br />
LIBS = ${LAPACK}<br />
-----<br />
-----after<br />
CXX = mpicxx<br />
CXXFLAGS = -O2 -std=c++11<br />
INCLUDE = -I../include<br />
<br />
CXXL = ${CXX}<br />
LDFLAGS =<br />
<br />
LAPACK = -L/usr/lib/x86_64-linux-gnu<br />
LIBS = ${LAPACK} -llapack -lblas<br />
-----<br />
6. make -j<br />
7. cd ..<br />
8. cd anphon<br />
9. cp Makefile.linux Makefile<br />
10. gedit Makefile<br />
-----before<br />
MPICXX = mpicxx<br />
CXXFLAGS = -O3 -xHOST -openmp -std=c++11<br />
INCLUDE = -I../include<br />
<br />
LINKER = ${MPICXX}<br />
LDFLAGS = -mkl<br />
<br />
LAPACK =<br />
LIBS = ${LAPACK}<br />
-----<br />
-----after<br />
MPICXX = mpicxx<br />
CXXFLAGS = -O3 -std=c++11<br />
INCLUDE = -I../include -I/usr/include/eigen3<br />
<br />
LINKER = ${MPICXX}<br />
LDFLAGS =<br />
<br />
LAPACK = -L/usr/bin/x86_64-linux-gnu<br />
LIBS = ${LAPACK} -llapack -lblas -lfftw3<br />
-----<br />
11. make -j<br />
12. cd ..<br />
13. cd tools<br />
14. make<br />
<br />
□ test<br />
1. cd ~/alamode-v.1.0.2/example/Si_LAMMPS<br />
2. gedit run_all.sh<br />
-----<br />
LAMMPS=${HOME}/lammps/src/lmp_serial<br />
ALAMODE_ROOT=${HOME}/alamode-v.1.0.2<br />
-----s<br />
3. chmod +x run_all.sh<br />
4. ./run_all.sh<br />
5. python ~/alamode-v.1.0.2/tools/plotband.py si222.bands<br />
------------------------------------------------------------------------------<br />
■ ALAMODE 1.0.1&nbsp;<br />
(https://github.com/ttadano/alamode/releases)<br />
<br />
□ Install (ubuntu 18.04 LTS (64 bit)<br />
・alamode-v.1.0.1.tar.gz<br />
0. wget https://github.com/ttadano/alamode/archive/v.1.0.1.tar.gz<br />
&nbsp; sudo apt-get update<br />
&nbsp; sudo apt install liblapack-dev<br />
&nbsp; sudo apt install libopenmpi-dev<br />
&nbsp; sudo apt install libboost-all-dev<br />
&nbsp; sudo apt install libfftw3-dev<br />
&nbsp; sudo apt install libeigen3-dev<br />
1. tar zxvf v.1.0.0.tar.gz<br />
2. cd ~/alamode-v.1.0.1<br />
3. cd alm<br />
4. cp Makefile.linux Makefile<br />
5. gedit Makefile<br />
-----before<br />
CXX = icpc<br />
CXXFLAGS = -O2 -xHOST -openmp -std=c++11<br />
INCLUDE = -I../include<br />
<br />
CXXL = ${CXX}<br />
LDFLAGS = -mkl<br />
<br />
LAPACK =<br />
LIBS = ${LAPACK}<br />
-----<br />
-----after<br />
CXX = mpicxx<br />
CXXFLAGS = -O2 -std=c++11<br />
INCLUDE = -I../include<br />
<br />
CXXL = ${CXX}<br />
LDFLAGS =<br />
<br />
LAPACK = -L/usr/lib/x86_64-linux-gnu<br />
LIBS = ${LAPACK} -llapack -lblas<br />
-----<br />
6. make -j<br />
7. cd ..<br />
8. cd anphon<br />
9. cp Makefile.linux Makefile<br />
10. gedit Makefile<br />
-----before<br />
MPICXX = mpicxx<br />
CXXFLAGS = -O3 -xHOST -openmp -std=c++11<br />
INCLUDE = -I../include<br />
<br />
LINKER = ${MPICXX}<br />
LDFLAGS = -mkl<br />
<br />
LAPACK =<br />
LIBS = ${LAPACK}<br />
-----<br />
-----after<br />
MPICXX = mpicxx<br />
CXXFLAGS = -O3 -std=c++11<br />
INCLUDE = -I../include -I/usr/include/eigen3<br />
<br />
LINKER = ${MPICXX}<br />
LDFLAGS =<br />
<br />
LAPACK = -L/usr/bin/x86_64-linux-gnu<br />
LIBS = ${LAPACK} -llapack -lblas -lfftw3<br />
-----<br />
11. make -j<br />
12. cd ..<br />
13. cd tools<br />
14. make<br />
<br />
□ test<br />
1. cd ~/alamode-v.1.0.1/example/Si_LAMMPS<br />
2. gedit run_all.sh<br />
-----<br />
LAMMPS=${HOME}/lammps/src/lmp_serial<br />
ALAMODE_ROOT=${HOME}/alamode-v.1.0.1<br />
-----s<br />
3. chmod +x run_all.sh<br />
4. ./run_all.sh<br />
5. python ~/alamode-v.1.0.1/tools/plotband.py si222.bands<br />
------------------------------------------------------------------------------<br />
■ PhonTS<br />
(https://sites.google.com/a/mst.edu/aleksandr-chernatynskiy/phonts)<br />
<br />
□ Registration<br />
1. send e-mail (to aleksandrc@mst.edu)<br />
-----<br />
Title:&nbsp;<br />
Registration for PhonTS<br />
<br />
Body:<br />
Dear Dr. Aleksandr Chernatynskiy&nbsp;<br />
&nbsp;&nbsp;<br />
&nbsp; Please provide me the required password key if possible.&nbsp;<br />
&nbsp; My registration information is summarized below as requested:&nbsp;<br />
<br />
&nbsp; 1. Manabu Inukai&nbsp;<br />
&nbsp; 2. RIKEN Baton Zone Program&nbsp;<br />
&nbsp; &nbsp; 2-1 Hirosawa, Wako-shi, saitama 351-0198, JAPAN&nbsp;<br />
&nbsp; 3. My Research Field: Thermoelectric materials and Hydrogen storage&nbsp;<br />
&nbsp; &nbsp; IR and Raman calculation&nbsp;<br />
<br />
Best Regards,<br />
XXXX XXXXX<br />
-----<br />
2. wait for a long time until you receive E-mail.<br />
3. you can get password.<br />
※ I would get reply next day.<br />
<br />
<br />
□ Install (gfortran)<br />
・PhonTS-2.0.0.zip<br />
0. sudo apt-get update<br />
&nbsp; sudo apt-get install libatlas-base-dev liblapack-dev libblas-dev<br />
1. unzip PhonTS-2.0.0.zip<br />
&nbsp; (input pasword)<br />
2. tar xvf PhonTS-2.0.0.tar<br />
3. cd PhonTS-2.0.0<br />
4. cd src<br />
5. patch -p1 &lt; Phonts.gnu.patch<br />
&nbsp; -----<br />
&nbsp; patching file D0_interface.f90<br />
&nbsp; patching file D1_interface.f90<br />
&nbsp; patching file integral.f90<br />
&nbsp; patching file memory.f90<br />
&nbsp; -----<br />
6. cp Makefile_gnu Makefile<br />
7. gedit Makefile<br />
-----before<br />
#### &nbsp; Your favorite fortran compiler<br />
FF &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp;mpif90<br />
LD &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; $(FF)<br />
<br />
#### &nbsp; Compilation flag: -autodouble is the only one very important here<br />
FFLAGS &nbsp; &nbsp;= &nbsp; -freal-4-real-8 -ffree-line-length-none<br />
<br />
#### &nbsp; Linking flags - for the LAPACK library. This is 10.0.011 setup<br />
LDFLAGS &nbsp; = &nbsp; -L /opt/atlas/gnu/lib/ -llapack -lf77blas -lcblas -latlas<br />
<br />
#### &nbsp; Optimization flags<br />
(Build): &nbsp; &nbsp; &nbsp; &nbsp;FFLAGS += -O3<br />
<br />
#### &nbsp; Debugging flags<br />
debug: &nbsp;FFLAGS += -g -pg -check all -traceback -w -fpe0<br />
-----<br />
-----after<br />
#### &nbsp; Your favorite fortran compiler<br />
FF &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp;mpif90<br />
LD &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; $(FF)<br />
<br />
#### &nbsp; Compilation flag: -autodouble is the only one very important here<br />
FFLAGS &nbsp; &nbsp;= &nbsp; -fdefault-double-8 -fdefault-real-8 -ffree-line-length-none<br />
<br />
#### &nbsp; Linking flags - for the LAPACK library. This is 10.0.011 setup<br />
LDFLAGS &nbsp; = &nbsp; -L/usr/lib/x86_64-linux-gnu -llapack -lf77blas -lcblas -latlas<br />
<br />
#### &nbsp; Optimization flags<br />
(Build): &nbsp; &nbsp; &nbsp; &nbsp;FFLAGS += -O3<br />
<br />
#### &nbsp; Debugging flags<br />
debug: &nbsp;FFLAGS += -g -pg -check all -traceback -w -fpe0<br />
-----<br />
8. make<br />
<br />
□ Install (ifort) (no check)<br />
・PhonTS-2.0.0.zip<br />
1. unzip PhonTS-2.0.0.zip<br />
&nbsp; (input pasword)<br />
2. tar xvf PhonTS-2.0.0.tar<br />
3. cd PhonTS-2.0.0<br />
4. cd src<br />
5. cp Makefile_ifort Makefile<br />
6. make<br />
<br />
<br />
□ Examples (Ar)<br />
1. cd ~/PhonTS-2.0.0/examples<br />
2. cd argon<br />
&nbsp; (phonons_input.dat)<br />
3. ~/PhonTS-2.0.0/src/PhonTS<br />
4. gnuplot<br />
&nbsp; set xrange [-1:14]<br />
&nbsp; set xlable &quot;THz&quot;<br />
&nbsp; set ylabel &quot;PDOS&quot;<br />
&nbsp; plot &quot;pdos.dat&quot; u 1:4 w l<br />
5. q<br />
※ therm_cond.dat, tc_dos.dat<br />
<br />
□ Examples (VCA)<br />
1. cd ~/PhonTS-2.0.0/examples<br />
2. cd VCA<br />
&nbsp; (phonons_input.dat)<br />
3. ~/PhonTS-2.0.0/src/PhonTS<br />
4. gnuplot<br />
&nbsp; set xrange [-1:14]<br />
&nbsp; set xlable &quot;THz&quot;<br />
&nbsp; set ylabel &quot;PDOS&quot;<br />
&nbsp; plot &quot;pdos.dat&quot; u 1:4 w l<br />
5. q<br />
※ therm_cond.dat, tc_dos.dat<br />
<br />
□ Examples (QHA)<br />
1. cd ~/PhonTS-2.0.0/examples<br />
2. cd QHA<br />
3. ~/PhonTS-2.0.0/src/PhonTS<br />
<br />
□ Examples (Optimization)<br />
1. cd ~/PhonTS-2.0.0/examples<br />
2. cd Optimization<br />
3. ~/PhonTS-2.0.0/src/PhonTS<br />
<br />
□ Examples (PDOS)<br />
1. cd ~/PhonTS-2.0.0/examples<br />
2. cd PDOS<br />
3. ~/PhonTS-2.0.0/src/PhonTS<br />
4. gnuplot<br />
&nbsp; set xrange [-1:14]<br />
&nbsp; set xlable &quot;THz&quot;<br />
&nbsp; set ylabel &quot;PDOS&quot;<br />
&nbsp; plot &quot;pdos.dat&quot; u 1:4 w l<br />
5. q<br />
<br />
□ Examples (Lammps) (failed)<br />
1. cd ~/PhonTS-2.0.0/examples<br />
2. cd LAMMPS/PhonTS<br />
3. ~/PhonTS-2.0.0/src/PhonTS<br />
&nbsp; mv &#39; 1_p3_1_O0_MgO_4.2127.str&#39; 1_p3_1_O0_MgO_4.2127.str<br />
&nbsp; mv &#39; 5_p3_1_O0_MgO_4.2127.str&#39; 5_p3_1_O0_MgO_4.2127.str<br />
----------<br />
4. cd ~/PhonTS-2.0.0/examples<br />
5. cd LAMMPS/LAMMPS<br />
6. chmod +x prep_script<br />
&nbsp; ./prep_script<br />
7. chmod +x lammps<br />
8. gedit in.GEN<br />
-----before<br />
dump_modify 1 format &quot;%d %30.20f %30.20f %30.20f&quot;<br />
-----<br />
-----after<br />
dump_modify 1 format line &quot;%d %30.20f %30.20f %30.20f&quot;<br />
-----<br />
9. chmod +x submit_script<br />
10. gedit submit_script<br />
-----before<br />
&nbsp; ../lammps &lt; in.MgO &gt; out.dat<br />
-----<br />
-----after<br />
&nbsp; /usr/bin/lammpsl &lt; in.MgO &gt; out.dat<br />
-----<br />
11. ./submit_script<br />
12. chmod +x post_script<br />
13. gedit post_script<br />
-----before<br />
cp 4.2127.dir/out.dat ../PhonTS/4.2127.out<br />
-----<br />
-----after<br />
cp 4.2127MgO.dir/out.dat ../PhonTS/4.2127MgO.out<br />
-----<br />
14. ./post_script<br />
----------<br />
15. cd ~/PhonTS-2.0.0/examples<br />
16. cd LAMMPS/PhonTS<br />
17. &nbsp; mv 1_p3_1_O0_MgO_4.2127.out &#39; 1_p3_1_O0_MgO_4.2127.out&#39;&nbsp;<br />
&nbsp; mv &nbsp;5_p3_1_O0_MgO_4.2127.out &#39; 5_p3_1_O0_MgO_4.2127.out&#39;<br />
18. gedit phonons_input.dat<br />
-----before<br />
kpoints 15 15 15 1<br />
<br />
AbInitio &nbsp;T F<br />
-----<br />
-----after<br />
points 15 15 15 10<br />
<br />
pdos 0 15 1000 50<br />
<br />
AbInitio &nbsp;F T<br />
-----<br />
19. ~/PhonTS-2.0.0/src/PhonTS<br />
※ ($HOME/lammps/src/lmp_serial &lt; in.MgO &gt; out.dat)<br />
------------------------------------------------------------------------------<br />
■ PhonTS (aevo_v1_0.tar.gz)&nbsp;<br />
※ aevo_v1_0.tar.gz は容易に手に入るが、Intel fortran + MKL が必要。gfortranではIFPORTのモジュールが無いのとエラーが頻繁に表示され、gfortran用への修正が数日かけても終わらない。<br />
<br />
□ PhonTS (gfortran)(failed)<br />
(http://cpc.cs.qub.ac.uk/summaries/AEVO_v1_0.html)<br />
(https://data.mendeley.com/datasets/vn5wph88hy/1)<br />
・aevo_v1_0.tar.gz<br />
1. tar zxvf aevo_v1_0.tar.gz<br />
2. cd PhonTS-1.1.0<br />
3. cd src<br />
4. gedit Makefile<br />
-----before<br />
#### &nbsp; Your favorite fortran compiler<br />
FF &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; /opt/intel/mpich2-1.4.1p1/bin/mpif90<br />
LD &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; $(FF)<br />
<br />
#### &nbsp; Compilation flag: -autodouble is the only one very important here<br />
FFLAGS &nbsp; &nbsp;= &nbsp; -autodouble -unroll -fno-alias<br />
<br />
#### &nbsp; Linking flags - for the LAPACK library. This is 10.0.011 setup<br />
LDFLAGS &nbsp; = -L/opt/intel/mkl/10.0.011/lib/em64t -Wl,--start-group -lmkl_sequential -lmkl_lapack -lmkl_em64t -lmkl_core -Wl,--end-group<br />
<br />
#### &nbsp; Optimization flags<br />
(Build): &nbsp; &nbsp; &nbsp; &nbsp;FFLAGS += -O3<br />
<br />
#### &nbsp; Debugging flags<br />
debug: &nbsp;FFLAGS += -g -pg -check all -traceback -w -fpe0<br />
-----<br />
-----after<br />
#### &nbsp; Your favorite fortran compiler<br />
FF &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; mpif90<br />
LD &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; $(FF)<br />
<br />
#### &nbsp; Compilation flag: -autodouble is the only one very important here<br />
FFLAGS &nbsp; &nbsp;= -ffree-line-length-none -fdefault-double-8 -fdefault-real-8 -funroll-loops # -fargument-noalias-global<br />
<br />
#### &nbsp; Linking flags - for the LAPACK library. This is 10.0.011 setup<br />
LDFLAGS &nbsp; = -L/usr/lib/x86_64-linux-gnu -llapack -lblas<br />
<br />
#### &nbsp; Optimization flags<br />
(Build): &nbsp; &nbsp; &nbsp; &nbsp;FFLAGS += -O2<br />
<br />
#### &nbsp; Debugging flags<br />
debug: &nbsp;FFLAGS += -g -pg -fbacktrace -W &quot;-ffpe-trap=invalid,zero,overflow&quot;<br />
-----<br />
5. sed -i &#39;417s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;431s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;447s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;1694s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;1699s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;1702s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;1705s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;1709s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;1712s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;1713s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;1714s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;1715s/.eq./.eqv./g&#39; input.f90<br />
&nbsp; sed -i &#39;2400s/.eq.1/.eqv..TRUE./g&#39; input.f90<br />
6. make<br />
<br />
□ Examples<br />
1. cd ~/PhonTS-1.1.0/examples/argon<br />
2. ~/PhonTS-1.1.0/src/PhonTS<br />
<br />
[1] Fortranデバッグオプション<br />
&nbsp; http://www.rcs.arch.t.u-tokyo.ac.jp/kusuhara/tips/memorandum/memo1.html<br />
&nbsp; LAPACK Routines<br />
&nbsp; http://www.rcs.arch.t.u-tokyo.ac.jp/kusuhara/tips/memorandum/memo4.html<br />
[2] gfortran(1) - Linux man page<br />
&nbsp; https://linux.die.net/man/1/gfortran<br />
[3] Keyword Index<br />
&nbsp; https://gcc.gnu.org/onlinedocs/gcc-3.3.4/g77/Keyword-Index.html<br />
------------------------------------------------------------------------------<br />
■ PhonTS<br />
(http://phonts.mse.ufl.edu/)<br />
<br />
□ Registration<br />
1. send e-mail (to phonts at mse.ufl.edu)<br />
-----<br />
Title:&nbsp;<br />
Registration for PhonTS<br />
<br />
Body:<br />
Dear developers<br />
<br />
&nbsp; I have read and agree with the terms of the PhonTS GNU General Public License (GPL).&nbsp;<br />
&nbsp; Please provide me the required password key if possible.&nbsp;<br />
&nbsp; My registration information is summarized below as requested:&nbsp;<br />
<br />
&nbsp; 1. XXXX XXXXX<br />
&nbsp; 2. RIKEN Baton Zone Program&nbsp;<br />
&nbsp; &nbsp; 2-1 Hirosawa, Wako-shi, saitama 351-0198, JAPAN&nbsp;<br />
&nbsp; 3. My Research Field: Thermoelectric materials and Hydrogen storage<br />
<br />
Best Regards,&nbsp;<br />
XXXX XXXXX<br />
-----<br />
2. wait for a long time until you receive E-mail.<br />
3. you can get user id and password.<br />
※ I could not get reply.<br />
<br />
------------------------------------------------------------------------------<br />
■ References<br />
<br />
[1] 講習会資料<br />
&nbsp; http://md.jsms.jp/download/<br />
[2] LAMMPSで構造最適化<br />
&nbsp; https://justice-vsbr.hatenablog.com/entry/2018/08/02/101057<br />
&nbsp; 色々と試して何が問題化を明らかにしてくださっているのでとても助かる<br />
[3] 6.12. MD ? LAMMPS メニュー (Winmostar User Manual)<br />
&nbsp; https://winmostar.com/jp/manual_jp/V9/html/winmos/md/winmos_lammps.html<br />
[4] 分子動力学計算を活用したインシリコ創薬<br />
&nbsp; https://www.r-ccs.riken.jp/aicssite/wp-content/uploads/2016/05/20151202hirokawa.pdf<br />
&nbsp; https://www.r-ccs.riken.jp/course/life_science2_2.4.html (動画)<br />
&nbsp; https://www.youtube.com/watch?v=UBW1TxwfqhE (Youtube動画)<br />
[5] LAMMPS入門の手引き 0:環境の設定<br />
&nbsp; https://qiita.com/tkmtSo/items/34a0098cb967f2a9fdfe<br />
[6] LAMMPS入門の手引き 1:静的な計算<br />
&nbsp; https://qiita.com/tkmtSo/items/e43220cd9bbb7634af34<br />
&nbsp; ・velocityコマンドは原子に強制的に初速を与えるコマンドです。はじめが0ケルビンだと全く動かないため、初速を適当に与える意味があります。<br />
&nbsp; ・minimizeはrunコマンドと似ていますが、動力学計算を行うのではなく、よりエネルギーが低くなるように原子を動かすコマンドです。なので、minimizeが終わったときはエネルギーが(局所)安定点に達した構造が得られることが期待されます。つまり0ケルビンのときの構造です。デフォルトはCG法が使われています。<br />
&nbsp; ・fix nvtコマンドは系にNVTアンサンブルを適用するコマンドです。つまり温度制御をかけます。後ろの3つの値は「MD開始時の熱浴の温度」「MD終了時の熱浴の温度」「熱浴の順応性」です。3つ目の値が少し直感的でない値ですが、曖昧に表現すると(人工的な)熱浴に対する慣性のようなパラメータです。おおよそtimestepで設定した値の100倍くらいにしておけば大丈夫です。(圧力制御の場合は1000倍程度)<br />
[7] Input files: samples<br />
&nbsp; http://www.phonon.t.u-tokyo.ac.jp/people/~ohnishi/lammps.html<br />
[8] LAMMPS tutorial<br />
&nbsp; https://icme.hpc.msstate.edu/mediawiki/index.php/LAMMPS_tutorials<br />
[9] 泉聡志ら『実践分子動力学シミュレーション』森北出版<br />
[10] 長岡正隆ら「すぐできる分子シミュレーションビギナーズマニュアル」KS化学専門書<br />
[11] Molecular Mechanics (MM) 計算（z軸方向のみの緩和）<br />
&nbsp; http://www.phonon.t.u-tokyo.ac.jp/people/~ohnishi/lammps2.html<br />
&nbsp; LAMMPS/examples/USER/phonon/3-3D-FCC-Cu-EAM/<br />
&nbsp; https://github.com/CFDEMproject/LAMMPS/tree/master/examples/USER/phonon/3-3D-FCC-Cu-EAM<br />
[12] Examples (LAMMPS calculations)<br />
&nbsp; http://abelcarreras.github.io/DynaPhoPy/examples.html<br />
[13] DynaPhoPy (Phonon anharmonic properties from Molecular Dynamics)<br />
&nbsp; http://abelcarreras.github.io/DynaPhoPy/index.html<br />
&nbsp; https://pypi.org/project/dynaphopy/1.16.4/<br />
[14] PhonTS<br />
&nbsp; http://phonts.mse.ufl.edu/<br />
[15] LAMMPS ? Installation&nbsp;<br />
&nbsp; http://www.nanophysics.pl/MolecularDynamics/lammps-installation.pdf<br />
[16] EAM potentials (Phonon Dispersion Curves)<br />
&nbsp; https://sites.google.com/site/eampotentials/Al<br />
[17] GCMC<br />
&nbsp; https://lammps.sandia.gov/threads/msg53394.html<br />
[18] 新規モンテカルロ計算プログラムの開発と各種触媒系への応用<br />
&nbsp; http://www.aki.che.tohoku.ac.jp/prev/htm5/2b16petro.pdf<br />
[19] 分子吸着による固体表面ナノ構造解析<br />
&nbsp; https://www.scas.co.jp/scas-news/sn-back-issues/pdf/14/talk_14.pdf<br />
[20] LAMMPS input for water (Avogadro)<br />
&nbsp; https://avogadro.cc/docs/extensions/lammps-input-for-water/<br />
[21] Understanding the adsorption process in ZIF-8 using high pressure crystallography and computational modelling<br />
&nbsp; https://datashare.is.ed.ac.uk/handle/10283/3047<br />
[22] Adsorbate-induced lattice deformation in IRMOF-74 series<br />
&nbsp; https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5228029/<br />
[23] [lammps-users] GCMC gas adsorption<br />
&nbsp; https://lammps.sandia.gov/threads/msg74437.html<br />
[24] ASE<br />
&nbsp; http://ryokbys.web.nitech.ac.jp/ase.html<br />
[25] 分子シミュレーションスクール2018：シミュレーションの全体像・概論<br />
&nbsp; http://www.mitsuhiromatsumoto.mech.kyoto-u.ac.jp/<br />
[26] [lammps-users] Problems of temperature calculation for fix GCMC<br />
&nbsp; https://lammps.sandia.gov/threads/msg58606.html<br />
[27] LAMMPSの使い方<br />
&nbsp; http://ryokbys.web.nitech.ac.jp/contents/lammps_usage/<br />
[28] 原子間ポテンシャルの開発を支援するソフトウェア（kPot）<br />
&nbsp; http://www.fml.t.u-tokyo.ac.jp/potenfit/<br />
[29] 9.1. LAMMPS キーワード設定<br />
&nbsp; https://winmostar.com/jp/manual_jp/V7/calcmanual_jp.html<br />
[30] 分子動力学計算（LAMMPS）<br />
&nbsp; https://mochirixi.hatenadiary.com/archive/category/分子動力学計算%EF%BC%88LAMMPS%EF%BC%89<br />
------------------------------------------------------------------------------<br />
&nbsp;